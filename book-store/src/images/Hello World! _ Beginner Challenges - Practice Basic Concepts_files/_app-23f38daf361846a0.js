(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2888],{88036:function(e,t,n){"use strict";n.d(t,{hJ:function(){return Rl},AK:function(){return Jd},JU:function(){return Ll},Jm:function(){return $l},Yp:function(){return Qd},QT:function(){return qd},PL:function(){return Hd},ad:function(){return Fl},nP:function(){return eh},b9:function(){return Od},cf:function(){return Yd},Xo:function(){return Ad},IO:function(){return Td},Bt:function(){return Xd},pl:function(){return $d},r7:function(){return Wd},ar:function(){return Ed}});var r,i=n(25816),s=n(8463),a=n(53333),o=n(74444),u="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},c={},l=l||{},d=u||self;function h(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function f(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var p="closure_uid_"+(1e9*Math.random()>>>0),g=0;function m(e,t,n){return e.call.apply(e.bind,arguments)}function v(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function y(e,t,n){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:v).apply(null,arguments)}function w(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function b(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function _(){this.s=this.s,this.o=this.o}_.prototype.s=!1,_.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,p)&&e[p]||(e[p]=++g))},_.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const S=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function k(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function T(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(h(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function I(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var E=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{d.addEventListener("test",(()=>{}),t),d.removeEventListener("test",(()=>{}),t)}catch(n){}return e}();function C(e){return/^[\s\xa0]*$/.test(e)}function x(){var e=d.navigator;return e&&(e=e.userAgent)?e:""}function A(e){return-1!=x().indexOf(e)}function D(e){return D[" "](e),e}D[" "]=function(){};var O,P,N=A("Opera"),R=A("Trident")||A("MSIE"),L=A("Edge"),M=L||R,U=A("Gecko")&&!(-1!=x().toLowerCase().indexOf("webkit")&&!A("Edge"))&&!(A("Trident")||A("MSIE"))&&!A("Edge"),j=-1!=x().toLowerCase().indexOf("webkit")&&!A("Edge");function F(){var e=d.document;return e?e.documentMode:void 0}e:{var V="",B=function(){var e=x();return U?/rv:([^\);]+)(\)|;)/.exec(e):L?/Edge\/([\d\.]+)/.exec(e):R?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):j?/WebKit\/(\S+)/.exec(e):N?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(B&&(V=B?B[1]:""),R){var Z=F();if(null!=Z&&Z>parseFloat(V)){O=String(Z);break e}}O=V}if(d.document&&R){var q=F();P=q||(parseInt(O,10)||void 0)}else P=void 0;var z=P;function H(e,t){if(I.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(U){e:{try{D(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:$[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&H.$.h.call(this)}}b(H,I);var $={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var W="closure_listenable_"+(1e6*Math.random()|0),Y=0;function G(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Y,this.fa=this.ia=!1}function K(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Q(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function J(e){const t={};for(const n in e)t[n]=e[n];return t}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<X.length;t++)n=X[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function te(e){this.src=e,this.g={},this.h=0}function ne(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=S(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(K(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function re(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}te.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=re(e,t,r,i);return-1<a?(t=e[a],n||(t.ia=!1)):((t=new G(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var ie="closure_lm_"+(1e6*Math.random()|0),se={};function ae(e,t,n,r,i){if(r&&r.once)return ue(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ae(e,t[s],n,r,i);return null}return n=ge(n),e&&e[W]?e.O(t,n,f(r)?!!r.capture:!!r,i):oe(e,t,n,!1,r,i)}function oe(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=f(i)?!!i.capture:!!i,o=fe(e);if(o||(e[ie]=o=new te(e)),(n=o.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=he;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)E||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(de(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ue(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ue(e,t[s],n,r,i);return null}return n=ge(n),e&&e[W]?e.P(t,n,f(r)?!!r.capture:!!r,i):oe(e,t,n,!0,r,i)}function ce(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)ce(e,t[s],n,r,i);else r=f(r)?!!r.capture:!!r,n=ge(n),e&&e[W]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=re(s=e.g[t],n,r,i))&&(K(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=fe(e))&&(t=e.g[t.toString()],e=-1,t&&(e=re(t,n,r,i)),(n=-1<e?t[e]:null)&&le(n))}function le(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[W])ne(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(de(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=fe(t))?(ne(n,e),0==n.h&&(n.src=null,t[ie]=null)):K(e)}}}function de(e){return e in se?se[e]:se[e]="on"+e}function he(e,t){if(e.fa)e=!0;else{t=new H(t,this);var n=e.listener,r=e.la||e.src;e.ia&&le(e),e=n.call(r,t)}return e}function fe(e){return(e=e[ie])instanceof te?e:null}var pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function ge(e){return"function"===typeof e?e:(e[pe]||(e[pe]=function(t){return e.handleEvent(t)}),e[pe])}function me(){_.call(this),this.i=new te(this),this.S=this,this.J=null}function ve(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new I(t,e);else if(t instanceof I)t.target=t.target||e;else{var i=t;ee(t=new I(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=ye(a,r,!0,t)&&i}if(i=ye(a=t.g=e,r,!0,t)&&i,i=ye(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ye(a=t.g=n[s],r,!1,t)&&i}function ye(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.fa&&a.capture==n){var o=a.listener,u=a.la||a.src;a.ia&&ne(e.i,a),i=!1!==o.call(u,r)&&i}}return i&&!r.defaultPrevented}b(me,_),me.prototype[W]=!0,me.prototype.removeEventListener=function(e,t,n,r){ce(this,e,t,n,r)},me.prototype.N=function(){if(me.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)K(n[r]);delete t.g[e],t.h--}}this.J=null},me.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},me.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var we=d.JSON.stringify;function be(){var e=Ce;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _e=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Se),(e=>e.reset()));class Se{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ke(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Te(e){d.setTimeout((()=>{throw e}),0)}let Ie,Ee=!1,Ce=new class{constructor(){this.h=this.g=null}add(e,t){const n=_e.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},xe=()=>{const e=d.Promise.resolve(void 0);Ie=()=>{e.then(Ae)}};var Ae=()=>{for(var e;e=be();){try{e.h.call(e.g)}catch(n){Te(n)}var t=_e;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ee=!1};function De(e,t){me.call(this),this.h=e||1,this.g=t||d,this.j=y(this.qb,this),this.l=Date.now()}function Oe(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Pe(e,t,n){if("function"===typeof e)n&&(e=y(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=y(e.handleEvent,e)}return 2147483647<Number(t)?-1:d.setTimeout(e,t||0)}function Ne(e){e.g=Pe((()=>{e.g=null,e.i&&(e.i=!1,Ne(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}b(De,me),(r=De.prototype).ga=!1,r.T=null,r.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ve(this,"tick"),this.ga&&(Oe(this),this.start()))}},r.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.N=function(){De.$.N.call(this),Oe(this),delete this.g};class Re extends _{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ne(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Le(e){_.call(this),this.h=e,this.g={}}b(Le,_);var Me=[];function Ue(e,t,n,r){Array.isArray(n)||(n&&(Me[0]=n.toString()),n=Me);for(var i=0;i<n.length;i++){var s=ae(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function je(e){Q(e.g,(function(e,t){this.g.hasOwnProperty(t)&&le(e)}),e),e.g={}}function Fe(){this.g=!0}function Ve(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return we(n)}catch(o){return t}}(e,n)+(r?" "+r:"")}))}Le.prototype.N=function(){Le.$.N.call(this),je(this)},Le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fe.prototype.Ea=function(){this.g=!1},Fe.prototype.info=function(){};var Be={},Ze=null;function qe(){return Ze=Ze||new me}function ze(e){I.call(this,Be.Ta,e)}function He(e){const t=qe();ve(t,new ze(t))}function $e(e,t){I.call(this,Be.STAT_EVENT,e),this.stat=t}function We(e){const t=qe();ve(t,new $e(t,e))}function Ye(e,t){I.call(this,Be.Ua,e),this.size=t}function Ge(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return d.setTimeout((function(){e()}),t)}Be.Ta="serverreachability",b(ze,I),Be.STAT_EVENT="statevent",b($e,I),Be.Ua="timingevent",b(Ye,I);var Ke={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Qe={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Je(){}function Xe(e){return e.h||(e.h=e.i())}function et(){}Je.prototype.h=null;var tt,nt={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function rt(){I.call(this,"d")}function it(){I.call(this,"c")}function st(){}function at(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Le(this),this.P=ut,e=M?125:void 0,this.V=new De(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ot}function ot(){this.i=null,this.g="",this.h=!1}b(rt,I),b(it,I),b(st,Je),st.prototype.g=function(){return new XMLHttpRequest},st.prototype.i=function(){return{}},tt=new st;var ut=45e3,ct={},lt={};function dt(e,t,n){e.L=1,e.v=Dt(It(t)),e.s=n,e.S=!0,ht(e,null)}function ht(e,t){e.G=Date.now(),mt(e),e.A=It(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),qt(n.i,"t",r),e.C=0,n=e.l.J,e.h=new ot,e.g=qn(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Re(y(e.Pa,e,e.g),e.O)),Ue(e.U,e.g,"readystatechange",e.nb),t=e.I?J(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),He(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var a="",o=s.split("&"),u=0;u<o.length;u++){var c=o[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");a=2<=d.length&&"type"==d[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function ft(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function pt(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=gt(e,n),r==lt){4==t&&(e.o=4,We(14),i=!1),Ve(e.j,e.m,null,"[Incomplete Response]");break}if(r==ct){e.o=4,We(15),Ve(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ve(e.j,e.m,r,null),_t(e,r)}ft(e)&&r!=lt&&r!=ct&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,We(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ln(t),t.M=!0,We(11))):(Ve(e.j,e.m,n,"[Invalid Chunked Response]"),bt(e),wt(e))}function gt(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?lt:(n=Number(t.substring(n,r)),isNaN(n)?ct:(r+=1)+n>t.length?lt:(t=t.slice(r,r+n),e.C=r+n,t))}function mt(e){e.Y=Date.now()+e.P,vt(e,e.P)}function vt(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ge(y(e.lb,e),t)}function yt(e){e.B&&(d.clearTimeout(e.B),e.B=null)}function wt(e){0==e.l.H||e.J||jn(e.l,e)}function bt(e){yt(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Oe(e.V),je(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function _t(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Gt(n.i,e)))if(!e.K&&Gt(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Un(n),Cn(n)}Rn(n),We(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ge(y(n.ib,n),6e3));if(1>=Yt(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Vn(n,11)}else if((e.K||n.g==e)&&Un(n),!C(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const l=c[5];null!=l&&"number"===typeof l&&0<l&&(r=1.5*l,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Kt(s,s.h),s.h=null))}if(r.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,At(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var a=e;if((r=n).wa=Zn(r,r.J?r.pa:null,r.Y),a.K){Qt(r.i,a);var o=a,u=r.L;u&&o.setTimeout(u),o.B&&(yt(o),mt(o)),r.g=a}else Nn(r);0<n.j.length&&An(n)}else"stop"!=c[0]&&"close"!=c[0]||Vn(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Vn(n,7):En(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}He()}catch(c){}}function St(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(h(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(h(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(h(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(r=at.prototype).setTimeout=function(e){this.P=e},r.nb=function(e){e=e.target;const t=this.M;t&&3==bn(e)?t.l():this.Pa(e)},r.Pa=function(e){try{if(e==this.g)e:{const l=bn(this.g);var t=this.g.Ia();this.g.da();if(!(3>l)&&(3!=l||M||this.g&&(this.h.h||this.g.ja()||_n(this.g)))){this.J||4!=l||7==t||He(),yt(this);var n=this.g.da();this.ca=n;t:if(ft(this)){var r=_n(this.g);e="";var i=r.length,s=4==bn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){bt(this),wt(this);var a="";break t}this.h.i=new d.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a}))}(this.j,this.u,this.A,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var o,u=this.g;if((o=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(o)){var c=o;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,We(12),bt(this),wt(this);break e}Ve(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_t(this,n)}this.S?(pt(this,l,a),M&&this.i&&3==l&&(Ue(this.U,this.V,"tick",this.mb),this.V.start())):(Ve(this.j,this.m,a,null),_t(this,a)),4==l&&bt(this),this.i&&!this.J&&(4==l?jn(this.l,this):(this.i=!1,mt(this)))}else(function(e){const t={};e=(e.g&&2<=bn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(C(e[r]))continue;var n=ke(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.o=3,We(12)):(this.o=0,We(13)),bt(this),wt(this)}}}catch(l){}},r.mb=function(){if(this.g){var e=bn(this.g),t=this.g.ja();this.C<t.length&&(yt(this),pt(this,e,t),this.i&&4!=e&&mt(this))}},r.cancel=function(){this.J=!0,bt(this)},r.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(He(),We(17)),bt(this),this.o=2,wt(this)):vt(this,this.Y-e)};var kt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tt(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Tt){this.h=e.h,Et(this,e.j),this.s=e.s,this.g=e.g,Ct(this,e.m),this.l=e.l;var t=e.i,n=new Ft;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),xt(this,n),this.o=e.o}else e&&(t=String(e).match(kt))?(this.h=!1,Et(this,t[1]||"",!0),this.s=Ot(t[2]||""),this.g=Ot(t[3]||"",!0),Ct(this,t[4]),this.l=Ot(t[5]||"",!0),xt(this,t[6]||"",!0),this.o=Ot(t[7]||"")):(this.h=!1,this.i=new Ft(null,this.h))}function It(e){return new Tt(e)}function Et(e,t,n){e.j=n?Ot(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ct(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function xt(e,t,n){t instanceof Ft?(e.i=t,function(e,t){t&&!e.j&&(Vt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Bt(this,t),qt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Pt(t,Ut)),e.i=new Ft(t,e.h))}function At(e,t,n){e.i.set(t,n)}function Dt(e){return At(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ot(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Pt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Nt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Nt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Tt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Pt(t,Rt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Pt(t,Rt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Pt(n,"/"==n.charAt(0)?Mt:Lt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Pt(n,jt)),e.join("")};var Rt=/[#\/\?@]/g,Lt=/[#\?:]/g,Mt=/[#\?]/g,Ut=/[#\?@]/g,jt=/#/g;function Ft(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Vt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Bt(e,t){Vt(e),t=zt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Zt(e,t){return Vt(e),t=zt(e,t),e.g.has(t)}function qt(e,t,n){Bt(e,t),0<n.length&&(e.i=null,e.g.set(zt(e,t),k(n)),e.h+=n.length)}function zt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(r=Ft.prototype).add=function(e,t){Vt(this),this.i=null,e=zt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},r.forEach=function(e,t){Vt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},r.ta=function(){Vt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},r.Z=function(e){Vt(this);let t=[];if("string"===typeof e)Zt(this,e)&&(t=t.concat(this.g.get(zt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},r.set=function(e,t){return Vt(this),this.i=null,Zt(this,e=zt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},r.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")};function Ht(e){this.l=e||$t,d.PerformanceNavigationTiming?e=0<(e=d.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(d.g&&d.g.Ka&&d.g.Ka()&&d.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var $t=10;function Wt(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Yt(e){return e.h?1:e.g?e.g.size:0}function Gt(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Kt(e,t){e.g?e.g.add(t):e.h=t}function Qt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Jt(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return k(e.i)}Ht.prototype.cancel=function(){if(this.i=Jt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Xt;function en(){this.g=new class{stringify(e){return d.JSON.stringify(e,void 0)}parse(e){return d.JSON.parse(e,void 0)}}}function tn(e,t,n){const r=n||"";try{St(e,(function(e,n){let i=e;f(e)&&(i=we(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function nn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function rn(e){this.l=e.fc||null,this.j=e.ob||!1}function sn(e,t){me.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=an,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}b(rn,Je),rn.prototype.g=function(){return new sn(this.l,this.j)},rn.prototype.i=(Xt={},function(){return Xt}),b(sn,me);var an=0;function on(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function un(e){e.readyState=4,e.l=null,e.j=null,e.A=null,cn(e)}function cn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(r=sn.prototype).open=function(e,t){if(this.readyState!=an)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,cn(this)},r.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||d).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,un(this)),this.readyState=an},r.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,cn(this)),this.g&&(this.readyState=3,cn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof d.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;on(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},r.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?un(this):cn(this),3==this.readyState&&on(this)}},r.Za=function(e){this.g&&(this.response=this.responseText=e,un(this))},r.Ya=function(e){this.g&&(this.response=e,un(this))},r.ka=function(){this.g&&un(this)},r.setRequestHeader=function(e,t){this.v.append(e,t)},r.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(sn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ln=d.JSON.parse;function dn(e){me.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=hn,this.L=this.M=!1}b(dn,me);var hn="",fn=/^https?$/i,pn=["POST","PUT"];function gn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,mn(e),yn(e)}function mn(e){e.F||(e.F=!0,ve(e,"complete"),ve(e,"error"))}function vn(e){if(e.h&&"undefined"!=typeof l&&(!e.C[1]||4!=bn(e)||2!=e.da()))if(e.v&&4==bn(e))Pe(e.La,0,e);else if(ve(e,"readystatechange"),4==bn(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var i=String(e.I).match(kt)[1]||null;!i&&d.self&&d.self.location&&(i=d.self.location.protocol.slice(0,-1)),r=!fn.test(i?i.toLowerCase():"")}n=r}if(n)ve(e,"complete"),ve(e,"success");else{e.m=6;try{var s=2<bn(e)?e.g.statusText:""}catch(a){s=""}e.j=s+" ["+e.da()+"]",mn(e)}}finally{yn(e)}}}function yn(e,t){if(e.g){wn(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ve(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function wn(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(d.clearTimeout(e.A),e.A=null)}function bn(e){return e.g?e.g.readyState:0}function _n(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case hn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Er){return null}}function Sn(e){let t="";return Q(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function kn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Sn(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):At(e,t,n))}function Tn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function In(e){this.Ga=0,this.j=[],this.l=new Fe,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Tn("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Tn("baseRetryDelayMs",5e3,e),this.hb=Tn("retryDelaySeedMs",1e4,e),this.eb=Tn("forwardChannelMaxRetries",2,e),this.xa=Tn("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Ht(e&&e.concurrentRequestLimit),this.Ja=new en,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function En(e){if(xn(e),3==e.H){var t=e.W++,n=It(e.I);if(At(n,"SID",e.K),At(n,"RID",t),At(n,"TYPE","terminate"),On(e,n),(t=new at(e,e.l,t)).L=2,t.v=Dt(It(n)),n=!1,d.navigator&&d.navigator.sendBeacon)try{n=d.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&d.Image&&((new Image).src=t.v,n=!0),n||(t.g=qn(t.l,null),t.g.ha(t.v)),t.G=Date.now(),mt(t)}Bn(e)}function Cn(e){e.g&&(Ln(e),e.g.cancel(),e.g=null)}function xn(e){Cn(e),e.u&&(d.clearTimeout(e.u),e.u=null),Un(e),e.i.cancel(),e.m&&("number"===typeof e.m&&d.clearTimeout(e.m),e.m=null)}function An(e){if(!Wt(e.i)&&!e.m){e.m=!0;var t=e.Na;Ie||xe(),Ee||(Ie(),Ee=!0),Ce.add(t,e),e.C=0}}function Dn(e,t){var n;n=t?t.m:e.W++;const r=It(e.I);At(r,"SID",e.K),At(r,"RID",n),At(r,"AID",e.V),On(e,r),e.o&&e.s&&kn(r,e.o,e.s),n=new at(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Pn(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Kt(e.i,n),dt(n,r,t)}function On(e,t){e.na&&Q(e.na,(function(e,n){At(t,n,e)})),e.h&&St({},(function(e,n){At(t,n,e)}))}function Pn(e,t,n){n=Math.min(e.j.length,n);var r=e.h?y(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const o=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),s=!1;else try{tn(o,e,"req"+n+"_")}catch(Ur){r&&r(o)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Nn(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ie||xe(),Ee||(Ie(),Ee=!0),Ce.add(t,e),e.A=0}}function Rn(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Ge(y(e.Ma,e),Fn(e,e.A)),e.A++,!0)}function Ln(e){null!=e.B&&(d.clearTimeout(e.B),e.B=null)}function Mn(e){e.g=new at(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=It(e.wa);At(t,"RID","rpc"),At(t,"SID",e.K),At(t,"AID",e.V),At(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&At(t,"TO",e.qa),At(t,"TYPE","xmlhttp"),On(e,t),e.o&&e.s&&kn(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Dt(It(t)),n.s=null,n.S=!0,ht(n,e)}function Un(e){null!=e.v&&(d.clearTimeout(e.v),e.v=null)}function jn(e,t){var n=null;if(e.g==t){Un(e),Ln(e),e.g=null;var r=2}else{if(!Gt(e.i,t))return;n=t.F,Qt(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;ve(r=qe(),new Ye(r,n)),An(e)}else Nn(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Yt(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Ge(y(e.Na,e,t),Fn(e,e.C)),e.C++,!0))}(e,t)||2==r&&Rn(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Vn(e,5);break;case 4:Vn(e,10);break;case 3:Vn(e,6);break;default:Vn(e,2)}}function Fn(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Vn(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=y(e.pb,e);n||(n=new Tt("//www.google.com/images/cleardot.gif"),d.location&&"http"==d.location.protocol||Et(n,"https"),Dt(n)),function(e,t){const n=new Fe;if(d.Image){const r=new Image;r.onload=w(nn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=w(nn,n,r,"TestLoadImage: error",!1,t),r.onabort=w(nn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=w(nn,n,r,"TestLoadImage: timeout",!1,t),d.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else We(2);e.H=0,e.h&&e.h.za(t),Bn(e),xn(e)}function Bn(e){if(e.H=0,e.ma=[],e.h){const t=Jt(e.i);0==t.length&&0==e.j.length||(T(e.ma,t),T(e.ma,e.j),e.i.i.length=0,k(e.j),e.j.length=0),e.h.ya()}}function Zn(e,t,n){var r=n instanceof Tt?It(n):new Tt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Ct(r,r.m);else{var i=d.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Tt(null);r&&Et(s,r),t&&(s.g=t),i&&Ct(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&At(r,n,t),At(r,"VER",e.ra),On(e,r),r}function qn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new dn(new rn({ob:!0})):new dn(e.va)).Oa(e.J),t}function zn(){}function Hn(){if(R&&!(10<=Number(z)))throw Error("Environmental error: no available transport.")}function $n(e,t){me.call(this),this.g=new In(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!C(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!C(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Gn(this)}function Wn(e){rt.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Yn(){it.call(this),this.status=1}function Gn(e){this.g=e}function Kn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Qn(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Jn(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(r=dn.prototype).Oa=function(e){this.M=e},r.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():tt.g(),this.C=this.u?Xe(this.u):Xe(tt),this.g.onreadystatechange=y(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void gn(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=d.FormData&&e instanceof d.FormData,!(0<=S(pn,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,o]of n)this.g.setRequestHeader(a,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wn(this),0<this.B&&((this.L=function(e){return R&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=y(this.ua,this)):this.A=Pe(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){gn(this,s)}},r.ua=function(){"undefined"!=typeof l&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ve(this,"timeout"),this.abort(8))},r.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ve(this,"complete"),ve(this,"abort"),yn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),yn(this,!0)),dn.$.N.call(this)},r.La=function(){this.s||(this.G||this.v||this.l?vn(this):this.kb())},r.kb=function(){vn(this)},r.isActive=function(){return!!this.g},r.da=function(){try{return 2<bn(this)?this.g.status:-1}catch(Xt){return-1}},r.ja=function(){try{return this.g?this.g.responseText:""}catch(Xt){return""}},r.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ln(t)}},r.Ia=function(){return this.m},r.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(r=In.prototype).ra=8,r.H=1,r.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new at(this,this.l,e);let s=this.s;if(this.U&&(s?(s=J(s),ee(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Pn(this,i,t),At(n=It(this.I),"RID",e),At(n,"CVER",22),this.F&&At(n,"X-HTTP-Session-Id",this.F),On(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Sn(s)))+"&"+t:this.o&&kn(n,this.o,s)),Kt(this.i,i),this.bb&&At(n,"TYPE","init"),this.P?(At(n,"$req",t),At(n,"SID","null"),i.aa=!0,dt(i,n,null)):dt(i,n,t),this.H=2}}else 3==this.H&&(e?Dn(this,e):0==this.j.length||Wt(this.i)||Dn(this))},r.Ma=function(){if(this.u=null,Mn(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ge(y(this.jb,this),e)}},r.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,We(10),Cn(this),Mn(this))},r.ib=function(){null!=this.v&&(this.v=null,Cn(this),Rn(this),We(19))},r.pb=function(e){e?(this.l.info("Successfully pinged google.com"),We(2)):(this.l.info("Failed to ping google.com"),We(1))},r.isActive=function(){return!!this.h&&this.h.isActive(this)},(r=zn.prototype).Ba=function(){},r.Aa=function(){},r.za=function(){},r.ya=function(){},r.isActive=function(){return!0},r.Va=function(){},Hn.prototype.g=function(e,t){return new $n(e,t)},b($n,me),$n.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;We(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Zn(e,null,e.Y),An(e)},$n.prototype.close=function(){En(this.g)},$n.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=we(e),e=n);t.j.push(new class{constructor(e,t){this.g=e,this.map=t}}(t.fb++,e)),3==t.H&&An(t)},$n.prototype.N=function(){this.g.h=null,delete this.j,En(this.g),delete this.g,$n.$.N.call(this)},b(Wn,rt),b(Yn,it),b(Gn,zn),Gn.prototype.Ba=function(){ve(this.g,"a")},Gn.prototype.Aa=function(e){ve(this.g,new Wn(e))},Gn.prototype.za=function(e){ve(this.g,new Yn)},Gn.prototype.ya=function(){ve(this.g,"b")},b(Kn,(function(){this.blockSize=-1})),Kn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Kn.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Qn(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Qn(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Qn(this,r),i=0;break}}this.h=i,this.i+=t},Kn.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Xn={};function er(e){return-128<=e&&128>e?function(e,t){var n=Xn;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Jn([0|e],0>e?-1:0)})):new Jn([0|e],0>e?-1:0)}function tr(e){if(isNaN(e)||!isFinite(e))return rr;if(0>e)return ur(tr(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=nr;return new Jn(t,0)}var nr=4294967296,rr=er(0),ir=er(1),sr=er(16777216);function ar(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function or(e){return-1==e.h}function ur(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Jn(n,~e.h).add(ir)}function cr(e,t){return e.add(ur(t))}function lr(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function dr(e,t){this.g=e,this.h=t}function hr(e,t){if(ar(t))throw Error("division by zero");if(ar(e))return new dr(rr,rr);if(or(e))return t=hr(ur(e),t),new dr(ur(t.g),ur(t.h));if(or(t))return t=hr(e,ur(t)),new dr(ur(t.g),t.h);if(30<e.g.length){if(or(e)||or(t))throw Error("slowDivide_ only works with positive integers.");for(var n=ir,r=t;0>=r.X(e);)n=fr(n),r=fr(r);var i=pr(n,1),s=pr(r,1);for(r=pr(r,2),n=pr(n,2);!ar(r);){var a=s.add(r);0>=a.X(e)&&(i=i.add(n),s=a),r=pr(r,1),n=pr(n,1)}return t=cr(e,i.R(t)),new dr(i,t)}for(i=rr;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),a=(s=tr(n)).R(t);or(a)||0<a.X(e);)a=(s=tr(n-=r)).R(t);ar(s)&&(s=ir),i=i.add(s),e=cr(e,a)}return new dr(i,e)}function fr(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Jn(n,e.h)}function pr(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Jn(i,e.h)}(r=Jn.prototype).ea=function(){if(or(this))return-ur(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:nr+r)*t,t*=nr}return e},r.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(ar(this))return"0";if(or(this))return"-"+ur(this).toString(e);for(var t=tr(Math.pow(e,6)),n=this,r="";;){var i=hr(n,t).g,s=((0<(n=cr(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(ar(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},r.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},r.X=function(e){return or(e=cr(this,e))?-1:ar(e)?0:1},r.abs=function(){return or(this)?ur(this):this},r.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),a=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=a>>>16,s&=65535,a&=65535,n[i]=a<<16|s}return new Jn(n,-2147483648&n[n.length-1]?-1:0)},r.R=function(e){if(ar(this)||ar(e))return rr;if(or(this))return or(e)?ur(this).R(ur(e)):ur(ur(this).R(e));if(or(e))return ur(this.R(ur(e)));if(0>this.X(sr)&&0>e.X(sr))return tr(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,a=65535&this.D(r),o=e.D(i)>>>16,u=65535&e.D(i);n[2*r+2*i]+=a*u,lr(n,2*r+2*i),n[2*r+2*i+1]+=s*u,lr(n,2*r+2*i+1),n[2*r+2*i+1]+=a*o,lr(n,2*r+2*i+1),n[2*r+2*i+2]+=s*o,lr(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Jn(n,0)},r.gb=function(e){return hr(this,e).h},r.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Jn(n,this.h&e.h)},r.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Jn(n,this.h|e.h)},r.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Jn(n,this.h^e.h)},Hn.prototype.createWebChannel=Hn.prototype.g,$n.prototype.send=$n.prototype.u,$n.prototype.open=$n.prototype.m,$n.prototype.close=$n.prototype.close,Ke.NO_ERROR=0,Ke.TIMEOUT=8,Ke.HTTP_ERROR=6,Qe.COMPLETE="complete",et.EventType=nt,nt.OPEN="a",nt.CLOSE="b",nt.ERROR="c",nt.MESSAGE="d",me.prototype.listen=me.prototype.O,dn.prototype.listenOnce=dn.prototype.P,dn.prototype.getLastError=dn.prototype.Sa,dn.prototype.getLastErrorCode=dn.prototype.Ia,dn.prototype.getStatus=dn.prototype.da,dn.prototype.getResponseJson=dn.prototype.Wa,dn.prototype.getResponseText=dn.prototype.ja,dn.prototype.send=dn.prototype.ha,dn.prototype.setWithCredentials=dn.prototype.Oa,Kn.prototype.digest=Kn.prototype.l,Kn.prototype.reset=Kn.prototype.reset,Kn.prototype.update=Kn.prototype.j,Jn.prototype.add=Jn.prototype.add,Jn.prototype.multiply=Jn.prototype.R,Jn.prototype.modulo=Jn.prototype.gb,Jn.prototype.compare=Jn.prototype.X,Jn.prototype.toNumber=Jn.prototype.ea,Jn.prototype.toString=Jn.prototype.toString,Jn.prototype.getBits=Jn.prototype.D,Jn.fromNumber=tr,Jn.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return ur(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=tr(Math.pow(n,8)),i=rr,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+a),n);8>a?(a=tr(Math.pow(n,a)),i=i.R(a).add(tr(o))):i=(i=i.R(r)).add(tr(o))}return i};var gr=c.createWebChannelTransport=function(){return new Hn},mr=c.getStatEventTarget=function(){return qe()},vr=c.ErrorCode=Ke,yr=c.EventType=Qe,wr=c.Event=Be,br=c.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},_r=c.FetchXmlHttpFactory=rn,Sr=c.WebChannel=et,kr=c.XhrIo=dn,Tr=c.Md5=Kn,Ir=c.Integer=Jn;n(83454);const Er="@firebase/firestore";class Cr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cr.UNAUTHENTICATED=new Cr(null),Cr.GOOGLE_CREDENTIALS=new Cr("google-credentials-uid"),Cr.FIRST_PARTY=new Cr("first-party-uid"),Cr.MOCK_USER=new Cr("mock-user");let xr="9.23.0";const Ar=new a.Yd("@firebase/firestore");function Dr(){return Ar.logLevel}function Or(e,...t){if(Ar.logLevel<=a.in.DEBUG){const n=t.map(Rr);Ar.debug(`Firestore (${xr}): ${e}`,...n)}}function Pr(e,...t){if(Ar.logLevel<=a.in.ERROR){const n=t.map(Rr);Ar.error(`Firestore (${xr}): ${e}`,...n)}}function Nr(e,...t){if(Ar.logLevel<=a.in.WARN){const n=t.map(Rr);Ar.warn(`Firestore (${xr}): ${e}`,...n)}}function Rr(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Lr(e="Unexpected state"){const t=`FIRESTORE (${xr}) INTERNAL ASSERTION FAILED: `+e;throw Pr(t),new Error(t)}function Mr(e,t){e||Lr()}function Ur(e,t){return e}const jr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fr extends o.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Br{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Cr.UNAUTHENTICATED)))}shutdown(){}}class qr{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class zr{constructor(e){this.t=e,this.currentUser=Cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Vr,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{Or("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Or("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Vr)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Or("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Mr("string"==typeof t.accessToken),new Br(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Mr(null===e||"string"==typeof e),new Cr(e)}}class Hr{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Cr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class $r{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Hr(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(Cr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Wr{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yr{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&Or("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.T;return this.T=e.token,Or("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Or("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):Or("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Mr("string"==typeof e.token),this.T=e.token,new Wr(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Gr(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Kr{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=Gr(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function Qr(e,t){return e<t?-1:e>t?1:0}function Jr(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class Xr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fr(jr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fr(jr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fr(jr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fr(jr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xr.fromMillis(Date.now())}static fromDate(e){return Xr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Xr(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qr(this.nanoseconds,e.nanoseconds):Qr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ei{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ei(e)}static min(){return new ei(new Xr(0,0))}static max(){return new ei(new Xr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ti{constructor(e,t,n){void 0===t?t=0:t>e.length&&Lr(),void 0===n?n=e.length-t:n>e.length-t&&Lr(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ti.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ti?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ni extends ti{construct(e,t,n){return new ni(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Fr(jr.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new ni(t)}static emptyPath(){return new ni([])}}const ri=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ii extends ti{construct(e,t,n){return new ii(e,t,n)}static isValidIdentifier(e){return ri.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ii.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ii(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Fr(jr.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Fr(jr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Fr(jr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Fr(jr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ii(t)}static emptyPath(){return new ii([])}}class si{constructor(e){this.path=e}static fromPath(e){return new si(ni.fromString(e))}static fromName(e){return new si(ni.fromString(e).popFirst(5))}static empty(){return new si(ni.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ni.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ni.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new si(new ni(e.slice()))}}class ai{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}ai.UNKNOWN_ID=-1;function oi(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ei.fromTimestamp(1e9===r?new Xr(n+1,0):new Xr(n,r));return new ci(i,si.empty(),t)}function ui(e){return new ci(e.readTime,e.key,-1)}class ci{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ci(ei.min(),si.empty(),-1)}static max(){return new ci(ei.max(),si.empty(),-1)}}function li(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=si.comparator(e.documentKey,t.documentKey),0!==n?n:Qr(e.largestBatchId,t.largestBatchId))}const di="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hi{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function fi(e){if(e.code!==jr.FAILED_PRECONDITION||e.message!==di)throw e;Or("LocalStore","Unexpectedly lost primary lease")}class pi{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Lr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pi(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof pi?t:pi.resolve(t)}catch(e){return pi.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):pi.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):pi.reject(t)}static resolve(e){return new pi(((t,n)=>{t(e)}))}static reject(e){return new pi(((t,n)=>{n(e)}))}static waitFor(e){return new pi(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=pi.resolve(!1);for(const n of e)t=t.next((e=>e?pi.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new pi(((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const u=o;t(e[u]).next((e=>{s[u]=e,++a,a===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new pi(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function gi(e){return"IndexedDbTransactionError"===e.name}class mi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function vi(e){return null==e}function yi(e){return 0===e&&1/e==-1/0}function wi(e){return"number"==typeof e&&Number.isInteger(e)&&!yi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}mi.ct=-1;const bi=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_i=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Si=_i;function ki(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ti(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ii(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ei{constructor(e,t){this.comparator=e,this.root=t||xi.EMPTY}insert(e,t){return new Ei(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xi.BLACK,null,null))}remove(e){return new Ei(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ci(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ci(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ci(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ci(this.root,e,this.comparator,!0)}}class Ci{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xi{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:xi.RED,this.left=null!=r?r:xi.EMPTY,this.right=null!=i?i:xi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new xi(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return xi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return xi.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Lr();if(this.right.isRed())throw Lr();const e=this.left.check();if(e!==this.right.check())throw Lr();return e+(this.isRed()?0:1)}}xi.EMPTY=null,xi.RED=!0,xi.BLACK=!1,xi.EMPTY=new class{constructor(){this.size=0}get key(){throw Lr()}get value(){throw Lr()}get color(){throw Lr()}get left(){throw Lr()}get right(){throw Lr()}copy(e,t,n,r,i){return this}insert(e,t,n){return new xi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ai{constructor(e){this.comparator=e,this.data=new Ei(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Di(this.data.getIterator())}getIteratorFrom(e){return new Di(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Ai))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ai(this.comparator);return t.data=e,t}}class Di{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Oi{constructor(e){this.fields=e,e.sort(ii.comparator)}static empty(){return new Oi([])}unionWith(e){let t=new Ai(ii.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Oi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jr(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Pi extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ni{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Pi("Invalid base64 string: "+e):e}}(e);return new Ni(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ni(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ni.EMPTY_BYTE_STRING=new Ni("");const Ri=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Li(e){if(Mr(!!e),"string"==typeof e){let t=0;const n=Ri.exec(e);if(Mr(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Mi(e.seconds),nanos:Mi(e.nanos)}}function Mi(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ui(e){return"string"==typeof e?Ni.fromBase64String(e):Ni.fromUint8Array(e)}function ji(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Fi(e){const t=e.mapValue.fields.__previous_value__;return ji(t)?Fi(t):t}function Vi(e){const t=Li(e.mapValue.fields.__local_write_time__.timestampValue);return new Xr(t.seconds,t.nanos)}class Bi{constructor(e,t,n,r,i,s,a,o,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=u}}class Zi{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Zi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Zi&&e.projectId===this.projectId&&e.database===this.database}}const qi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function zi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ji(e)?4:is(e)?9007199254740991:10:Lr()}function Hi(e,t){if(e===t)return!0;const n=zi(e);if(n!==zi(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Vi(e).isEqual(Vi(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Li(e.timestampValue),r=Li(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ui(e.bytesValue).isEqual(Ui(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Mi(e.geoPointValue.latitude)===Mi(t.geoPointValue.latitude)&&Mi(e.geoPointValue.longitude)===Mi(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Mi(e.integerValue)===Mi(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Mi(e.doubleValue),r=Mi(t.doubleValue);return n===r?yi(n)===yi(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Jr(e.arrayValue.values||[],t.arrayValue.values||[],Hi);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ki(n)!==ki(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Hi(n[i],r[i])))return!1;return!0}(e,t);default:return Lr()}}function $i(e,t){return void 0!==(e.values||[]).find((e=>Hi(e,t)))}function Wi(e,t){if(e===t)return 0;const n=zi(e),r=zi(t);if(n!==r)return Qr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qr(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Mi(e.integerValue||e.doubleValue),r=Mi(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Yi(e.timestampValue,t.timestampValue);case 4:return Yi(Vi(e),Vi(t));case 5:return Qr(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ui(e),r=Ui(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Qr(n[i],r[i]);if(0!==e)return e}return Qr(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Qr(Mi(e.latitude),Mi(t.latitude));return 0!==n?n:Qr(Mi(e.longitude),Mi(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Wi(n[i],r[i]);if(e)return e}return Qr(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===qi.mapValue&&t===qi.mapValue)return 0;if(e===qi.mapValue)return 1;if(t===qi.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=Qr(r[a],s[a]);if(0!==e)return e;const t=Wi(n[r[a]],i[s[a]]);if(0!==t)return t}return Qr(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Lr()}}function Yi(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Qr(e,t);const n=Li(e),r=Li(t),i=Qr(n.seconds,r.seconds);return 0!==i?i:Qr(n.nanos,r.nanos)}function Gi(e){return Ki(e)}function Ki(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Li(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ui(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,si.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ki(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Ki(e.fields[i])}`;return n+"}"}(e.mapValue):Lr();var t,n}function Qi(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Ji(e){return!!e&&"integerValue"in e}function Xi(e){return!!e&&"arrayValue"in e}function es(e){return!!e&&"nullValue"in e}function ts(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ns(e){return!!e&&"mapValue"in e}function rs(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ti(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=rs(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=rs(e.arrayValue.values[n]);return t}return Object.assign({},e)}function is(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class ss{constructor(e){this.value=e}static empty(){return new ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ns(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rs(t)}setAll(e){let t=ii.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=rs(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());ns(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ns(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ti(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new ss(rs(this.value))}}function as(e){const t=[];return Ti(e.fields,((e,n)=>{const r=new ii([e]);if(ns(n)){const e=as(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Oi(t)}class os{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new os(e,0,ei.min(),ei.min(),ei.min(),ss.empty(),0)}static newFoundDocument(e,t,n,r){return new os(e,1,t,ei.min(),n,r,0)}static newNoDocument(e,t){return new os(e,2,t,ei.min(),ei.min(),ss.empty(),0)}static newUnknownDocument(e,t){return new os(e,3,t,ei.min(),ei.min(),ss.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ei.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ei.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof os&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new os(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class us{constructor(e,t){this.position=e,this.inclusive=t}}function cs(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?si.comparator(si.fromName(a.referenceValue),n.key):Wi(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ls(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Hi(e.position[n],t.position[n]))return!1;return!0}class ds{constructor(e,t="asc"){this.field=e,this.dir=t}}function hs(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class fs{}class ps extends fs{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ss(e,t,n):"array-contains"===t?new Es(e,n):"in"===t?new Cs(e,n):"not-in"===t?new xs(e,n):"array-contains-any"===t?new As(e,n):new ps(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ks(e,n):new Ts(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Wi(t,this.value)):null!==t&&zi(this.value)===zi(t)&&this.matchesComparison(Wi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Lr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class gs extends fs{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new gs(e,t)}matches(e){return ms(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft((e=>e.isInequality()));return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ms(e){return"and"===e.op}function vs(e){return ys(e)&&ms(e)}function ys(e){for(const t of e.filters)if(t instanceof gs)return!1;return!0}function ws(e){if(e instanceof ps)return e.field.canonicalString()+e.op.toString()+Gi(e.value);if(vs(e))return e.filters.map((e=>ws(e))).join(",");{const t=e.filters.map((e=>ws(e))).join(",");return`${e.op}(${t})`}}function bs(e,t){return e instanceof ps?function(e,t){return t instanceof ps&&e.op===t.op&&e.field.isEqual(t.field)&&Hi(e.value,t.value)}(e,t):e instanceof gs?function(e,t){return t instanceof gs&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&bs(n,t.filters[r])),!0)}(e,t):void Lr()}function _s(e){return e instanceof ps?function(e){return`${e.field.canonicalString()} ${e.op} ${Gi(e.value)}`}(e):e instanceof gs?function(e){return e.op.toString()+" {"+e.getFilters().map(_s).join(" ,")+"}"}(e):"Filter"}class Ss extends ps{constructor(e,t,n){super(e,t,n),this.key=si.fromName(n.referenceValue)}matches(e){const t=si.comparator(e.key,this.key);return this.matchesComparison(t)}}class ks extends ps{constructor(e,t){super(e,"in",t),this.keys=Is("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Ts extends ps{constructor(e,t){super(e,"not-in",t),this.keys=Is("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Is(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>si.fromName(e.referenceValue)))}class Es extends ps{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xi(t)&&$i(t.arrayValue,this.value)}}class Cs extends ps{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&$i(this.value.arrayValue,t)}}class xs extends ps{constructor(e,t){super(e,"not-in",t)}matches(e){if($i(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!$i(this.value.arrayValue,t)}}class As extends ps{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xi(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>$i(this.value.arrayValue,e)))}}class Ds{constructor(e,t=null,n=[],r=[],i=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.dt=null}}function Os(e,t=null,n=[],r=[],i=null,s=null,a=null){return new Ds(e,t,n,r,i,s,a)}function Ps(e){const t=Ur(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ws(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),vi(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Gi(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Gi(e))).join(",")),t.dt=e}return t.dt}function Ns(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!hs(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bs(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ls(e.startAt,t.startAt)&&ls(e.endAt,t.endAt)}function Rs(e){return si.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Ls{constructor(e,t=null,n=[],r=[],i=null,s="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.wt=null,this._t=null,this.startAt,this.endAt}}function Ms(e,t,n,r,i,s,a,o){return new Ls(e,t,n,r,i,s,a,o)}function Us(e){return new Ls(e)}function js(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Fs(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Vs(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Bs(e){return null!==e.collectionGroup}function Zs(e){const t=Ur(e);if(null===t.wt){t.wt=[];const e=Vs(t),n=Fs(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new ds(e)),t.wt.push(new ds(ii.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new ds(ii.keyField(),e))}}}return t.wt}function qs(e){const t=Ur(e);if(!t._t)if("F"===t.limitType)t._t=Os(t.path,t.collectionGroup,Zs(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of Zs(t)){const t="desc"===i.dir?"asc":"desc";e.push(new ds(i.field,t))}const n=t.endAt?new us(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new us(t.startAt.position,t.startAt.inclusive):null;t._t=Os(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function zs(e,t){t.getFirstInequalityField(),Vs(e);const n=e.filters.concat([t]);return new Ls(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Hs(e,t,n){return new Ls(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function $s(e,t){return Ns(qs(e),qs(t))&&e.limitType===t.limitType}function Ws(e){return`${Ps(qs(e))}|lt:${e.limitType}`}function Ys(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>_s(e))).join(", ")}]`),vi(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Gi(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Gi(e))).join(",")),`Target(${t})`}(qs(e))}; limitType=${e.limitType})`}function Gs(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):si.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Zs(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=cs(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Zs(e),t))&&!(e.endAt&&!function(e,t,n){const r=cs(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Zs(e),t))}(e,t)}function Ks(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Qs(e){return(t,n)=>{let r=!1;for(const i of Zs(e)){const e=Js(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Js(e,t,n){const r=e.field.isKeyField()?si.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Wi(r,i):Lr()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Lr()}}class Xs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ti(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Ii(this.inner)}size(){return this.innerSize}}const ea=new Ei(si.comparator);function ta(){return ea}const na=new Ei(si.comparator);function ra(...e){let t=na;for(const n of e)t=t.insert(n.key,n);return t}function ia(e){let t=na;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function sa(){return oa()}function aa(){return oa()}function oa(){return new Xs((e=>e.toString()),((e,t)=>e.isEqual(t)))}const ua=new Ei(si.comparator),ca=new Ai(si.comparator);function la(...e){let t=ca;for(const n of e)t=t.add(n);return t}const da=new Ai(Qr);function ha(){return da}function fa(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yi(t)?"-0":t}}function pa(e){return{integerValue:""+e}}function ga(e,t){return wi(t)?pa(t):fa(e,t)}class ma{constructor(){this._=void 0}}function va(e,t,n){return e instanceof ba?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ji(t)&&(t=Fi(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof _a?Sa(e,t):e instanceof ka?Ta(e,t):function(e,t){const n=wa(e,t),r=Ea(n)+Ea(e.gt);return Ji(n)&&Ji(e.gt)?pa(r):fa(e.serializer,r)}(e,t)}function ya(e,t,n){return e instanceof _a?Sa(e,t):e instanceof ka?Ta(e,t):n}function wa(e,t){return e instanceof Ia?Ji(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class ba extends ma{}class _a extends ma{constructor(e){super(),this.elements=e}}function Sa(e,t){const n=Ca(t);for(const r of e.elements)n.some((e=>Hi(e,r)))||n.push(r);return{arrayValue:{values:n}}}class ka extends ma{constructor(e){super(),this.elements=e}}function Ta(e,t){let n=Ca(t);for(const r of e.elements)n=n.filter((e=>!Hi(e,r)));return{arrayValue:{values:n}}}class Ia extends ma{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Ea(e){return Mi(e.integerValue||e.doubleValue)}function Ca(e){return Xi(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class xa{constructor(e,t){this.field=e,this.transform=t}}class Aa{constructor(e,t){this.version=e,this.transformResults=t}}class Da{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Da}static exists(e){return new Da(void 0,e)}static updateTime(e){return new Da(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oa(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Pa{}function Na(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new qa(e.key,Da.none()):new ja(e.key,e.data,Da.none());{const n=e.data,r=ss.empty();let i=new Ai(ii.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Fa(e.key,r,new Oi(i.toArray()),Da.none())}}function Ra(e,t,n){e instanceof ja?function(e,t,n){const r=e.value.clone(),i=Ba(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Fa?function(e,t,n){if(!Oa(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ba(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Va(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function La(e,t,n,r){return e instanceof ja?function(e,t,n,r){if(!Oa(e.precondition,t))return n;const i=e.value.clone(),s=Za(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Fa?function(e,t,n,r){if(!Oa(e.precondition,t))return n;const i=Za(e.fieldTransforms,r,t),s=t.data;return s.setAll(Va(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Oa(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ma(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=wa(r.transform,e||null);null!=i&&(null===n&&(n=ss.empty()),n.set(r.field,i))}return n||null}function Ua(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Jr(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof _a&&t instanceof _a||e instanceof ka&&t instanceof ka?Jr(e.elements,t.elements,Hi):e instanceof Ia&&t instanceof Ia?Hi(e.gt,t.gt):e instanceof ba&&t instanceof ba}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ja extends Pa{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Fa extends Pa{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Va(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Ba(e,t,n){const r=new Map;Mr(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,ya(a,o,n[i]))}return r}function Za(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,va(e,s,t))}return r}class qa extends Pa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class za extends Pa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ha{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ra(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=La(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=La(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=aa();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Na(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(ei.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),la())}isEqual(e){return this.batchId===e.batchId&&Jr(this.mutations,e.mutations,((e,t)=>Ua(e,t)))&&Jr(this.baseMutations,e.baseMutations,((e,t)=>Ua(e,t)))}}class $a{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Mr(e.mutations.length===n.length);let r=ua;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new $a(e,t,n,r)}}class Wa{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ya{constructor(e,t,n){this.alias=e,this.yt=t,this.fieldPath=n}}class Ga{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ka,Qa;function Ja(e){switch(e){default:return Lr();case jr.CANCELLED:case jr.UNKNOWN:case jr.DEADLINE_EXCEEDED:case jr.RESOURCE_EXHAUSTED:case jr.INTERNAL:case jr.UNAVAILABLE:case jr.UNAUTHENTICATED:return!1;case jr.INVALID_ARGUMENT:case jr.NOT_FOUND:case jr.ALREADY_EXISTS:case jr.PERMISSION_DENIED:case jr.FAILED_PRECONDITION:case jr.ABORTED:case jr.OUT_OF_RANGE:case jr.UNIMPLEMENTED:case jr.DATA_LOSS:return!0}}function Xa(e){if(void 0===e)return Pr("GRPC error has no .code"),jr.UNKNOWN;switch(e){case Ka.OK:return jr.OK;case Ka.CANCELLED:return jr.CANCELLED;case Ka.UNKNOWN:return jr.UNKNOWN;case Ka.DEADLINE_EXCEEDED:return jr.DEADLINE_EXCEEDED;case Ka.RESOURCE_EXHAUSTED:return jr.RESOURCE_EXHAUSTED;case Ka.INTERNAL:return jr.INTERNAL;case Ka.UNAVAILABLE:return jr.UNAVAILABLE;case Ka.UNAUTHENTICATED:return jr.UNAUTHENTICATED;case Ka.INVALID_ARGUMENT:return jr.INVALID_ARGUMENT;case Ka.NOT_FOUND:return jr.NOT_FOUND;case Ka.ALREADY_EXISTS:return jr.ALREADY_EXISTS;case Ka.PERMISSION_DENIED:return jr.PERMISSION_DENIED;case Ka.FAILED_PRECONDITION:return jr.FAILED_PRECONDITION;case Ka.ABORTED:return jr.ABORTED;case Ka.OUT_OF_RANGE:return jr.OUT_OF_RANGE;case Ka.UNIMPLEMENTED:return jr.UNIMPLEMENTED;case Ka.DATA_LOSS:return jr.DATA_LOSS;default:return Lr()}}(Qa=Ka||(Ka={}))[Qa.OK=0]="OK",Qa[Qa.CANCELLED=1]="CANCELLED",Qa[Qa.UNKNOWN=2]="UNKNOWN",Qa[Qa.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qa[Qa.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qa[Qa.NOT_FOUND=5]="NOT_FOUND",Qa[Qa.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qa[Qa.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qa[Qa.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qa[Qa.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qa[Qa.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qa[Qa.ABORTED=10]="ABORTED",Qa[Qa.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qa[Qa.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qa[Qa.INTERNAL=13]="INTERNAL",Qa[Qa.UNAVAILABLE=14]="UNAVAILABLE",Qa[Qa.DATA_LOSS=15]="DATA_LOSS";class eo{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return to}static getOrCreateInstance(){return null===to&&(to=new eo),to}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let to=null;function no(){return new TextEncoder}const ro=new Ir([4294967295,4294967295],0);function io(e){const t=no().encode(e),n=new Tr;return n.update(t),new Uint8Array(n.digest())}function so(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ir([n,r],0),new Ir([i,s],0)]}class ao{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new oo(`Invalid padding: ${t}`);if(n<0)throw new oo(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new oo(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new oo(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Ir.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(Ir.fromNumber(n)));return 1===r.compare(ro)&&(r=new Ir([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=io(e),[n,r]=so(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new ao(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.It)return;const t=io(e),[n,r]=so(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class oo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class uo{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,co.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new uo(ei.min(),r,new Ei(Qr),ta(),la())}}class co{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new co(n,t,la(),la(),la())}}class lo{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class ho{constructor(e,t){this.targetId=e,this.Vt=t}}class fo{constructor(e,t,n=Ni.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class po{constructor(){this.St=0,this.Dt=vo(),this.Ct=Ni.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=la(),t=la(),n=la();return this.Dt.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Lr()}})),new co(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=vo()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class go{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ta(),this.zt=mo(),this.Wt=new Ei(Qr)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,(t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:Lr()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach(((e,n)=>{this.te(n)&&t(n)}))}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const s=i.target;if(Rs(s))if(0===r){const e=new si(s.path);this.Yt(n,e,os.newNoDocument(e,ei.min()))}else Mr(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=eo.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,s,a,o,u;const c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(a=null===(s=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===s?void 0:s.length)&&void 0!==a?a:0,padding:null!==(u=null===(o=null==l?void 0:l.bits)||void 0===o?void 0:o.padding)&&void 0!==u?u:0}),c}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=n;let o,u;try{o=Ui(i).toUint8Array()}catch(e){if(e instanceof Pi)return Nr("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{u=new ao(o,s,a)}catch(e){return Nr(e instanceof oo?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===u.It?1:r!==t-this.oe(e.targetId,u)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Gt.ue(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;t.vt(s)||(this.Yt(e,n,null),r++)})),r}ce(e){const t=new Map;this.Qt.forEach(((n,r)=>{const i=this.se(r);if(i){if(n.current&&Rs(i.target)){const t=new si(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,os.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}}));let n=la();this.zt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.jt.forEach(((t,n)=>n.setReadTime(e)));const r=new uo(e,t,this.Wt,this.jt,n);return this.jt=ta(),this.zt=mo(),this.Wt=new Ei(Qr),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new po,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Ai(Qr),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Or("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new po),this.Gt.getRemoteKeysForTarget(e).forEach((t=>{this.Yt(e,t,null)}))}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function mo(){return new Ei(si.comparator)}function vo(){return new Ei(si.comparator)}const yo={asc:"ASCENDING",desc:"DESCENDING"},wo={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bo={and:"AND",or:"OR"};class _o{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function So(e,t){return e.useProto3Json||vi(t)?t:{value:t}}function ko(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function To(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Io(e,t){return ko(e,t.toTimestamp())}function Eo(e){return Mr(!!e),ei.fromTimestamp(function(e){const t=Li(e);return new Xr(t.seconds,t.nanos)}(e))}function Co(e,t){return function(e){return new ni(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function xo(e){const t=ni.fromString(e);return Mr(Yo(t)),t}function Ao(e,t){return Co(e.databaseId,t.path)}function Do(e,t){const n=xo(t);if(n.get(1)!==e.databaseId.projectId)throw new Fr(jr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Fr(jr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new si(Ro(n))}function Oo(e,t){return Co(e.databaseId,t)}function Po(e){const t=xo(e);return 4===t.length?ni.emptyPath():Ro(t)}function No(e){return new ni(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ro(e){return Mr(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Lo(e,t,n){return{name:Ao(e,t),fields:n.value.mapValue.fields}}function Mo(e,t){let n;if(t instanceof ja)n={update:Lo(e,t.key,t.value)};else if(t instanceof qa)n={delete:Ao(e,t.key)};else if(t instanceof Fa)n={update:Lo(e,t.key,t.data),updateMask:Wo(t.fieldMask)};else{if(!(t instanceof za))return Lr();n={verify:Ao(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof ba)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof _a)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ka)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ia)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Lr()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Io(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Lr()}(e,t.precondition)),n}function Uo(e,t){return{documents:[Oo(e,t.path)]}}function jo(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Oo(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Oo(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return $o(gs.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:zo(e.field),direction:Bo(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=So(e,t.limit);var o;return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Fo(e){let t=Po(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Mr(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Vo(e);return t instanceof gs&&vs(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map((e=>function(e){return new ds(Ho(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,vi(t)?null:t}(n.limit));let u=null;n.startAt&&(u=function(e){const t=!!e.before,n=e.values||[];return new us(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new us(n,t)}(n.endAt)),Ms(t,i,a,s,o,"F",u,c)}function Vo(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ho(e.unaryFilter.field);return ps.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Ho(e.unaryFilter.field);return ps.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ho(e.unaryFilter.field);return ps.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ho(e.unaryFilter.field);return ps.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Lr()}}(e):void 0!==e.fieldFilter?function(e){return ps.create(Ho(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Lr()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return gs.create(e.compositeFilter.filters.map((e=>Vo(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Lr()}}(e.compositeFilter.op))}(e):Lr()}function Bo(e){return yo[e]}function Zo(e){return wo[e]}function qo(e){return bo[e]}function zo(e){return{fieldPath:e.canonicalString()}}function Ho(e){return ii.fromServerFormat(e.fieldPath)}function $o(e){return e instanceof ps?function(e){if("=="===e.op){if(ts(e.value))return{unaryFilter:{field:zo(e.field),op:"IS_NAN"}};if(es(e.value))return{unaryFilter:{field:zo(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ts(e.value))return{unaryFilter:{field:zo(e.field),op:"IS_NOT_NAN"}};if(es(e.value))return{unaryFilter:{field:zo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(e.field),op:Zo(e.op),value:e.value}}}(e):e instanceof gs?function(e){const t=e.getFilters().map((e=>$o(e)));return 1===t.length?t[0]:{compositeFilter:{op:qo(e.op),filters:t}}}(e):Lr()}function Wo(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Yo(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Go{constructor(e,t,n,r,i=ei.min(),s=ei.min(),a=Ni.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Go(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Go(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Go(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Go(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ko{constructor(e){this.fe=e}}function Qo(e){const t=Fo({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Hs(t,t.limit,"L"):t}class Jo{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Mi(e.integerValue));else if("doubleValue"in e){const n=Mi(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),yi(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie(`${n.seconds||""}`),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ui(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?is(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Lr()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),si.fromName(e).path.forEach((e=>{this.ye(t,60),this.be(e,t)}))}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}Jo.Ve=new Jo;class Xo{constructor(){this.rn=new eu}addToCollectionParentIndex(e,t){return this.rn.add(t),pi.resolve()}getCollectionParents(e,t){return pi.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return pi.resolve()}deleteFieldIndex(e,t){return pi.resolve()}getDocumentsMatchingTarget(e,t){return pi.resolve(null)}getIndexType(e,t){return pi.resolve(0)}getFieldIndexes(e,t){return pi.resolve([])}getNextCollectionGroupToUpdate(e){return pi.resolve(null)}getMinOffset(e,t){return pi.resolve(ci.min())}getMinOffsetFromCollectionGroup(e,t){return pi.resolve(ci.min())}updateCollectionGroup(e,t,n){return pi.resolve()}updateIndexEntries(e,t){return pi.resolve()}}class eu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ai(ni.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ai(ni.comparator)).toArray()}}new Uint8Array(0);class tu{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new tu(e,tu.DEFAULT_COLLECTION_PERCENTILE,tu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}tu.DEFAULT_COLLECTION_PERCENTILE=10,tu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tu.DEFAULT=new tu(41943040,tu.DEFAULT_COLLECTION_PERCENTILE,tu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tu.DISABLED=new tu(-1,0,0);class nu{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new nu(0)}static Mn(){return new nu(-1)}}class ru{constructor(){this.changes=new Xs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,os.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?pi.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class iu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class su{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&La(n.mutation,e,Oi.empty(),Xr.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,la()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=la()){const r=sa();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=ra();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=sa();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,la())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=ta();const s=oa(),a=oa();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Fa)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),La(a.mutation,t,a.mutation.getFieldMask(),Xr.now())):s.set(t.key,Oi.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new iu(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=oa();let r=new Ei(((e,t)=>e-t)),i=la();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||Oi.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||la()).add(e);r=r.insert(i.batchId,o)}))})).next((()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,u=r.value,c=aa();u.forEach((e=>{if(!i.has(e)){const r=Na(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return pi.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return si.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Bs(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):pi.resolve(sa());let a=-1,o=i;return s.next((t=>pi.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?pi.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,o,t,la()))).next((e=>({batchId:a,changes:ia(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new si(t)).next((e=>{let t=ra();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=ra();return this.indexManager.getCollectionParents(e,r).next((s=>pi.forEach(s,(s=>{const a=function(e,t){return new Ls(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,a,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)))).next((e=>{r.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,os.newInvalidDocument(r)))}));let n=ra();return e.forEach(((e,i)=>{const s=r.get(e);void 0!==s&&La(s.mutation,i,Oi.empty(),Xr.now()),Gs(t,i)&&(n=n.insert(e,i))})),n}))}}class au{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return pi.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Eo(n.createTime)}),pi.resolve()}getNamedQuery(e,t){return pi.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Qo(e.bundledQuery),readTime:Eo(e.readTime)}}(t)),pi.resolve()}}class ou{constructor(){this.overlays=new Ei(si.comparator),this.ls=new Map}getOverlay(e,t){return pi.resolve(this.overlays.get(t))}getOverlays(e,t){const n=sa();return pi.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.we(e,t,r)})),pi.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.ls.delete(n)),pi.resolve()}getOverlaysForCollection(e,t,n){const r=sa(),i=t.length+1,s=new si(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return pi.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ei(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=sa(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=sa(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return pi.resolve(a)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Wa(t,n));let i=this.ls.get(t);void 0===i&&(i=la(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class uu{constructor(){this.fs=new Ai(cu.ds),this.ws=new Ai(cu._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new cu(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ys(new cu(e,t))}ps(e,t){e.forEach((e=>this.removeReference(e,t)))}Is(e){const t=new si(new ni([])),n=new cu(t,e),r=new cu(t,e+1),i=[];return this.ws.forEachInRange([n,r],(e=>{this.ys(e),i.push(e.key)})),i}Ts(){this.fs.forEach((e=>this.ys(e)))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new si(new ni([])),n=new cu(t,e),r=new cu(t,e+1);let i=la();return this.ws.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new cu(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class cu{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return si.comparator(e.key,t.key)||Qr(e.As,t.As)}static _s(e,t){return Qr(e.As,t.As)||si.comparator(e.key,t.key)}}class lu{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Ai(cu.ds)}checkEmpty(e){return pi.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Ha(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Rs=this.Rs.add(new cu(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return pi.resolve(s)}lookupMutationBatch(e,t){return pi.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return pi.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return pi.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return pi.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new cu(t,0),r=new cu(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],(e=>{const t=this.Ps(e.As);i.push(t)})),pi.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ai(Qr);return t.forEach((e=>{const t=new cu(e,0),r=new cu(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],(e=>{n=n.add(e.As)}))})),pi.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;si.isDocumentKey(i)||(i=i.child(""));const s=new cu(new si(i),0);let a=new Ai(Qr);return this.Rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.As)),!0)}),s),pi.resolve(this.Vs(a))}Vs(e){const t=[];return e.forEach((e=>{const n=this.Ps(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Mr(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return pi.forEach(t.mutations,(r=>{const i=new cu(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Rs=n}))}Cn(e){}containsKey(e,t){const n=new cu(t,0),r=this.Rs.firstAfterOrEqual(n);return pi.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,pi.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class du{constructor(e){this.Ds=e,this.docs=new Ei(si.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return pi.resolve(n?n.document.mutableCopy():os.newInvalidDocument(t))}getEntries(e,t){let n=ta();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():os.newInvalidDocument(e))})),pi.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ta();const s=t.path,a=new si(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||li(ui(a),n)<=0||(r.has(a.key)||Gs(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return pi.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Lr()}Cs(e,t){return pi.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new hu(this)}getSize(e){return pi.resolve(this.size)}}class hu extends ru{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)})),pi.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class fu{constructor(e){this.persistence=e,this.xs=new Xs((e=>Ps(e)),Ns),this.lastRemoteSnapshotVersion=ei.min(),this.highestTargetId=0,this.Ns=0,this.ks=new uu,this.targetCount=0,this.Ms=nu.kn()}forEachTarget(e,t){return this.xs.forEach(((e,n)=>t(n))),pi.resolve()}getLastRemoteSnapshotVersion(e){return pi.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pi.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),pi.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),pi.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new nu(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,pi.resolve()}updateTargetData(e,t){return this.Fn(t),pi.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,pi.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach(((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.xs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),pi.waitFor(i).next((()=>r))}getTargetCount(e){return pi.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return pi.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),pi.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),pi.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),pi.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return pi.resolve(n)}containsKey(e,t){return pi.resolve(this.ks.containsKey(t))}}class pu{constructor(e,t){this.$s={},this.overlays={},this.Os=new mi(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new fu(this),this.indexManager=new Xo,this.remoteDocumentCache=function(e){return new du(e)}((e=>this.referenceDelegate.Ls(e))),this.serializer=new Ko(t),this.qs=new au(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ou,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new lu(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){Or("MemoryPersistence","Starting transaction:",e);const r=new gu(this.Os.next());return this.referenceDelegate.Us(),n(r).next((e=>this.referenceDelegate.Ks(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gs(e,t){return pi.or(Object.values(this.$s).map((n=>()=>n.containsKey(e,t))))}}class gu extends hi{constructor(e){super(),this.currentSequenceNumber=e}}class mu{constructor(e){this.persistence=e,this.Qs=new uu,this.js=null}static zs(e){return new mu(e)}get Ws(){if(this.js)return this.js;throw Lr()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),pi.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),pi.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),pi.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach((e=>this.Ws.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ws.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pi.forEach(this.Ws,(n=>{const r=si.fromPath(n);return this.Hs(e,r).next((e=>{e||t.removeEntry(r,ei.min())}))})).next((()=>(this.js=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hs(e,t).next((e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())}))}Ls(e){return 0}Hs(e,t){return pi.or([()=>pi.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class vu{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=la(),r=la();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new vu(e,t.fromCache,n,r)}}class yu{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next((i=>i||this.Gi(e,t,r,n))).next((n=>n||this.Qi(e,t)))}Ki(e,t){if(js(t))return pi.resolve(null);let n=qs(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Hs(t,null,"F"),n=qs(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=la(...r);return this.Ui.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ji(t,r);return this.zi(t,s,i,n.readTime)?this.Ki(e,Hs(t,null,"F")):this.Wi(e,s,t,n)}))))})))))}Gi(e,t,n,r){return js(t)||r.isEqual(ei.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((i=>{const s=this.ji(t,i);return this.zi(t,s,n,r)?this.Qi(e,t):(Dr()<=a.in.DEBUG&&Or("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ys(t)),this.Wi(e,s,t,oi(r,-1)))}))}ji(e,t){let n=new Ai(Qs(e));return t.forEach(((t,r)=>{Gs(e,r)&&(n=n.add(r))})),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return Dr()<=a.in.DEBUG&&Or("QueryEngine","Using full collection scan to execute query:",Ys(t)),this.Ui.getDocumentsMatchingQuery(e,t,ci.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class wu{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Ei(Qr),this.Yi=new Xs((e=>Ps(e)),Ns),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new su(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}function bu(e,t,n,r){return new wu(e,t,n,r)}async function _u(e,t){const n=Ur(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let a=la();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({er:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Su(e){const t=Ur(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Bs.getLastRemoteSnapshotVersion(e)))}function ku(e,t,n){let r=la(),i=la();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=ta();return n.forEach(((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ei.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Or("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),{nr:r,sr:i}}))}function Tu(e,t){const n=Ur(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Iu(e,t){const n=Ur(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Bs.getTargetData(e,t).next((i=>i?(r=i,pi.resolve(r)):n.Bs.allocateTargetId(e).next((i=>(r=new Go(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}async function Eu(e,t,n){const r=Ur(e),i=r.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!gi(e))throw e;Or("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function Cu(e,t,n){const r=Ur(e);let i=ei.min(),s=la();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=Ur(e),i=r.Yi.get(n);return void 0!==i?pi.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,qs(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:ei.min(),n?s:la()))).next((e=>(xu(r,Ks(t),e),{documents:e,ir:s})))))}function xu(e,t,n){let r=e.Xi.get(t)||ei.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}class Au{constructor(){this.activeTargetIds=ha()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Du{constructor(){this.Hr=new Au,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Au,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ou{Yr(e){}shutdown(){}}class Pu{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Or("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Or("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Nu=null;function Ru(){return null===Nu?Nu=268435456+Math.round(2147483648*Math.random()):Nu++,"0x"+Nu.toString(16)}const Lu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Mu{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Uu="WebChannelConnection";class ju extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const s=Ru(),a=this.To(e,t);Or("RestConnection",`Sending RPC '${e}' ${s}:`,a,n);const o={};return this.Eo(o,r,i),this.Ao(e,a,o,n).then((t=>(Or("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw Nr("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t}))}vo(e,t,n,r,i,s){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+xr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}To(e,t){const n=Lu[e];return`${this.mo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=Ru();return new Promise(((s,a)=>{const o=new kr;o.setWithCredentials(!0),o.listenOnce(yr.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case vr.NO_ERROR:const t=o.getResponseJson();Or(Uu,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case vr.TIMEOUT:Or(Uu,`RPC '${e}' ${i} timed out`),a(new Fr(jr.DEADLINE_EXCEEDED,"Request time out"));break;case vr.HTTP_ERROR:const n=o.getStatus();if(Or(Uu,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(jr).indexOf(t)>=0?t:jr.UNKNOWN}(t.status);a(new Fr(e,t.message))}else a(new Fr(jr.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Fr(jr.UNAVAILABLE,"Connection failed."));break;default:Lr()}}finally{Or(Uu,`RPC '${e}' ${i} completed.`)}}));const u=JSON.stringify(r);Or(Uu,`RPC '${e}' ${i} sending request:`,r),o.send(t,"POST",u,n,15)}))}Ro(e,t,n){const r=Ru(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=gr(),a=mr(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(o.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(o.xmlHttpFactory=new _r({})),this.Eo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");Or(Uu,`Creating RPC '${e}' stream ${r}: ${c}`,o);const l=s.createWebChannel(c,o);let d=!1,h=!1;const f=new Mu({ro:t=>{h?Or(Uu,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(Or(Uu,`Opening RPC '${e}' stream ${r} transport.`),l.open(),d=!0),Or(Uu,`RPC '${e}' stream ${r} sending:`,t),l.send(t))},oo:()=>l.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(l,Sr.EventType.OPEN,(()=>{h||Or(Uu,`RPC '${e}' stream ${r} transport opened.`)})),p(l,Sr.EventType.CLOSE,(()=>{h||(h=!0,Or(Uu,`RPC '${e}' stream ${r} transport closed`),f.wo())})),p(l,Sr.EventType.ERROR,(t=>{h||(h=!0,Nr(Uu,`RPC '${e}' stream ${r} transport errored:`,t),f.wo(new Fr(jr.UNAVAILABLE,"The operation could not be completed")))})),p(l,Sr.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];Mr(!!i);const s=i,a=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){Or(Uu,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=Ka[e];if(void 0!==t)return Xa(t)}(t),i=a.message;void 0===n&&(n=jr.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.wo(new Fr(n,i)),l.close()}else Or(Uu,`RPC '${e}' stream ${r} received:`,i),f._o(i)}})),p(a,wr.STAT_EVENT,(t=>{t.stat===br.PROXY?Or(Uu,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===br.NOPROXY&&Or(Uu,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.fo()}),0),f}}function Fu(){return"undefined"!=typeof document?document:null}function Vu(e){return new _o(e,!0)}class Bu{constructor(e,t,n=1e3,r=1.5,i=6e4){this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&Or("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Zu{constructor(e,t,n,r,i,s,a,o){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Bu(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===jr.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===jr.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.Fo===t&&this.Zo(e,n)}),(t=>{e((()=>{const e=new Fr(jr.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)}))}))}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((e=>{n((()=>this.tu(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(e){return Or("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget((()=>this.Fo===e?t():(Or("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qu extends Zu{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Lr()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Mr(void 0===t||"string"==typeof t),Ni.fromBase64String(t||"")):(Mr(void 0===t||t instanceof Uint8Array),Ni.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?jr.UNKNOWN:Xa(e.code);return new Fr(t,e.message||"")}(a);n=new fo(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Do(e,r.document.name),s=Eo(r.document.updateTime),a=r.document.createTime?Eo(r.document.createTime):ei.min(),o=new ss({mapValue:{fields:r.document.fields}}),u=os.newFoundDocument(i,s,a,o),c=r.targetIds||[],l=r.removedTargetIds||[];n=new lo(c,l,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Do(e,r.document),s=r.readTime?Eo(r.readTime):ei.min(),a=os.newNoDocument(i,s),o=r.removedTargetIds||[];n=new lo([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Do(e,r.document),s=r.removedTargetIds||[];n=new lo([],s,i,null)}else{if(!("filter"in t))return Lr();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Ga(r,i),a=e.targetId;n=new ho(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ei.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ei.min():t.readTime?Eo(t.readTime):ei.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=No(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Rs(r)?{documents:Uo(e,r)}:{query:jo(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=To(e,t.resumeToken);const r=So(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ei.min())>0){n.readTime=ko(e,t.snapshotVersion.toTimestamp());const r=So(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Lr()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=No(this.serializer),t.removeTarget=e,this.Wo(t)}}class zu extends Zu{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Mr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(Mr(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Eo(e.updateTime):Eo(t);return n.isEqual(ei.min())&&(n=Eo(t)),new Aa(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Eo(e.commitTime);return this.listener.cu(n,t)}return Mr(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=No(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Mo(this.serializer,e)))};this.Wo(t)}}class Hu extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Fr(jr.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.connection.Io(e,t,n,r,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===jr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Fr(jr.UNKNOWN,e.toString())}))}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.vo(e,t,n,i,s,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===jr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Fr(jr.UNKNOWN,e.toString())}))}terminate(){this.lu=!0}}class $u{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Pr(t),this.mu=!1):Or("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Wu{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr((e=>{n.enqueueAndForget((async()=>{nc(this)&&(Or("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ur(e);t.vu.add(4),await Gu(t),t.bu.set("Unknown"),t.vu.delete(4),await Yu(t)}(this))}))})),this.bu=new $u(n,r)}}async function Yu(e){if(nc(e))for(const t of e.Ru)await t(!0)}async function Gu(e){for(const t of e.Ru)await t(!1)}function Ku(e,t){const n=Ur(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),tc(n)?ec(n):bc(n).Ko()&&Ju(n,t))}function Qu(e,t){const n=Ur(e),r=bc(n);n.Au.delete(t),r.Ko()&&Xu(n,t),0===n.Au.size&&(r.Ko()?r.jo():nc(n)&&n.bu.set("Unknown"))}function Ju(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ei.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}bc(e).su(t)}function Xu(e,t){e.Vu.qt(t),bc(e).iu(t)}function ec(e){e.Vu=new go({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),bc(e).start(),e.bu.gu()}function tc(e){return nc(e)&&!bc(e).Uo()&&e.Au.size>0}function nc(e){return 0===Ur(e).vu.size}function rc(e){e.Vu=void 0}async function ic(e){e.Au.forEach(((t,n)=>{Ju(e,t)}))}async function sc(e,t){rc(e),tc(e)?(e.bu.Iu(t),ec(e)):e.bu.set("Unknown")}async function ac(e,t,n){if(e.bu.set("Online"),t instanceof fo&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){Or("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await oc(e,n)}else if(t instanceof lo?e.Vu.Ht(t):t instanceof ho?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(ei.min()))try{const t=await Su(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(Ni.EMPTY_BYTE_STRING,r.snapshotVersion)),Xu(e,t);const i=new Go(r.target,t,n,r.sequenceNumber);Ju(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Or("RemoteStore","Failed to raise snapshot:",t),await oc(e,t)}}async function oc(e,t,n){if(!gi(t))throw t;e.vu.add(1),await Gu(e),e.bu.set("Offline"),n||(n=()=>Su(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Or("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await Yu(e)}))}function uc(e,t){return t().catch((n=>oc(e,n,t)))}async function cc(e){const t=Ur(e),n=_c(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;lc(t);)try{const e=await Tu(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,dc(t,e)}catch(e){await oc(t,e)}hc(t)&&fc(t)}function lc(e){return nc(e)&&e.Eu.length<10}function dc(e,t){e.Eu.push(t);const n=_c(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function hc(e){return nc(e)&&!_c(e).Uo()&&e.Eu.length>0}function fc(e){_c(e).start()}async function pc(e){_c(e).hu()}async function gc(e){const t=_c(e);for(const n of e.Eu)t.uu(n.mutations)}async function mc(e,t,n){const r=e.Eu.shift(),i=$a.from(r,t,n);await uc(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await cc(e)}async function vc(e,t){t&&_c(e).ou&&await async function(e,t){if(Ja(n=t.code)&&n!==jr.ABORTED){const n=e.Eu.shift();_c(e).Qo(),await uc(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await cc(e)}var n}(e,t),hc(e)&&fc(e)}async function yc(e,t){const n=Ur(e);n.asyncQueue.verifyOperationInProgress(),Or("RemoteStore","RemoteStore received new credentials");const r=nc(n);n.vu.add(3),await Gu(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await Yu(n)}async function wc(e,t){const n=Ur(e);t?(n.vu.delete(2),await Yu(n)):t||(n.vu.add(2),await Gu(n),n.bu.set("Unknown"))}function bc(e){return e.Su||(e.Su=function(e,t,n){const r=Ur(e);return r.fu(),new qu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:ic.bind(null,e),ao:sc.bind(null,e),nu:ac.bind(null,e)}),e.Ru.push((async t=>{t?(e.Su.Qo(),tc(e)?ec(e):e.bu.set("Unknown")):(await e.Su.stop(),rc(e))}))),e.Su}function _c(e){return e.Du||(e.Du=function(e,t,n){const r=Ur(e);return r.fu(),new zu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:pc.bind(null,e),ao:vc.bind(null,e),au:gc.bind(null,e),cu:mc.bind(null,e)}),e.Ru.push((async t=>{t?(e.Du.Qo(),await cc(e)):(await e.Du.stop(),e.Eu.length>0&&(Or("RemoteStore",`Stopping write stream with ${e.Eu.length} pending writes`),e.Eu=[]))}))),e.Du}class Sc{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new Sc(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fr(jr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kc(e,t){if(Pr("AsyncQueue",`${t}: ${e}`),gi(e))return new Fr(jr.UNAVAILABLE,`${t}: ${e}`);throw e}class Tc{constructor(e){this.comparator=e?(t,n)=>e(t,n)||si.comparator(t.key,n.key):(e,t)=>si.comparator(e.key,t.key),this.keyedMap=ra(),this.sortedSet=new Ei(this.comparator)}static emptySet(e){return new Tc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Tc))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Tc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Ic{constructor(){this.Cu=new Ei(si.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Lr():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Ec{constructor(e,t,n,r,i,s,a,o,u){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=u}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Ec(e,t,Tc.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$s(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Cc{constructor(){this.Nu=void 0,this.listeners=[]}}class xc{constructor(){this.queries=new Xs((e=>Ws(e)),$s),this.onlineState="Unknown",this.ku=new Set}}async function Ac(e,t){const n=Ur(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Cc),i)try{s.Nu=await n.onListen(r)}catch(e){const n=kc(e,`Initialization of query '${Ys(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Mu(n.onlineState),s.Nu&&t.$u(s.Nu)&&Nc(n)}async function Dc(e,t){const n=Ur(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Oc(e,t){const n=Ur(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&Nc(n)}function Pc(e,t,n){const r=Ur(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function Nc(e){e.ku.forEach((e=>{e.next()}))}class Rc{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ec(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=Ec.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Lc{constructor(e){this.key=e}}class Mc{constructor(e){this.key=e}}class Uc{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=la(),this.mutatedKeys=la(),this.tc=Qs(e),this.ec=new Tc(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new Ic,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,u="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),l=Gs(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;c&&l?c.data.isEqual(l.data)?d!==h&&(n.track({type:3,doc:l}),f=!0):this.rc(c,l)||(n.track({type:2,doc:l}),f=!0,(o&&this.tc(l,o)>0||u&&this.tc(l,u)<0)&&(a=!0)):!c&&l?(n.track({type:0,doc:l}),f=!0):c&&!l&&(n.track({type:1,doc:c}),f=!0,(o||u)&&(a=!0)),f&&(l?(s=s.add(l),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:s,ic:n,zi:a,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Lr()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc))),this.oc(n);const s=t?this.uc():[],a=0===this.Zu.size&&this.current?1:0,o=a!==this.Xu;return this.Xu=a,0!==i.length||o?{snapshot:new Ec(this.query,e.ec,r,i,e.mutatedKeys,0===a,o,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Ic,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach((e=>this.Yu=this.Yu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Yu=this.Yu.delete(e))),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=la(),this.ec.forEach((e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))}));const t=[];return e.forEach((e=>{this.Zu.has(e)||t.push(new Mc(e))})),this.Zu.forEach((n=>{e.has(n)||t.push(new Lc(n))})),t}hc(e){this.Yu=e.ir,this.Zu=la();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Ec.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class jc{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Fc{constructor(e){this.key=e,this.fc=!1}}class Vc{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new Xs((e=>Ws(e)),$s),this._c=new Map,this.mc=new Set,this.gc=new Ei(si.comparator),this.yc=new Map,this.Ic=new uu,this.Tc={},this.Ec=new Map,this.Ac=nu.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Bc(e,t){const n=sl(e);let r,i;const s=n.wc.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const e=await Iu(n.localStore,qs(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Zc(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&Ku(n.remoteStore,e)}return i}async function Zc(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await Cu(e.localStore,t.query,!1).then((({documents:e})=>t.view.sc(e,i))));const s=r&&r.targetChanges.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s);return Xc(e,t.targetId,a.cc),a.snapshot}(e,t,n,r);const s=await Cu(e.localStore,t,!0),a=new Uc(t,s.ir),o=a.sc(s.documents),u=co.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,u);Xc(e,n,c.cc);const l=new jc(t,n,a);return e.wc.set(t,l),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function qc(e,t){const n=Ur(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter((e=>!$s(e,t)))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Eu(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Qu(n.remoteStore,r.targetId),Qc(n,r.targetId)})).catch(fi)):(Qc(n,r.targetId),await Eu(n.localStore,r.targetId,!0))}async function zc(e,t){const n=Ur(e);try{const e=await function(e,t){const n=Ur(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const a=[];t.targetChanges.forEach(((s,o)=>{const u=i.get(o);if(!u)return;a.push(n.Bs.removeMatchingKeys(e,s.removedDocuments,o).next((()=>n.Bs.addMatchingKeys(e,s.addedDocuments,o))));let c=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Ni.EMPTY_BYTE_STRING,ei.min()).withLastLimboFreeSnapshotVersion(ei.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(u,c,s)&&a.push(n.Bs.updateTargetData(e,c))}));let o=ta(),u=la();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(ku(e,s,t.documentUpdates).next((e=>{o=e.nr,u=e.sr}))),!r.isEqual(ei.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next((t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return pi.waitFor(a).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,u))).next((()=>o))})).then((e=>(n.Ji=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.yc.get(t);r&&(Mr(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?Mr(r.fc):e.removedDocuments.size>0&&(Mr(r.fc),r.fc=!1))})),await nl(n,e,t)}catch(e){await fi(e)}}function Hc(e,t,n){const r=Ur(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach(((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Ur(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)})),r&&Nc(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function $c(e,t,n){const r=Ur(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),s=i&&i.key;if(s){let e=new Ei(si.comparator);e=e.insert(s,os.newNoDocument(s,ei.min()));const n=la().add(s),i=new uo(ei.min(),new Map,new Ei(Qr),e,n);await zc(r,i),r.gc=r.gc.remove(s),r.yc.delete(t),tl(r)}else await Eu(r.localStore,t,!1).then((()=>Qc(r,t,n))).catch(fi)}async function Wc(e,t){const n=Ur(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ur(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=pi.resolve();return s.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Mr(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=la();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Kc(n,r,null),Gc(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await nl(n,e)}catch(e){await fi(e)}}async function Yc(e,t,n){const r=Ur(e);try{const e=await function(e,t){const n=Ur(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Mr(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Kc(r,t,n),Gc(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await nl(r,e)}catch(n){await fi(n)}}function Gc(e,t){(e.Ec.get(t)||[]).forEach((e=>{e.resolve()})),e.Ec.delete(t)}function Kc(e,t,n){const r=Ur(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function Qc(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((t=>{e.Ic.containsKey(t)||Jc(e,t)}))}function Jc(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(Qu(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),tl(e))}function Xc(e,t,n){for(const r of n)r instanceof Lc?(e.Ic.addReference(r.key,t),el(e,r)):r instanceof Mc?(Or("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||Jc(e,r.key)):Lr()}function el(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Or("SyncEngine","New document in limbo: "+n),e.mc.add(r),tl(e))}function tl(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new si(ni.fromString(t)),r=e.Ac.next();e.yc.set(r,new Fc(n)),e.gc=e.gc.insert(n,r),Ku(e.remoteStore,new Go(qs(Us(n.path)),r,"TargetPurposeLimboResolution",mi.ct))}}async function nl(e,t,n){const r=Ur(e),i=[],s=[],a=[];r.wc.isEmpty()||(r.wc.forEach(((e,o)=>{a.push(r.Rc(o,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(o.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=vu.Li(o.targetId,e);s.push(t)}})))})),await Promise.all(a),r.dc.nu(i),await async function(e,t){const n=Ur(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>pi.forEach(t,(t=>pi.forEach(t.Fi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>pi.forEach(t.Bi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!gi(e))throw e;Or("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,s))}async function rl(e,t){const n=Ur(e);if(!n.currentUser.isEqual(t)){Or("SyncEngine","User change. New user:",t.toKey());const e=await _u(n.localStore,t);n.currentUser=t,function(e,t){e.Ec.forEach((e=>{e.forEach((e=>{e.reject(new Fr(jr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await nl(n,e.er)}}function il(e,t){const n=Ur(e),r=n.yc.get(t);if(r&&r.fc)return la().add(r.key);{let e=la();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function sl(e){const t=Ur(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=zc.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=il.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=$c.bind(null,t),t.dc.nu=Oc.bind(null,t.eventManager),t.dc.Pc=Pc.bind(null,t.eventManager),t}function al(e){const t=Ur(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Wc.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Yc.bind(null,t),t}class ol{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Vu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return bu(this.persistence,new yu,e.initialUser,this.serializer)}createPersistence(e){return new pu(mu.zs,this.serializer)}createSharedClientState(e){return new Du}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ul{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Hc(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=rl.bind(null,this.syncEngine),await wc(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new xc}createDatastore(e){const t=Vu(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new ju(r));var r;return function(e,t,n,r){return new Hu(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Hc(this.syncEngine,e,0),s=Pu.D()?new Pu:new Ou,new Wu(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new Vc(e,t,n,r,i,s);return a&&(o.vc=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Ur(e);Or("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await Gu(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class cl{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class ll{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Cr.UNAUTHENTICATED,this.clientId=Kr.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Or("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Or("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fr(jr.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=kc(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function dl(e,t){e.asyncQueue.verifyOperationInProgress(),Or("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await _u(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function hl(e,t){e.asyncQueue.verifyOperationInProgress();const n=await pl(e);Or("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>yc(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>yc(t.remoteStore,n))),e._onlineComponents=t}function fl(e){return"FirebaseError"===e.name?e.code===jr.FAILED_PRECONDITION||e.code===jr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function pl(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Or("FirestoreClient","Using user provided OfflineComponentProvider");try{await dl(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!fl(n))throw n;Nr("Error using user provided cache. Falling back to memory cache: "+n),await dl(e,new ol)}}else Or("FirestoreClient","Using default OfflineComponentProvider"),await dl(e,new ol);return e._offlineComponents}async function gl(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Or("FirestoreClient","Using user provided OnlineComponentProvider"),await hl(e,e._uninitializedComponentsProvider._online)):(Or("FirestoreClient","Using default OnlineComponentProvider"),await hl(e,new ul))),e._onlineComponents}function ml(e){return gl(e).then((e=>e.syncEngine))}function vl(e){return gl(e).then((e=>e.datastore))}async function yl(e){const t=await gl(e),n=t.eventManager;return n.onListen=Bc.bind(null,t.syncEngine),n.onUnlisten=qc.bind(null,t.syncEngine),n}function wl(e,t,n={}){const r=new Vr;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new cl({next:s=>{t.enqueueAndForget((()=>Dc(e,a)));const o=s.docs.has(n);!o&&s.fromCache?i.reject(new Fr(jr.UNAVAILABLE,"Failed to get document because the client is offline.")):o&&s.fromCache&&r&&"server"===r.source?i.reject(new Fr(jr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),a=new Rc(Us(n.path),s,{includeMetadataChanges:!0,Ku:!0});return Ac(e,a)}(await yl(e),e.asyncQueue,t,n,r))),r.promise}function bl(e,t,n={}){const r=new Vr;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new cl({next:n=>{t.enqueueAndForget((()=>Dc(e,a))),n.fromCache&&"server"===r.source?i.reject(new Fr(jr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new Rc(n,s,{includeMetadataChanges:!0,Ku:!0});return Ac(e,a)}(await yl(e),e.asyncQueue,t,n,r))),r.promise}function _l(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Sl=new Map;function kl(e,t,n){if(!n)throw new Fr(jr.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Tl(e){if(!si.isDocumentKey(e))throw new Fr(jr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Il(e){if(si.isDocumentKey(e))throw new Fr(jr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function El(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Lr()}function Cl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Fr(jr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=El(e);throw new Fr(jr.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function xl(e,t){if(t<=0)throw new Fr(jr.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class Al{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Fr(jr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fr(jr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Fr(jr.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_l(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Fr(jr.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Fr(jr.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Fr(jr.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Dl{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Al({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Fr(jr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fr(jr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Al(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Zr;switch(e.type){case"firstParty":return new $r(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Fr(jr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Sl.get(e);t&&(Or("ComponentProvider","Removing Datastore"),Sl.delete(e),t.terminate())}(this),Promise.resolve()}}class Ol{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ol(this.firestore,e,this._key)}}class Pl{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Pl(this.firestore,e,this._query)}}class Nl extends Pl{constructor(e,t,n){super(e,t,Us(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ol(this.firestore,null,new si(e))}withConverter(e){return new Nl(this.firestore,e,this._path)}}function Rl(e,t,...n){if(e=(0,o.m9)(e),kl("collection","path",t),e instanceof Dl){const r=ni.fromString(t,...n);return Il(r),new Nl(e,null,r)}{if(!(e instanceof Ol||e instanceof Nl))throw new Fr(jr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ni.fromString(t,...n));return Il(r),new Nl(e.firestore,null,r)}}function Ll(e,t,...n){if(e=(0,o.m9)(e),1===arguments.length&&(t=Kr.A()),kl("doc","path",t),e instanceof Dl){const r=ni.fromString(t,...n);return Tl(r),new Ol(e,null,new si(r))}{if(!(e instanceof Ol||e instanceof Nl))throw new Fr(jr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ni.fromString(t,...n));return Tl(r),new Ol(e.firestore,e instanceof Nl?e.converter:null,new si(r))}}class Ml{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Bu(this,"async_queue_retry"),this.Xc=()=>{const e=Fu();e&&Or("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=Fu();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Fu();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const t=new Vr;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!gi(e))throw e;Or("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const t=this.Gc.then((()=>(this.Hc=!0,e().catch((e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Pr("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Hc=!1,e))))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=Sc.createAndSchedule(this,e,t,n,(e=>this.na(e)));return this.zc.push(r),r}Zc(){this.Wc&&Lr()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Ul(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class jl extends Dl{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Ml,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Bl(this),this._firestoreClient.terminate()}}function Fl(e,t){const n="object"==typeof e?e:(0,i.Mq)(),r="string"==typeof e?e:t||"(default)",s=(0,i.qX)(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(0,o.P0)("firestore");e&&function(e,t,n,r={}){var i;const s=(e=Cl(e,Dl))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&Nr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Cr.MOCK_USER;else{t=(0,o.Sg)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Fr(jr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Cr(s)}e._authCredentials=new qr(new Br(t,n))}}(s,...e)}return s}function Vl(e){return e._firestoreClient||Bl(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Bl(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Bi(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,_l(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new ll(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class Zl{constructor(e="count",t){this._aggregateType=e,this._internalFieldPath=t,this.type="AggregateField"}}class ql{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class zl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zl(Ni.fromBase64String(e))}catch(e){throw new Fr(jr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new zl(Ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Hl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Fr(jr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ii(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function $l(){return new Hl("__name__")}class Wl{constructor(e){this._methodName=e}}class Yl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fr(jr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fr(jr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qr(this._lat,e._lat)||Qr(this._long,e._long)}}const Gl=/^__.*__$/;class Kl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Fa(e,this.data,this.fieldMask,t,this.fieldTransforms):new ja(e,this.data,t,this.fieldTransforms)}}class Ql{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Fa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Jl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Lr()}}class Xl{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Xl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return md(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Jl(this.ca)&&Gl.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class ed{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Vu(e)}ya(e,t,n,r=!1){return new Xl({ca:e,methodName:t,ga:n,path:ii.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function td(e){const t=e._freezeSettings(),n=Vu(e._databaseId);return new ed(e._databaseId,!!t.ignoreUndefinedProperties,n)}function nd(e,t,n,r,i,s={}){const a=e.ya(s.merge||s.mergeFields?2:0,t,n,i);hd("Data must be an object, but it was:",a,r);const o=ld(r,a);let u,c;if(s.merge)u=new Oi(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=fd(t,r,n);if(!a.contains(i))throw new Fr(jr.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);vd(e,i)||e.push(i)}u=new Oi(e),c=a.fieldTransforms.filter((e=>u.covers(e.field)))}else u=null,c=a.fieldTransforms;return new Kl(new ss(o),u,c)}class rd extends Wl{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rd}}class id extends Wl{_toFieldTransform(e){return new xa(e.path,new ba)}isEqual(e){return e instanceof id}}class sd extends Wl{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Ia(e.serializer,ga(e.serializer,this.Ia));return new xa(e.path,t)}isEqual(e){return this===e}}function ad(e,t,n,r){const i=e.ya(1,t,n);hd("Data must be an object, but it was:",i,r);const s=[],a=ss.empty();Ti(r,((e,r)=>{const u=gd(t,e,n);r=(0,o.m9)(r);const c=i.da(u);if(r instanceof rd)s.push(u);else{const e=cd(r,c);null!=e&&(s.push(u),a.set(u,e))}}));const u=new Oi(s);return new Ql(a,u,i.fieldTransforms)}function od(e,t,n,r,i,s){const a=e.ya(1,t,n),u=[fd(t,r,n)],c=[i];if(s.length%2!=0)throw new Fr(jr.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let o=0;o<s.length;o+=2)u.push(fd(t,s[o])),c.push(s[o+1]);const l=[],d=ss.empty();for(let f=u.length-1;f>=0;--f)if(!vd(l,u[f])){const e=u[f];let t=c[f];t=(0,o.m9)(t);const n=a.da(e);if(t instanceof rd)l.push(e);else{const r=cd(t,n);null!=r&&(l.push(e),d.set(e,r))}}const h=new Oi(l);return new Ql(d,h,a.fieldTransforms)}function ud(e,t,n,r=!1){return cd(n,e.ya(r?4:3,t))}function cd(e,t){if(dd(e=(0,o.m9)(e)))return hd("Unsupported field value:",t,e),ld(e,t);if(e instanceof Wl)return function(e,t){if(!Jl(t.ca))throw t._a(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t._a(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=cd(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,o.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ga(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Xr.fromDate(e);return{timestampValue:ko(t.serializer,n)}}if(e instanceof Xr){const n=new Xr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ko(t.serializer,n)}}if(e instanceof Yl)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof zl)return{bytesValue:To(t.serializer,e._byteString)};if(e instanceof Ol){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Co(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a(`Unsupported field value: ${El(e)}`)}(e,t)}function ld(e,t){const n={};return Ii(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ti(e,((e,r)=>{const i=cd(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function dd(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Xr||e instanceof Yl||e instanceof zl||e instanceof Ol||e instanceof Wl)}function hd(e,t,n){if(!dd(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=El(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function fd(e,t,n){if((t=(0,o.m9)(t))instanceof Hl)return t._internalPath;if("string"==typeof t)return gd(e,t);throw md("Field path arguments must be of type string or ",e,!1,void 0,n)}const pd=new RegExp("[~\\*/\\[\\]]");function gd(e,t,n){if(t.search(pd)>=0)throw md(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Hl(...t.split("."))._internalPath}catch(r){throw md(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function md(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new Fr(jr.INVALID_ARGUMENT,o+e+u)}function vd(e,t){return e.some((e=>e.isEqual(t)))}class yd{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ol(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new wd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class wd extends yd{data(){return super.data()}}function bd(e,t){return"string"==typeof t?gd(e,t):t instanceof Hl?t._internalPath:t._delegate._internalPath}function _d(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Fr(jr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sd{}class kd extends Sd{}function Td(e,t,...n){let r=[];t instanceof Sd&&r.push(t),r=r.concat(n),function(e){const t=e.filter((e=>e instanceof Cd)).length,n=e.filter((e=>e instanceof Id)).length;if(t>1||t>0&&n>0)throw new Fr(jr.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class Id extends kd{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Id(e,t,n)}_apply(e){const t=this._parse(e);return Rd(e._query,t),new Pl(e.firestore,e.converter,zs(e._query,t))}_parse(e){const t=td(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Fr(jr.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Nd(a,s);const t=[];for(const n of a)t.push(Pd(r,e,n));o={arrayValue:{values:t}}}else o=Pd(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Nd(a,s),o=ud(n,"where",a,"in"===s||"not-in"===s);return ps.create(i,s,o)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Ed(e,t,n){const r=t,i=bd("where",e);return Id._create(i,r,n)}class Cd extends Sd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Cd(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:gs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Rd(n,i),n=zs(n,i)}(e._query,t),new Pl(e.firestore,e.converter,zs(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class xd extends kd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xd(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Fr(jr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Fr(jr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new ds(t,n);return function(e,t){if(null===Fs(e)){const n=Vs(e);null!==n&&Ld(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Pl(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ls(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Ad(e,t="asc"){const n=t,r=bd("orderBy",e);return xd._create(r,n)}class Dd extends kd{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Dd(e,t,n)}_apply(e){return new Pl(e.firestore,e.converter,Hs(e._query,this._limit,this._limitType))}}function Od(e){return xl("limit",e),Dd._create("limit",e,"F")}function Pd(e,t,n){if("string"==typeof(n=(0,o.m9)(n))){if(""===n)throw new Fr(jr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bs(t)&&-1!==n.indexOf("/"))throw new Fr(jr.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ni.fromString(n));if(!si.isDocumentKey(r))throw new Fr(jr.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qi(e,new si(r))}if(n instanceof Ol)return Qi(e,n._key);throw new Fr(jr.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${El(n)}.`)}function Nd(e,t){if(!Array.isArray(e)||0===e.length)throw new Fr(jr.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Rd(e,t){if(t.isInequality()){const n=Vs(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Fr(jr.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${r.toString()}'`);const i=Fs(e);null!==i&&Ld(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Fr(jr.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Fr(jr.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function Ld(e,t,n){if(!n.isEqual(t))throw new Fr(jr.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Md{convertValue(e,t="none"){switch(zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Lr()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Ti(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Yl(Mi(e.latitude),Mi(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Fi(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Vi(e));default:return null}}convertTimestamp(e){const t=Li(e);return new Xr(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ni.fromString(e);Mr(Yo(n));const r=new Zi(n.get(1),n.get(3)),i=new si(n.popFirst(5));return r.isEqual(t)||Pr(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function Ud(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class jd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fd extends yd{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(bd("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Vd extends Fd{data(e={}){return super.data(e)}}class Bd{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new jd(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Vd(this._firestore,this._userDataWriter,n.key,n,new jd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fr(jr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Vd(e._firestore,e._userDataWriter,n.doc.key,n.doc,new jd(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Vd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new jd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Zd(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Zd(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Lr()}}function qd(e){e=Cl(e,Ol);const t=Cl(e.firestore,jl);return wl(Vl(t),e._key).then((n=>Kd(t,e,n)))}class zd extends Md{constructor(e){super(),this.firestore=e}convertBytes(e){return new zl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ol(this.firestore,null,t)}}function Hd(e){e=Cl(e,Pl);const t=Cl(e.firestore,jl),n=Vl(t),r=new zd(t);return _d(e._query),bl(n,e._query).then((n=>new Bd(t,r,e,n)))}function $d(e,t,n){e=Cl(e,Ol);const r=Cl(e.firestore,jl),i=Ud(e.converter,t,n);return Gd(r,[nd(td(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Da.none())])}function Wd(e,t,n,...r){e=Cl(e,Ol);const i=Cl(e.firestore,jl),s=td(i);let a;return a="string"==typeof(t=(0,o.m9)(t))||t instanceof Hl?od(s,"updateDoc",e._key,t,n,r):ad(s,"updateDoc",e._key,t),Gd(i,[a.toMutation(e._key,Da.exists(!0))])}function Yd(e,...t){var n,r,i;e=(0,o.m9)(e);let s={includeMetadataChanges:!1},a=0;"object"!=typeof t[a]||Ul(t[a])||(s=t[a],a++);const u={includeMetadataChanges:s.includeMetadataChanges};if(Ul(t[a])){const e=t[a];t[a]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[a+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[a+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let c,l,d;if(e instanceof Ol)l=Cl(e.firestore,jl),d=Us(e._key.path),c={next:n=>{t[a]&&t[a](Kd(l,e,n))},error:t[a+1],complete:t[a+2]};else{const n=Cl(e,Pl);l=Cl(n.firestore,jl),d=n._query;const r=new zd(l);c={next:e=>{t[a]&&t[a](new Bd(l,r,n,e))},error:t[a+1],complete:t[a+2]},_d(e._query)}return function(e,t,n,r){const i=new cl(r),s=new Rc(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Ac(await yl(e),s))),()=>{i.Dc(),e.asyncQueue.enqueueAndForget((async()=>Dc(await yl(e),s)))}}(Vl(l),d,u,c)}function Gd(e,t){return function(e,t){const n=new Vr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=al(e);try{const e=await function(e,t){const n=Ur(e),r=Xr.now(),i=t.reduce(((e,t)=>e.add(t.key)),la());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=ta(),u=la();return n.Zi.getEntries(e,i).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(u=u.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((i=>{s=i;const a=[];for(const e of t){const t=Ma(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Fa(e.key,t,as(t.value.mapValue),Da.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(s,u);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:ia(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new Ei(Qr)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await nl(r,e.changes),await cc(r.remoteStore)}catch(e){const t=kc(e,"Failed to persist write");n.reject(t)}}(await ml(e),t,n))),n.promise}(Vl(e),t)}function Kd(e,t,n){const r=n.docs.get(t._key),i=new zd(e);return new Fd(e,i,t._key,r,new jd(n.hasPendingWrites,n.fromCache),t.converter)}function Qd(e){return function(e,t){const n=Cl(e.firestore,jl),r=Vl(n),i=function(e,t){const n=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(t(e[r],r,e));return n}(t,((e,t)=>new Ya(t,e._aggregateType,e._internalFieldPath)));return function(e,t,n){const r=new Vr;return e.asyncQueue.enqueueAndForget((async()=>{try{const i=await vl(e);r.resolve(async function(e,t,n){var r;const i=Ur(e),{request:s,du:a}=function(e,t,n){const r=jo(e,t),i={},s=[];let a=0;return n.forEach((e=>{const t="aggregate_"+a++;i[t]=e.alias,"count"===e.yt?s.push({alias:t,count:{}}):"avg"===e.yt?s.push({alias:t,avg:{field:zo(e.fieldPath)}}):"sum"===e.yt&&s.push({alias:t,sum:{field:zo(e.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:s,structuredQuery:r.structuredQuery},parent:r.parent},du:i}}(i.serializer,qs(t),n),o=s.parent;i.connection.po||delete s.parent;const u=(await i.vo("RunAggregationQuery",o,s,1)).filter((e=>!!e.result));Mr(1===u.length);const c=null===(r=u[0].result)||void 0===r?void 0:r.aggregateFields;return Object.keys(c).reduce(((e,t)=>(e[a[t]]=c[t],e)),{})}(i,t,n))}catch(e){r.reject(e)}})),r.promise}(r,e._query,i).then((t=>function(e,t,n){const r=new zd(e);return new ql(t,r,n)}(n,e,t)))}(e,{count:new Zl("count")})}function Jd(){return new rd("deleteField")}function Xd(){return new id("serverTimestamp")}function eh(e){return new sd("increment",e)}!function(e,t=!0){!function(e){xr=e}(i.Jn),(0,i.Xd)(new s.wA("firestore",((e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new jl(new zr(e.getProvider("auth-internal")),new Yr(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Fr(jr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zi(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),(0,i.KN)(Er,"3.13.0",e),(0,i.KN)(Er,"3.13.0","esm2017")}()},74444:function(e,t,n){"use strict";n.d(t,{BH:function(){return g},LL:function(){return C},ZR:function(){return E},zI:function(){return I},tV:function(){return u},L:function(){return o},$s:function(){return j},Sg:function(){return m},ne:function(){return L},vZ:function(){return D},pd:function(){return R},aH:function(){return f},q4:function(){return d},P0:function(){return h},Pz:function(){return p},m9:function(){return F},z$:function(){return v},ru:function(){return b},xb:function(){return A},w1:function(){return S},hl:function(){return k},uI:function(){return y},UG:function(){return w},b$:function(){return _},xO:function(){return P},zd:function(){return N},eu:function(){return T}});var r=n(83454);const i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,u=o?e[i+2]:0,c=t>>2,l=(3&t)<<4|a>>4;let d=(15&a)<<2|u>>6,h=63&u;o||(h=64,s||(d=64)),r.push(n[c],n[l],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const u=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==u)throw new a;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==u){const e=o<<6&192|u;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(e){return function(e){const t=i(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},u=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const c=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,l=()=>{try{return c()||(()=>{if("undefined"===typeof r||"undefined"===typeof r.env)return;const e=r.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&u(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},d=e=>{var t,n;return null===(n=null===(t=l())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},h=e=>{const t=d(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},f=()=>{var e;return null===(e=l())||void 0===e?void 0:e.config},p=e=>{var t;return null===(t=l())||void 0===t?void 0:t[`_${e}`]};class g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function m(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(s)),""].join(".")}function v(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function y(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(v())}function w(){var e;const t=null===(e=l())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function b(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function _(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function S(){const e=v();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function k(){try{return"object"===typeof indexedDB}catch(e){return!1}}function T(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}function I(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class E extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,E.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,C.prototype.create)}}class C{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(x,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",a=`${this.serviceName}: ${s} (${r}).`;return new E(r,a,n)}}const x=/\{\$([^}]+)}/g;function A(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function D(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(O(n)&&O(s)){if(!D(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function O(e){return null!==e&&"object"===typeof e}function P(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function N(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function R(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function L(e,t){const n=new M(e,t);return n.subscribe.bind(n)}class M{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=U),void 0===r.error&&(r.error=U),void 0===r.complete&&(r.complete=U);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function U(){}function j(e,t=1e3,n=2){const r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function F(e){return e&&e._delegate?e._delegate:e}},77236:function(e,t,n){"use strict";function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function i(e){return!!e&&!!e[W]}function s(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Y}(e)||Array.isArray(e)||!!e[$]||!!(null===(t=e.constructor)||void 0===t?void 0:t[$])||h(e)||f(e))}function a(e,t,n){void 0===n&&(n=!1),0===o(e)?(n?Object.keys:G)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function o(e){var t=e[W];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:h(e)?2:f(e)?3:0}function u(e,t){return 2===o(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){return 2===o(e)?e.get(t):e[t]}function l(e,t,n){var r=o(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function d(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function h(e){return Z&&e instanceof Map}function f(e){return q&&e instanceof Set}function p(e){return e.o||e.t}function g(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=K(e);delete t[W];for(var n=G(t),r=0;r<n.length;r++){var i=n[r],s=t[i];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function m(e,t){return void 0===t&&(t=!1),y(e)||i(e)||!s(e)||(o(e)>1&&(e.set=e.add=e.clear=e.delete=v),Object.freeze(e),t&&a(e,(function(e,t){return m(t,!0)}),!0)),e}function v(){r(2)}function y(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function w(e){var t=Q[e];return t||r(18,e),t}function b(e,t){Q[e]||(Q[e]=t)}function _(){return V}function S(e,t){t&&(w("Patches"),e.u=[],e.s=[],e.v=t)}function k(e){T(e),e.p.forEach(E),e.p=null}function T(e){e===V&&(V=e.l)}function I(e){return V={p:[],l:V,h:e,m:!0,_:0}}function E(e){var t=e[W];0===t.i||1===t.i?t.j():t.g=!0}function C(e,t){t._=t.p.length;var n=t.p[0],i=void 0!==e&&e!==n;return t.h.O||w("ES5").S(t,e,i),i?(n[W].P&&(k(t),r(4)),s(e)&&(e=x(t,e),t.l||D(t,e)),t.u&&w("Patches").M(n[W].t,e,t.u,t.s)):e=x(t,n,[]),k(t),t.u&&t.v(t.u,t.s),e!==H?e:void 0}function x(e,t,n){if(y(t))return t;var r=t[W];if(!r)return a(t,(function(i,s){return A(e,r,t,i,s,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return D(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=g(r.k):r.o,s=i,o=!1;3===r.i&&(s=new Set(i),i.clear(),o=!0),a(s,(function(t,s){return A(e,r,i,t,s,n,o)})),D(e,i,!1),n&&e.u&&w("Patches").N(r,n,e.u,e.s)}return r.o}function A(e,t,n,r,a,o,c){if(i(a)){var d=x(e,a,o&&t&&3!==t.i&&!u(t.R,r)?o.concat(r):void 0);if(l(n,r,d),!i(d))return;e.m=!1}else c&&n.add(a);if(s(a)&&!y(a)){if(!e.h.D&&e._<1)return;x(e,a),t&&t.A.l||D(e,a)}}function D(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&m(t,n)}function O(e,t){var n=e[W];return(n?p(n):e)[t]}function P(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function N(e){e.P||(e.P=!0,e.l&&N(e.l))}function R(e){e.o||(e.o=g(e.t))}function L(e,t,n){var r=h(t)?w("MapSet").F(t,n):f(t)?w("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:_(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,s=J;n&&(i=[r],s=X);var a=Proxy.revocable(i,s),o=a.revoke,u=a.proxy;return r.k=u,r.j=o,u}(t,n):w("ES5").J(t,n);return(n?n.A:_()).p.push(r),r}function M(e){return i(e)||r(22,e),function e(t){if(!s(t))return t;var n,r=t[W],i=o(t);if(r){if(!r.P&&(r.i<4||!w("ES5").K(r)))return r.t;r.I=!0,n=U(t,i),r.I=!1}else n=U(t,i);return a(n,(function(t,i){r&&c(r.t,t)===i||l(n,t,e(i))})),3===i?new Set(n):n}(e)}function U(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return g(e)}function j(){function e(e,t){var n=s[e];return n?n.enumerable=t:s[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[W];return J.get(t,e)},set:function(t){var n=this[W];J.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][W];if(!i.P)switch(i.i){case 5:r(i)&&N(i);break;case 4:n(i)&&N(i)}}}function n(e){for(var t=e.t,n=e.k,r=G(n),i=r.length-1;i>=0;i--){var s=r[i];if(s!==W){var a=t[s];if(void 0===a&&!u(t,s))return!0;var o=n[s],c=o&&o[W];if(c?c.t!==a:!d(o,a))return!0}}var l=!!t[W];return r.length!==G(t).length+(l?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var s={};b("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var s=K(n);delete s[W];for(var a=G(s),o=0;o<a.length;o++){var u=a[o];s[u]=e(u,t||!!s[u].enumerable)}return Object.create(Object.getPrototypeOf(n),s)}(r,t),s={i:r?5:4,A:n?n.A:_(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,W,{value:s,writable:!0}),i},S:function(e,n,s){s?i(n)&&n[W].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[W];if(n){var i=n.t,s=n.k,o=n.R,c=n.i;if(4===c)a(s,(function(t){t!==W&&(void 0!==i[t]||u(i,t)?o[t]||e(s[t]):(o[t]=!0,N(n)))})),a(i,(function(e){void 0!==s[e]||u(s,e)||(o[e]=!1,N(n))}));else if(5===c){if(r(n)&&(N(n),o.length=!0),s.length<i.length)for(var l=s.length;l<i.length;l++)o[l]=!1;else for(var d=i.length;d<s.length;d++)o[d]=!0;for(var h=Math.min(s.length,i.length),f=0;f<h;f++)s.hasOwnProperty(f)||(o[f]=!0),void 0===o[f]&&e(s[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}n.d(t,{xC:function(){return xe},hg:function(){return Me},oM:function(){return De}});var F,V,B="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Z="undefined"!=typeof Map,q="undefined"!=typeof Set,z="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,H=B?Symbol.for("immer-nothing"):((F={})["immer-nothing"]=!0,F),$=B?Symbol.for("immer-draftable"):"__$immer_draftable",W=B?Symbol.for("immer-state"):"__$immer_state",Y=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),G="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,K=Object.getOwnPropertyDescriptors||function(e){var t={};return G(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},Q={},J={get:function(e,t){if(t===W)return e;var n=p(e);if(!u(n,t))return function(e,t,n){var r,i=P(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!s(r)?r:r===O(e.t,t)?(R(e),e.o[t]=L(e.A.h,r,e)):r},has:function(e,t){return t in p(e)},ownKeys:function(e){return Reflect.ownKeys(p(e))},set:function(e,t,n){var r=P(p(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=O(p(e),t),s=null==i?void 0:i[W];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(d(n,i)&&(void 0!==n||u(e.t,t)))return!0;R(e),N(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==O(e.t,t)||t in e.t?(e.R[t]=!1,R(e),N(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=p(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){r(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){r(12)}},X={};a(J,(function(e,t){X[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),X.deleteProperty=function(e,t){return X.set.call(this,e,t,void 0)},X.set=function(e,t,n){return J.set.call(this,e[0],t,n,e[0])};var ee=function(){function e(e){var t=this;this.O=z,this.D=!0,this.produce=function(e,n,i){if("function"==typeof e&&"function"!=typeof n){var a=n;n=e;var o=t;return function(e){var t=this;void 0===e&&(e=a);for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return o.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(i))}))}}var u;if("function"!=typeof n&&r(6),void 0!==i&&"function"!=typeof i&&r(7),s(e)){var c=I(t),l=L(t,e,void 0),d=!0;try{u=n(l),d=!1}finally{d?k(c):T(c)}return"undefined"!=typeof Promise&&u instanceof Promise?u.then((function(e){return S(c,i),C(e,c)}),(function(e){throw k(c),e})):(S(c,i),C(u,c))}if(!e||"object"!=typeof e){if(void 0===(u=n(e))&&(u=e),u===H&&(u=void 0),t.D&&m(u,!0),i){var h=[],f=[];w("Patches").M(e,u,h,f),i(h,f)}return u}r(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,s=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return[e,r,i]})):[s,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){s(e)||r(8),i(e)&&(e=M(e));var t=I(this),n=L(this,e,void 0);return n[W].C=!0,T(t),n},t.finishDraft=function(e,t){var n=(e&&e[W]).A;return S(n,t),C(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!z&&r(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var s=w("Patches").$;return i(e)?s(e,t):this.produce(e,(function(e){return s(e,t)}))},e}(),te=new ee,ne=te.produce,re=(te.produceWithPatches.bind(te),te.setAutoFreeze.bind(te),te.setUseProxies.bind(te),te.applyPatches.bind(te),te.createDraft.bind(te),te.finishDraft.bind(te),ne),ie=n(89569);function se(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var ae=se();ae.withExtraArgument=se;var oe=ae,ue=(n(83454),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),ce=function(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(o){s=[6,o],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},le=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},de=Object.defineProperty,he=Object.defineProperties,fe=Object.getOwnPropertyDescriptors,pe=Object.getOwnPropertySymbols,ge=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable,ve=function(e,t,n){return t in e?de(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ye=function(e,t){for(var n in t||(t={}))ge.call(t,n)&&ve(e,n,t[n]);if(pe)for(var r=0,i=pe(t);r<i.length;r++){n=i[r];me.call(t,n)&&ve(e,n,t[n])}return e},we=function(e,t){return he(e,fe(t))},be=function(e,t,n){return new Promise((function(r,i){var s=function(e){try{o(n.next(e))}catch(t){i(t)}},a=function(e){try{o(n.throw(e))}catch(t){i(t)}},o=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(s,a)};o((n=n.apply(e,t)).next())}))},_e="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?ie.qC:ie.qC.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Se(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}function ke(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return ye(ye({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}var Te=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return ue(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,le([void 0],e[0].concat(this)))):new(t.bind.apply(t,le([void 0],e.concat(this))))},t}(Array),Ie=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return ue(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,le([void 0],e[0].concat(this)))):new(t.bind.apply(t,le([void 0],e.concat(this))))},t}(Array);function Ee(e){return s(e)?re(e,(function(){})):e}function Ce(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,e.actionCreatorCheck,new Te);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(oe.withExtraArgument(n.extraArgument)):r.push(oe));0;return r}(e)}}function xe(e){var t,n=Ce(),r=e||{},i=r.reducer,s=void 0===i?void 0:i,a=r.middleware,o=void 0===a?n():a,u=r.devTools,c=void 0===u||u,l=r.preloadedState,d=void 0===l?void 0:l,h=r.enhancers,f=void 0===h?void 0:h;if("function"===typeof s)t=s;else{if(!Se(s))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=(0,ie.UY)(s)}var p=o;"function"===typeof p&&(p=p(n));var g=ie.md.apply(void 0,p),m=ie.qC;c&&(m=_e(ye({trace:!1},"object"===typeof c&&c)));var v=new Ie(g),y=v;Array.isArray(f)?y=le([g],f):"function"===typeof f&&(y=f(v));var w=m.apply(void 0,y);return(0,ie.MT)(t,d,w)}function Ae(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(!r)throw new Error("`builder.addCase` cannot be called with an empty action type");if(r in n)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function De(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:Ee(e.initialState),a=e.reducers||{},o=Object.keys(a),u={},c={},l={};function d(){var t="function"===typeof e.extraReducers?Ae(e.extraReducers):[e.extraReducers],n=t[0],a=void 0===n?{}:n,o=t[1],u=void 0===o?[]:o,l=t[2],d=void 0===l?void 0:l,h=ye(ye({},a),c);return function(e,t,n,r){void 0===n&&(n=[]);var a,o="function"===typeof t?Ae(t):[t,n,r],u=o[0],c=o[1],l=o[2];if(function(e){return"function"===typeof e}(e))a=function(){return Ee(e())};else{var d=Ee(e);a=function(){return d}}function h(e,t){void 0===e&&(e=a());var n=le([u[t.type]],c.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[l]),n.reduce((function(e,n){if(n){var r;if(i(e))return void 0===(r=n(e,t))?e:r;if(s(e))return re(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return h.getInitialState=a,h}(r,(function(e){for(var t in h)e.addCase(t,h[t]);for(var n=0,r=u;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}d&&e.addDefaultCase(d)}))}return o.forEach((function(e){var n,r,i=a[e],s=t+"/"+e;"reducer"in i?(n=i.reducer,r=i.prepare):n=i,u[e]=n,c[s]=n,l[e]=r?ke(s,r):ke(s)})),{name:t,reducer:function(e,t){return n||(n=d()),n(e,t)},actions:l,caseReducers:u,getInitialState:function(){return n||(n=d()),n.getInitialState()}}}var Oe=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},Pe=["name","message","stack","code"],Ne=function(e,t){this.payload=e,this.meta=t},Re=function(e,t){this.payload=e,this.meta=t},Le=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=Pe;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}},Me=function(){function e(e,t,n){var r=ke(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:we(ye({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=ke(e+"/pending",(function(e,t,n){return{payload:void 0,meta:we(ye({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),s=ke(e+"/rejected",(function(e,t,r,i,s){return{payload:i,error:(n&&n.serializeError||Le)(e||"Rejected"),meta:we(ye({},s||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),a="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(o,u,c){var l,d=(null==n?void 0:n.idGenerator)?n.idGenerator(e):Oe(),h=new a;function f(e){l=e,h.abort()}var p=function(){return be(this,null,(function(){var a,p,g,m,v,y;return ce(this,(function(w){switch(w.label){case 0:return w.trys.push([0,4,,5]),m=null==(a=null==n?void 0:n.condition)?void 0:a.call(n,e,{getState:u,extra:c}),null===(b=m)||"object"!==typeof b||"function"!==typeof b.then?[3,2]:[4,m];case 1:m=w.sent(),w.label=2;case 2:if(!1===m||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,v=new Promise((function(e,t){return h.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),o(i(d,e,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:d,arg:e},{getState:u,extra:c}))),[4,Promise.race([v,Promise.resolve(t(e,{dispatch:o,getState:u,extra:c,requestId:d,signal:h.signal,abort:f,rejectWithValue:function(e,t){return new Ne(e,t)},fulfillWithValue:function(e,t){return new Re(e,t)}})).then((function(t){if(t instanceof Ne)throw t;return t instanceof Re?r(t.payload,d,e,t.meta):r(t,d,e)}))])];case 3:return g=w.sent(),[3,5];case 4:return y=w.sent(),g=y instanceof Ne?s(null,d,e,y.payload,y.meta):s(y,d,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&s.match(g)&&g.meta.condition||o(g),[2,g]}var b}))}))}();return Object.assign(p,{abort:f,requestId:d,arg:e,unwrap:function(){return p.then(Ue)}})}}),{pending:i,rejected:s,fulfilled:r,typePrefix:e})}return e.withTypes=function(){return e},e}();function Ue(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var je="listenerMiddleware";ke(je+"/add"),ke(je+"/removeAll"),ke(je+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis);var Fe,Ve=function(e){return function(t){setTimeout(t,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Ve(10);j()},9669:function(e,t,n){e.exports=n(51609)},55448:function(e,t,n){"use strict";var r=n(64867),i=n(36026),s=n(4372),a=n(15327),o=n(94097),u=n(84109),c=n(67985),l=n(85061),d=n(77874),h=n(65263);e.exports=function(e){return new Promise((function(t,n){var f,p=e.data,g=e.headers,m=e.responseType;function v(){e.cancelToken&&e.cancelToken.unsubscribe(f),e.signal&&e.signal.removeEventListener("abort",f)}r.isFormData(p)&&delete g["Content-Type"];var y=new XMLHttpRequest;if(e.auth){var w=e.auth.username||"",b=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";g.Authorization="Basic "+btoa(w+":"+b)}var _=o(e.baseURL,e.url);function S(){if(y){var r="getAllResponseHeaders"in y?u(y.getAllResponseHeaders()):null,s={data:m&&"text"!==m&&"json"!==m?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:r,config:e,request:y};i((function(e){t(e),v()}),(function(e){n(e),v()}),s),y=null}}if(y.open(e.method.toUpperCase(),a(_,e.params,e.paramsSerializer),!0),y.timeout=e.timeout,"onloadend"in y?y.onloadend=S:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(S)},y.onabort=function(){y&&(n(l("Request aborted",e,"ECONNABORTED",y)),y=null)},y.onerror=function(){n(l("Network Error",e,null,y)),y=null},y.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||d;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",y)),y=null},r.isStandardBrowserEnv()){var k=(e.withCredentials||c(_))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;k&&(g[e.xsrfHeaderName]=k)}"setRequestHeader"in y&&r.forEach(g,(function(e,t){"undefined"===typeof p&&"content-type"===t.toLowerCase()?delete g[t]:y.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),m&&"json"!==m&&(y.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&y.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(f=function(e){y&&(n(!e||e&&e.type?new h("canceled"):e),y.abort(),y=null)},e.cancelToken&&e.cancelToken.subscribe(f),e.signal&&(e.signal.aborted?f():e.signal.addEventListener("abort",f))),p||(p=null),y.send(p)}))}},51609:function(e,t,n){"use strict";var r=n(64867),i=n(91849),s=n(30321),a=n(47185);var o=function e(t){var n=new s(t),o=i(s.prototype.request,n);return r.extend(o,s.prototype,n),r.extend(o,n),o.create=function(n){return e(a(t,n))},o}(n(45546));o.Axios=s,o.Cancel=n(65263),o.CancelToken=n(14972),o.isCancel=n(26502),o.VERSION=n(97288).version,o.all=function(e){return Promise.all(e)},o.spread=n(8713),o.isAxiosError=n(16268),e.exports=o,e.exports.default=o},65263:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},14972:function(e,t,n){"use strict";var r=n(65263);function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},26502:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},30321:function(e,t,n){"use strict";var r=n(64867),i=n(15327),s=n(80782),a=n(13572),o=n(47185),u=n(54875),c=u.validators;function l(e){this.defaults=e,this.interceptors={request:new s,response:new s}}l.prototype.request=function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},(t=o(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&u.assertOptions(n,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var s,l=[];if(this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)})),!i){var d=[a,void 0];for(Array.prototype.unshift.apply(d,r),d=d.concat(l),s=Promise.resolve(t);d.length;)s=s.then(d.shift(),d.shift());return s}for(var h=t;r.length;){var f=r.shift(),p=r.shift();try{h=f(h)}catch(g){p(g);break}}try{s=a(h)}catch(g){return Promise.reject(g)}for(;l.length;)s=s.then(l.shift(),l.shift());return s},l.prototype.getUri=function(e){return e=o(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(o(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(o(r||{},{method:e,url:t,data:n}))}})),e.exports=l},80782:function(e,t,n){"use strict";var r=n(64867);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},94097:function(e,t,n){"use strict";var r=n(91793),i=n(7303);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},85061:function(e,t,n){"use strict";var r=n(80481);e.exports=function(e,t,n,i,s){var a=new Error(e);return r(a,t,n,i,s)}},13572:function(e,t,n){"use strict";var r=n(64867),i=n(18527),s=n(26502),a=n(45546),o=n(65263);function u(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new o("canceled")}e.exports=function(e){return u(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return u(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(u(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},80481:function(e){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},47185:function(e,t,n){"use strict";var r=n(64867);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function a(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function u(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var c={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||s,i=t(e);r.isUndefined(i)&&t!==u||(n[e]=i)})),n}},36026:function(e,t,n){"use strict";var r=n(85061);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},18527:function(e,t,n){"use strict";var r=n(64867),i=n(45546);e.exports=function(e,t,n){var s=this||i;return r.forEach(n,(function(n){e=n.call(s,e,t)})),e}},45546:function(e,t,n){"use strict";var r=n(83454),i=n(64867),s=n(16016),a=n(80481),o=n(77874),u={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l={transitional:o,adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof r&&"[object process]"===Object.prototype.toString.call(r))&&(e=n(55448)),e}(),transformRequest:[function(e,t){return s(t,"Accept"),s(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)||t&&"application/json"===t["Content-Type"]?(c(t,"application/json"),function(e,t,n){if(i.isString(e))try{return(t||JSON.parse)(e),i.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||r&&i.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s){if("SyntaxError"===o.name)throw a(o,this,"E_JSON_PARSE");throw o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){l.headers[e]=i.merge(u)})),e.exports=l},77874:function(e){"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},97288:function(e){e.exports={version:"0.26.1"}},91849:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},15327:function(e,t,n){"use strict";var r=n(64867);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var s;if(n)s=n(t);else if(r.isURLSearchParams(t))s=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),s=a.join("&")}if(s){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},7303:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:function(e,t,n){"use strict";var r=n(64867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,s,a){var o=[];o.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),r.isString(i)&&o.push("path="+i),r.isString(s)&&o.push("domain="+s),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},91793:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},16268:function(e,t,n){"use strict";var r=n(64867);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},67985:function(e,t,n){"use strict";var r=n(64867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},16016:function(e,t,n){"use strict";var r=n(64867);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},84109:function(e,t,n){"use strict";var r=n(64867),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,s,a={};return e?(r.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=r.trim(e.substr(0,s)).toLowerCase(),n=r.trim(e.substr(s+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},8713:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},54875:function(e,t,n){"use strict";var r=n(97288).version,i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var s={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,a){if(!1===e)throw new Error(i(r," has been removed"+(t?" in "+t:"")));return t&&!s[r]&&(s[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,a)}},e.exports={assertOptions:function(e,t,n){if("object"!==typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var s=r[i],a=t[s];if(a){var o=e[s],u=void 0===o||a(o,s,e);if(!0!==u)throw new TypeError("option "+s+" must be "+u)}else if(!0!==n)throw Error("Unknown option "+s)}},validators:i}},64867:function(e,t,n){"use strict";var r=n(91849),i=Object.prototype.toString;function s(e){return Array.isArray(e)}function a(e){return"undefined"===typeof e}function o(e){return"[object ArrayBuffer]"===i.call(e)}function u(e){return null!==e&&"object"===typeof e}function c(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){return"[object Function]"===i.call(e)}function d(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),s(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:s,isArrayBuffer:o,isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===i.call(e)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&o(e.buffer)},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:u,isPlainObject:c,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:l,isStream:function(e){return u(e)&&l(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===i.call(e)},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:d,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):s(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)d(arguments[r],n);return t},extend:function(e,t,n){return d(t,(function(t,i){e[i]=n&&"function"===typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},8679:function(e,t,n){"use strict";var r=n(59864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function u(e){return r.isMemo(e)?a:o[e.$$typeof]||i}o[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[r.Memo]=a;var c=Object.defineProperty,l=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var a=l(n);d&&(a=a.concat(d(n)));for(var o=u(t),g=u(n),m=0;m<a.length;++m){var v=a[m];if(!s[v]&&(!r||!r[v])&&(!g||!g[v])&&(!o||!o[v])){var y=h(n,v);try{c(t,v,y)}catch(w){}}}}return t}},30381:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t,n;function r(){return t.apply(null,arguments)}function i(e){t=e}function s(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function a(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(o(e,t))return!1;return!0}function c(e){return void 0===e}function l(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function d(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function h(e,t){var n,r=[],i=e.length;for(n=0;n<i;++n)r.push(t(e[n],n));return r}function f(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,r){return Yn(e,t,n,r,!0).utc()}function g(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function m(e){return null==e._pf&&(e._pf=g()),e._pf}function v(e){var t=null,r=!1,i=e._d&&!isNaN(e._d.getTime());return i&&(t=m(e),r=n.call(t.parsedDateParts,(function(e){return null!=e})),i=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r),e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)),null!=Object.isFrozen&&Object.isFrozen(e)?i:(e._isValid=i,e._isValid)}function y(e){var t=p(NaN);return null!=e?f(m(t),e):m(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var w=r.momentProperties=[],b=!1;function _(e,t){var n,r,i,s=w.length;if(c(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),c(t._i)||(e._i=t._i),c(t._f)||(e._f=t._f),c(t._l)||(e._l=t._l),c(t._strict)||(e._strict=t._strict),c(t._tzm)||(e._tzm=t._tzm),c(t._isUTC)||(e._isUTC=t._isUTC),c(t._offset)||(e._offset=t._offset),c(t._pf)||(e._pf=m(t)),c(t._locale)||(e._locale=t._locale),s>0)for(n=0;n<s;n++)c(i=t[r=w[n]])||(e[r]=i);return e}function S(e){_(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===b&&(b=!0,r.updateOffset(this),b=!1)}function k(e){return e instanceof S||null!=e&&null!=e._isAMomentObject}function T(e){!1===r.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function I(e,t){var n=!0;return f((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){var i,s,a,u=[],c=arguments.length;for(s=0;s<c;s++){if(i="","object"===typeof arguments[s]){for(a in i+="\n["+s+"] ",arguments[0])o(arguments[0],a)&&(i+=a+": "+arguments[0][a]+", ");i=i.slice(0,-2)}else i=arguments[s];u.push(i)}T(e+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var E,C={};function x(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),C[e]||(T(t),C[e]=!0)}function A(e){return"undefined"!==typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function D(e){var t,n;for(n in e)o(e,n)&&(A(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function O(e,t){var n,r=f({},e);for(n in t)o(t,n)&&(a(e[n])&&a(t[n])?(r[n]={},f(r[n],e[n]),f(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)o(e,n)&&!o(t,n)&&a(e[n])&&(r[n]=f({},r[n]));return r}function P(e){null!=e&&this.set(e)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,E=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)o(e,t)&&n.push(t);return n};var N={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function R(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return A(r)?r.call(t,n):r}function L(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var M=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,U=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,j={},F={};function V(e,t,n,r){var i=r;"string"===typeof r&&(i=function(){return this[r]()}),e&&(F[e]=i),t&&(F[t[0]]=function(){return L(i.apply(this,arguments),t[1],t[2])}),n&&(F[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function B(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Z(e){var t,n,r=e.match(M);for(t=0,n=r.length;t<n;t++)F[r[t]]?r[t]=F[r[t]]:r[t]=B(r[t]);return function(t){var i,s="";for(i=0;i<n;i++)s+=A(r[i])?r[i].call(t,e):r[i];return s}}function q(e,t){return e.isValid()?(t=z(t,e.localeData()),j[t]=j[t]||Z(t),j[t](e)):e.localeData().invalidDate()}function z(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(U.lastIndex=0;n>=0&&U.test(e);)e=e.replace(U,r),U.lastIndex=0,n-=1;return e}var H={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function $(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(M).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var W="Invalid date";function Y(){return this._invalidDate}var G="%d",K=/\d{1,2}/;function Q(e){return this._ordinal.replace("%d",e)}var J={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function X(e,t,n,r){var i=this._relativeTime[n];return A(i)?i(e,t,n,r):i.replace(/%d/i,e)}function ee(e,t){var n=this._relativeTime[e>0?"future":"past"];return A(n)?n(t):n.replace(/%s/i,t)}var te={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ne(e){return"string"===typeof e?te[e]||te[e.toLowerCase()]:void 0}function re(e){var t,n,r={};for(n in e)o(e,n)&&(t=ne(n))&&(r[t]=e[n]);return r}var ie={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function se(e){var t,n=[];for(t in e)o(e,t)&&n.push({unit:t,priority:ie[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}var ae,oe=/\d/,ue=/\d\d/,ce=/\d{3}/,le=/\d{4}/,de=/[+-]?\d{6}/,he=/\d\d?/,fe=/\d\d\d\d?/,pe=/\d\d\d\d\d\d?/,ge=/\d{1,3}/,me=/\d{1,4}/,ve=/[+-]?\d{1,6}/,ye=/\d+/,we=/[+-]?\d+/,be=/Z|[+-]\d\d:?\d\d/gi,_e=/Z|[+-]\d\d(?::?\d\d)?/gi,Se=/[+-]?\d+(\.\d{1,3})?/,ke=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Te=/^[1-9]\d?/,Ie=/^([1-9]\d|\d)/;function Ee(e,t,n){ae[e]=A(t)?t:function(e,r){return e&&n?n:t}}function Ce(e,t){return o(ae,e)?ae[e](t._strict,t._locale):new RegExp(xe(e))}function xe(e){return Ae(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,i){return t||n||r||i})))}function Ae(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function De(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Oe(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=De(t)),n}ae={};var Pe={};function Ne(e,t){var n,r,i=t;for("string"===typeof e&&(e=[e]),l(t)&&(i=function(e,n){n[t]=Oe(e)}),r=e.length,n=0;n<r;n++)Pe[e[n]]=i}function Re(e,t){Ne(e,(function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)}))}function Le(e,t,n){null!=t&&o(Pe,e)&&Pe[e](t,n._a,n,e)}function Me(e){return e%4===0&&e%100!==0||e%400===0}var Ue=0,je=1,Fe=2,Ve=3,Be=4,Ze=5,qe=6,ze=7,He=8;function $e(e){return Me(e)?366:365}V("Y",0,0,(function(){var e=this.year();return e<=9999?L(e,4):"+"+e})),V(0,["YY",2],0,(function(){return this.year()%100})),V(0,["YYYY",4],0,"year"),V(0,["YYYYY",5],0,"year"),V(0,["YYYYYY",6,!0],0,"year"),Ee("Y",we),Ee("YY",he,ue),Ee("YYYY",me,le),Ee("YYYYY",ve,de),Ee("YYYYYY",ve,de),Ne(["YYYYY","YYYYYY"],Ue),Ne("YYYY",(function(e,t){t[Ue]=2===e.length?r.parseTwoDigitYear(e):Oe(e)})),Ne("YY",(function(e,t){t[Ue]=r.parseTwoDigitYear(e)})),Ne("Y",(function(e,t){t[Ue]=parseInt(e,10)})),r.parseTwoDigitYear=function(e){return Oe(e)+(Oe(e)>68?1900:2e3)};var We,Ye=Ke("FullYear",!0);function Ge(){return Me(this.year())}function Ke(e,t){return function(n){return null!=n?(Je(this,e,n),r.updateOffset(this,t),this):Qe(this,e)}}function Qe(e,t){if(!e.isValid())return NaN;var n=e._d,r=e._isUTC;switch(t){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function Je(e,t,n){var r,i,s,a,o;if(e.isValid()&&!isNaN(n)){switch(r=e._d,i=e._isUTC,t){case"Milliseconds":return void(i?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(i?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(i?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(i?r.setUTCHours(n):r.setHours(n));case"Date":return void(i?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}s=n,a=e.month(),o=29!==(o=e.date())||1!==a||Me(s)?o:28,i?r.setUTCFullYear(s,a,o):r.setFullYear(s,a,o)}}function Xe(e){return A(this[e=ne(e)])?this[e]():this}function et(e,t){if("object"===typeof e){var n,r=se(e=re(e)),i=r.length;for(n=0;n<i;n++)this[r[n].unit](e[r[n].unit])}else if(A(this[e=ne(e)]))return this[e](t);return this}function tt(e,t){return(e%t+t)%t}function nt(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=tt(t,12);return e+=(t-n)/12,1===n?Me(e)?29:28:31-n%7%2}We=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},V("M",["MM",2],"Mo",(function(){return this.month()+1})),V("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),V("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),Ee("M",he,Te),Ee("MM",he,ue),Ee("MMM",(function(e,t){return t.monthsShortRegex(e)})),Ee("MMMM",(function(e,t){return t.monthsRegex(e)})),Ne(["M","MM"],(function(e,t){t[je]=Oe(e)-1})),Ne(["MMM","MMMM"],(function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[je]=i:m(n).invalidMonth=e}));var rt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),it="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),st=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,at=ke,ot=ke;function ut(e,t){return e?s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||st).test(t)?"format":"standalone"][e.month()]:s(this._months)?this._months:this._months.standalone}function ct(e,t){return e?s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[st.test(t)?"format":"standalone"][e.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function lt(e,t,n){var r,i,s,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)s=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(s,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=We.call(this._shortMonthsParse,a))?i:null:-1!==(i=We.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=We.call(this._shortMonthsParse,a))||-1!==(i=We.call(this._longMonthsParse,a))?i:null:-1!==(i=We.call(this._longMonthsParse,a))||-1!==(i=We.call(this._shortMonthsParse,a))?i:null}function dt(e,t,n){var r,i,s;if(this._monthsParseExact)return lt.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function ht(e,t){if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=Oe(t);else if(!l(t=e.localeData().monthsParse(t)))return e;var n=t,r=e.date();return r=r<29?r:Math.min(r,nt(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,r):e._d.setMonth(n,r),e}function ft(e){return null!=e?(ht(this,e),r.updateOffset(this,!0),this):Qe(this,"Month")}function pt(){return nt(this.year(),this.month())}function gt(e){return this._monthsParseExact?(o(this,"_monthsRegex")||vt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=at),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function mt(e){return this._monthsParseExact?(o(this,"_monthsRegex")||vt.call(this),e?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=ot),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function vt(){function e(e,t){return t.length-e.length}var t,n,r,i,s=[],a=[],o=[];for(t=0;t<12;t++)n=p([2e3,t]),r=Ae(this.monthsShort(n,"")),i=Ae(this.months(n,"")),s.push(r),a.push(i),o.push(i),o.push(r);s.sort(e),a.sort(e),o.sort(e),this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function yt(e,t,n,r,i,s,a){var o;return e<100&&e>=0?(o=new Date(e+400,t,n,r,i,s,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,r,i,s,a),o}function wt(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function bt(e,t,n){var r=7+t-n;return-(7+wt(e,0,r).getUTCDay()-t)%7+r-1}function _t(e,t,n,r,i){var s,a,o=1+7*(t-1)+(7+n-r)%7+bt(e,r,i);return o<=0?a=$e(s=e-1)+o:o>$e(e)?(s=e+1,a=o-$e(e)):(s=e,a=o),{year:s,dayOfYear:a}}function St(e,t,n){var r,i,s=bt(e.year(),t,n),a=Math.floor((e.dayOfYear()-s-1)/7)+1;return a<1?r=a+kt(i=e.year()-1,t,n):a>kt(e.year(),t,n)?(r=a-kt(e.year(),t,n),i=e.year()+1):(i=e.year(),r=a),{week:r,year:i}}function kt(e,t,n){var r=bt(e,t,n),i=bt(e+1,t,n);return($e(e)-r+i)/7}function Tt(e){return St(e,this._week.dow,this._week.doy).week}V("w",["ww",2],"wo","week"),V("W",["WW",2],"Wo","isoWeek"),Ee("w",he,Te),Ee("ww",he,ue),Ee("W",he,Te),Ee("WW",he,ue),Re(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=Oe(e)}));var It={dow:0,doy:6};function Et(){return this._week.dow}function Ct(){return this._week.doy}function xt(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function At(e){var t=St(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Dt(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Ot(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Pt(e,t){return e.slice(t,7).concat(e.slice(0,t))}V("d",0,"do","day"),V("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),V("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),V("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),V("e",0,0,"weekday"),V("E",0,0,"isoWeekday"),Ee("d",he),Ee("e",he),Ee("E",he),Ee("dd",(function(e,t){return t.weekdaysMinRegex(e)})),Ee("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),Ee("dddd",(function(e,t){return t.weekdaysRegex(e)})),Re(["dd","ddd","dddd"],(function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:m(n).invalidWeekday=e})),Re(["d","e","E"],(function(e,t,n,r){t[r]=Oe(e)}));var Nt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Rt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Lt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Mt=ke,Ut=ke,jt=ke;function Ft(e,t){var n=s(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Pt(n,this._week.dow):e?n[e.day()]:n}function Vt(e){return!0===e?Pt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Bt(e){return!0===e?Pt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Zt(e,t,n){var r,i,s,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)s=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(s,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=We.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=We.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=We.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=We.call(this._weekdaysParse,a))||-1!==(i=We.call(this._shortWeekdaysParse,a))||-1!==(i=We.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=We.call(this._shortWeekdaysParse,a))||-1!==(i=We.call(this._weekdaysParse,a))||-1!==(i=We.call(this._minWeekdaysParse,a))?i:null:-1!==(i=We.call(this._minWeekdaysParse,a))||-1!==(i=We.call(this._weekdaysParse,a))||-1!==(i=We.call(this._shortWeekdaysParse,a))?i:null}function qt(e,t,n){var r,i,s;if(this._weekdaysParseExact)return Zt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function zt(e){if(!this.isValid())return null!=e?this:NaN;var t=Qe(this,"Day");return null!=e?(e=Dt(e,this.localeData()),this.add(e-t,"d")):t}function Ht(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function $t(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Ot(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Wt(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Kt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=Mt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Yt(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Kt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ut),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Gt(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Kt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=jt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Kt(){function e(e,t){return t.length-e.length}var t,n,r,i,s,a=[],o=[],u=[],c=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),r=Ae(this.weekdaysMin(n,"")),i=Ae(this.weekdaysShort(n,"")),s=Ae(this.weekdays(n,"")),a.push(r),o.push(i),u.push(s),c.push(r),c.push(i),c.push(s);a.sort(e),o.sort(e),u.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Qt(){return this.hours()%12||12}function Jt(){return this.hours()||24}function Xt(e,t){V(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function en(e,t){return t._meridiemParse}function tn(e){return"p"===(e+"").toLowerCase().charAt(0)}V("H",["HH",2],0,"hour"),V("h",["hh",2],0,Qt),V("k",["kk",2],0,Jt),V("hmm",0,0,(function(){return""+Qt.apply(this)+L(this.minutes(),2)})),V("hmmss",0,0,(function(){return""+Qt.apply(this)+L(this.minutes(),2)+L(this.seconds(),2)})),V("Hmm",0,0,(function(){return""+this.hours()+L(this.minutes(),2)})),V("Hmmss",0,0,(function(){return""+this.hours()+L(this.minutes(),2)+L(this.seconds(),2)})),Xt("a",!0),Xt("A",!1),Ee("a",en),Ee("A",en),Ee("H",he,Ie),Ee("h",he,Te),Ee("k",he,Te),Ee("HH",he,ue),Ee("hh",he,ue),Ee("kk",he,ue),Ee("hmm",fe),Ee("hmmss",pe),Ee("Hmm",fe),Ee("Hmmss",pe),Ne(["H","HH"],Ve),Ne(["k","kk"],(function(e,t,n){var r=Oe(e);t[Ve]=24===r?0:r})),Ne(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),Ne(["h","hh"],(function(e,t,n){t[Ve]=Oe(e),m(n).bigHour=!0})),Ne("hmm",(function(e,t,n){var r=e.length-2;t[Ve]=Oe(e.substr(0,r)),t[Be]=Oe(e.substr(r)),m(n).bigHour=!0})),Ne("hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Ve]=Oe(e.substr(0,r)),t[Be]=Oe(e.substr(r,2)),t[Ze]=Oe(e.substr(i)),m(n).bigHour=!0})),Ne("Hmm",(function(e,t,n){var r=e.length-2;t[Ve]=Oe(e.substr(0,r)),t[Be]=Oe(e.substr(r))})),Ne("Hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Ve]=Oe(e.substr(0,r)),t[Be]=Oe(e.substr(r,2)),t[Ze]=Oe(e.substr(i))}));var nn=/[ap]\.?m?\.?/i,rn=Ke("Hours",!0);function sn(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var an,on={calendar:N,longDateFormat:H,invalidDate:W,ordinal:G,dayOfMonthOrdinalParse:K,relativeTime:J,months:rt,monthsShort:it,week:It,weekdays:Nt,weekdaysMin:Lt,weekdaysShort:Rt,meridiemParse:nn},un={},cn={};function ln(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function dn(e){return e?e.toLowerCase().replace("_","-"):e}function hn(e){for(var t,n,r,i,s=0;s<e.length;){for(t=(i=dn(e[s]).split("-")).length,n=(n=dn(e[s+1]))?n.split("-"):null;t>0;){if(r=pn(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&ln(i,n)>=t-1)break;t--}s++}return an}function fn(e){return!(!e||!e.match("^[^/\\\\]*$"))}function pn(t){var n=null;if(void 0===un[t]&&e&&e.exports&&fn(t))try{n=an._abbr,Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()),gn(n)}catch(r){un[t]=null}return un[t]}function gn(e,t){var n;return e&&((n=c(t)?yn(e):mn(e,t))?an=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),an._abbr}function mn(e,t){if(null!==t){var n,r=on;if(t.abbr=e,null!=un[e])x("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=un[e]._config;else if(null!=t.parentLocale)if(null!=un[t.parentLocale])r=un[t.parentLocale]._config;else{if(null==(n=pn(t.parentLocale)))return cn[t.parentLocale]||(cn[t.parentLocale]=[]),cn[t.parentLocale].push({name:e,config:t}),null;r=n._config}return un[e]=new P(O(r,t)),cn[e]&&cn[e].forEach((function(e){mn(e.name,e.config)})),gn(e),un[e]}return delete un[e],null}function vn(e,t){if(null!=t){var n,r,i=on;null!=un[e]&&null!=un[e].parentLocale?un[e].set(O(un[e]._config,t)):(null!=(r=pn(e))&&(i=r._config),t=O(i,t),null==r&&(t.abbr=e),(n=new P(t)).parentLocale=un[e],un[e]=n),gn(e)}else null!=un[e]&&(null!=un[e].parentLocale?(un[e]=un[e].parentLocale,e===gn()&&gn(e)):null!=un[e]&&delete un[e]);return un[e]}function yn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return an;if(!s(e)){if(t=pn(e))return t;e=[e]}return hn(e)}function wn(){return E(un)}function bn(e){var t,n=e._a;return n&&-2===m(e).overflow&&(t=n[je]<0||n[je]>11?je:n[Fe]<1||n[Fe]>nt(n[Ue],n[je])?Fe:n[Ve]<0||n[Ve]>24||24===n[Ve]&&(0!==n[Be]||0!==n[Ze]||0!==n[qe])?Ve:n[Be]<0||n[Be]>59?Be:n[Ze]<0||n[Ze]>59?Ze:n[qe]<0||n[qe]>999?qe:-1,m(e)._overflowDayOfYear&&(t<Ue||t>Fe)&&(t=Fe),m(e)._overflowWeeks&&-1===t&&(t=ze),m(e)._overflowWeekday&&-1===t&&(t=He),m(e).overflow=t),e}var _n=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Sn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,kn=/Z|[+-]\d\d(?::?\d\d)?/,Tn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],In=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],En=/^\/?Date\((-?\d+)/i,Cn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,xn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function An(e){var t,n,r,i,s,a,o=e._i,u=_n.exec(o)||Sn.exec(o),c=Tn.length,l=In.length;if(u){for(m(e).iso=!0,t=0,n=c;t<n;t++)if(Tn[t][1].exec(u[1])){i=Tn[t][0],r=!1!==Tn[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=l;t<n;t++)if(In[t][1].exec(u[3])){s=(u[2]||" ")+In[t][0];break}if(null==s)return void(e._isValid=!1)}if(!r&&null!=s)return void(e._isValid=!1);if(u[4]){if(!kn.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(s||"")+(a||""),Bn(e)}else e._isValid=!1}function Dn(e,t,n,r,i,s){var a=[On(e),it.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return s&&a.push(parseInt(s,10)),a}function On(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Pn(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Nn(e,t,n){return!e||Rt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(m(n).weekdayMismatch=!0,n._isValid=!1,!1)}function Rn(e,t,n){if(e)return xn[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}function Ln(e){var t,n=Cn.exec(Pn(e._i));if(n){if(t=Dn(n[4],n[3],n[2],n[5],n[6],n[7]),!Nn(n[1],t,e))return;e._a=t,e._tzm=Rn(n[8],n[9],n[10]),e._d=wt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),m(e).rfc2822=!0}else e._isValid=!1}function Mn(e){var t=En.exec(e._i);null===t?(An(e),!1===e._isValid&&(delete e._isValid,Ln(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:r.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Un(e,t,n){return null!=e?e:null!=t?t:n}function jn(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Fn(e){var t,n,r,i,s,a=[];if(!e._d){for(r=jn(e),e._w&&null==e._a[Fe]&&null==e._a[je]&&Vn(e),null!=e._dayOfYear&&(s=Un(e._a[Ue],r[Ue]),(e._dayOfYear>$e(s)||0===e._dayOfYear)&&(m(e)._overflowDayOfYear=!0),n=wt(s,0,e._dayOfYear),e._a[je]=n.getUTCMonth(),e._a[Fe]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=r[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Ve]&&0===e._a[Be]&&0===e._a[Ze]&&0===e._a[qe]&&(e._nextDay=!0,e._a[Ve]=0),e._d=(e._useUTC?wt:yt).apply(null,a),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ve]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==i&&(m(e).weekdayMismatch=!0)}}function Vn(e){var t,n,r,i,s,a,o,u,c;null!=(t=e._w).GG||null!=t.W||null!=t.E?(s=1,a=4,n=Un(t.GG,e._a[Ue],St(Gn(),1,4).year),r=Un(t.W,1),((i=Un(t.E,1))<1||i>7)&&(u=!0)):(s=e._locale._week.dow,a=e._locale._week.doy,c=St(Gn(),s,a),n=Un(t.gg,e._a[Ue],c.year),r=Un(t.w,c.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+s,(t.e<0||t.e>6)&&(u=!0)):i=s),r<1||r>kt(n,s,a)?m(e)._overflowWeeks=!0:null!=u?m(e)._overflowWeekday=!0:(o=_t(n,r,i,s,a),e._a[Ue]=o.year,e._dayOfYear=o.dayOfYear)}function Bn(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],m(e).empty=!0;var t,n,i,s,a,o,u,c=""+e._i,l=c.length,d=0;for(u=(i=z(e._f,e._locale).match(M)||[]).length,t=0;t<u;t++)s=i[t],(n=(c.match(Ce(s,e))||[])[0])&&((a=c.substr(0,c.indexOf(n))).length>0&&m(e).unusedInput.push(a),c=c.slice(c.indexOf(n)+n.length),d+=n.length),F[s]?(n?m(e).empty=!1:m(e).unusedTokens.push(s),Le(s,n,e)):e._strict&&!n&&m(e).unusedTokens.push(s);m(e).charsLeftOver=l-d,c.length>0&&m(e).unusedInput.push(c),e._a[Ve]<=12&&!0===m(e).bigHour&&e._a[Ve]>0&&(m(e).bigHour=void 0),m(e).parsedDateParts=e._a.slice(0),m(e).meridiem=e._meridiem,e._a[Ve]=Zn(e._locale,e._a[Ve],e._meridiem),null!==(o=m(e).era)&&(e._a[Ue]=e._locale.erasConvertYear(o,e._a[Ue])),Fn(e),bn(e)}else Ln(e);else An(e)}function Zn(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function qn(e){var t,n,r,i,s,a,o=!1,u=e._f.length;if(0===u)return m(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<u;i++)s=0,a=!1,t=_({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Bn(t),v(t)&&(a=!0),s+=m(t).charsLeftOver,s+=10*m(t).unusedTokens.length,m(t).score=s,o?s<r&&(r=s,n=t):(null==r||s<r||a)&&(r=s,n=t,a&&(o=!0));f(e,n||t)}function zn(e){if(!e._d){var t=re(e._i),n=void 0===t.day?t.date:t.day;e._a=h([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Fn(e)}}function Hn(e){var t=new S(bn($n(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function $n(e){var t=e._i,n=e._f;return e._locale=e._locale||yn(e._l),null===t||void 0===n&&""===t?y({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),k(t)?new S(bn(t)):(d(t)?e._d=t:s(n)?qn(e):n?Bn(e):Wn(e),v(e)||(e._d=null),e))}function Wn(e){var t=e._i;c(t)?e._d=new Date(r.now()):d(t)?e._d=new Date(t.valueOf()):"string"===typeof t?Mn(e):s(t)?(e._a=h(t.slice(0),(function(e){return parseInt(e,10)})),Fn(e)):a(t)?zn(e):l(t)?e._d=new Date(t):r.createFromInputFallback(e)}function Yn(e,t,n,r,i){var o={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(a(e)&&u(e)||s(e)&&0===e.length)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=n,o._i=e,o._f=t,o._strict=r,Hn(o)}function Gn(e,t,n,r){return Yn(e,t,n,r,!1)}r.createFromInputFallback=I("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Kn=I("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Gn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:y()})),Qn=I("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Gn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:y()}));function Jn(e,t){var n,r;if(1===t.length&&s(t[0])&&(t=t[0]),!t.length)return Gn();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function Xn(){return Jn("isBefore",[].slice.call(arguments,0))}function er(){return Jn("isAfter",[].slice.call(arguments,0))}var tr=function(){return Date.now?Date.now():+new Date},nr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rr(e){var t,n,r=!1,i=nr.length;for(t in e)if(o(e,t)&&(-1===We.call(nr,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<i;++n)if(e[nr[n]]){if(r)return!1;parseFloat(e[nr[n]])!==Oe(e[nr[n]])&&(r=!0)}return!0}function ir(){return this._isValid}function sr(){return xr(NaN)}function ar(e){var t=re(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||t.isoWeek||0,a=t.day||0,o=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._isValid=rr(t),this._milliseconds=+l+1e3*c+6e4*u+1e3*o*60*60,this._days=+a+7*s,this._months=+i+3*r+12*n,this._data={},this._locale=yn(),this._bubble()}function or(e){return e instanceof ar}function ur(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function cr(e,t,n){var r,i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&Oe(e[r])!==Oe(t[r]))&&a++;return a+s}function lr(e,t){V(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+L(~~(e/60),2)+t+L(~~e%60,2)}))}lr("Z",":"),lr("ZZ",""),Ee("Z",_e),Ee("ZZ",_e),Ne(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=hr(_e,e)}));var dr=/([\+\-]|\d\d)/gi;function hr(e,t){var n,r,i=(t||"").match(e);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(dr)||["-",0,0])[1]+Oe(n[2]))?0:"+"===n[0]?r:-r}function fr(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(k(e)||d(e)?e.valueOf():Gn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):Gn(e).local()}function pr(e){return-Math.round(e._d.getTimezoneOffset())}function gr(e,t,n){var i,s=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=hr(_e,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=pr(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),s!==e&&(!t||this._changeInProgress?Nr(this,xr(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?s:pr(this)}function mr(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function vr(e){return this.utcOffset(0,e)}function yr(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(pr(this),"m")),this}function wr(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=hr(be,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function br(e){return!!this.isValid()&&(e=e?Gn(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function _r(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Sr(){if(!c(this._isDSTShifted))return this._isDSTShifted;var e,t={};return _(t,this),(t=$n(t))._a?(e=t._isUTC?p(t._a):Gn(t._a),this._isDSTShifted=this.isValid()&&cr(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function kr(){return!!this.isValid()&&!this._isUTC}function Tr(){return!!this.isValid()&&this._isUTC}function Ir(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Er=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Cr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function xr(e,t){var n,r,i,s=e,a=null;return or(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:l(e)||!isNaN(+e)?(s={},t?s[t]=+e:s.milliseconds=+e):(a=Er.exec(e))?(n="-"===a[1]?-1:1,s={y:0,d:Oe(a[Fe])*n,h:Oe(a[Ve])*n,m:Oe(a[Be])*n,s:Oe(a[Ze])*n,ms:Oe(ur(1e3*a[qe]))*n}):(a=Cr.exec(e))?(n="-"===a[1]?-1:1,s={y:Ar(a[2],n),M:Ar(a[3],n),w:Ar(a[4],n),d:Ar(a[5],n),h:Ar(a[6],n),m:Ar(a[7],n),s:Ar(a[8],n)}):null==s?s={}:"object"===typeof s&&("from"in s||"to"in s)&&(i=Or(Gn(s.from),Gn(s.to)),(s={}).ms=i.milliseconds,s.M=i.months),r=new ar(s),or(e)&&o(e,"_locale")&&(r._locale=e._locale),or(e)&&o(e,"_isValid")&&(r._isValid=e._isValid),r}function Ar(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Dr(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Or(e,t){var n;return e.isValid()&&t.isValid()?(t=fr(t,e),e.isBefore(t)?n=Dr(e,t):((n=Dr(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Pr(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(x(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Nr(this,xr(n,r),e),this}}function Nr(e,t,n,i){var s=t._milliseconds,a=ur(t._days),o=ur(t._months);e.isValid()&&(i=null==i||i,o&&ht(e,Qe(e,"Month")+o*n),a&&Je(e,"Date",Qe(e,"Date")+a*n),s&&e._d.setTime(e._d.valueOf()+s*n),i&&r.updateOffset(e,a||o))}xr.fn=ar.prototype,xr.invalid=sr;var Rr=Pr(1,"add"),Lr=Pr(-1,"subtract");function Mr(e){return"string"===typeof e||e instanceof String}function Ur(e){return k(e)||d(e)||Mr(e)||l(e)||Fr(e)||jr(e)||null===e||void 0===e}function jr(e){var t,n,r=a(e)&&!u(e),i=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c=s.length;for(t=0;t<c;t+=1)n=s[t],i=i||o(e,n);return r&&i}function Fr(e){var t=s(e),n=!1;return t&&(n=0===e.filter((function(t){return!l(t)&&Mr(e)})).length),t&&n}function Vr(e){var t,n,r=a(e)&&!u(e),i=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<s.length;t+=1)n=s[t],i=i||o(e,n);return r&&i}function Br(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Zr(e,t){1===arguments.length&&(arguments[0]?Ur(arguments[0])?(e=arguments[0],t=void 0):Vr(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Gn(),i=fr(n,this).startOf("day"),s=r.calendarFormat(this,i)||"sameElse",a=t&&(A(t[s])?t[s].call(this,n):t[s]);return this.format(a||this.localeData().calendar(s,this,Gn(n)))}function qr(){return new S(this)}function zr(e,t){var n=k(e)?e:Gn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Hr(e,t){var n=k(e)?e:Gn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function $r(e,t,n,r){var i=k(e)?e:Gn(e),s=k(t)?t:Gn(t);return!!(this.isValid()&&i.isValid()&&s.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(s,n):!this.isAfter(s,n))}function Wr(e,t){var n,r=k(e)?e:Gn(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Yr(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Gr(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Kr(e,t,n){var r,i,s;if(!this.isValid())return NaN;if(!(r=fr(e,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=ne(t)){case"year":s=Qr(this,r)/12;break;case"month":s=Qr(this,r);break;case"quarter":s=Qr(this,r)/3;break;case"second":s=(this-r)/1e3;break;case"minute":s=(this-r)/6e4;break;case"hour":s=(this-r)/36e5;break;case"day":s=(this-r-i)/864e5;break;case"week":s=(this-r-i)/6048e5;break;default:s=this-r}return n?s:De(s)}function Qr(e,t){if(e.date()<t.date())return-Qr(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function Jr(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Xr(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?q(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):A(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",q(n,"Z")):q(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ei(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r,i="moment",s="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",s="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=s+'[")]',this.format(e+t+n+r)}function ti(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=q(this,e);return this.localeData().postformat(t)}function ni(e,t){return this.isValid()&&(k(e)&&e.isValid()||Gn(e).isValid())?xr({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ri(e){return this.from(Gn(),e)}function ii(e,t){return this.isValid()&&(k(e)&&e.isValid()||Gn(e).isValid())?xr({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function si(e){return this.to(Gn(),e)}function ai(e){var t;return void 0===e?this._locale._abbr:(null!=(t=yn(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var oi=I("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function ui(){return this._locale}var ci=1e3,li=60*ci,di=60*li,hi=3506328*di;function fi(e,t){return(e%t+t)%t}function pi(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-hi:new Date(e,t,n).valueOf()}function gi(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-hi:Date.UTC(e,t,n)}function mi(e){var t,n;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?gi:pi,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=fi(t+(this._isUTC?0:this.utcOffset()*li),di);break;case"minute":t=this._d.valueOf(),t-=fi(t,li);break;case"second":t=this._d.valueOf(),t-=fi(t,ci)}return this._d.setTime(t),r.updateOffset(this,!0),this}function vi(e){var t,n;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?gi:pi,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=di-fi(t+(this._isUTC?0:this.utcOffset()*li),di)-1;break;case"minute":t=this._d.valueOf(),t+=li-fi(t,li)-1;break;case"second":t=this._d.valueOf(),t+=ci-fi(t,ci)-1}return this._d.setTime(t),r.updateOffset(this,!0),this}function yi(){return this._d.valueOf()-6e4*(this._offset||0)}function wi(){return Math.floor(this.valueOf()/1e3)}function bi(){return new Date(this.valueOf())}function _i(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Si(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function ki(){return this.isValid()?this.toISOString():null}function Ti(){return v(this)}function Ii(){return f({},m(this))}function Ei(){return m(this).overflow}function Ci(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function xi(e,t){var n,i,s,a=this._eras||yn("en")._eras;for(n=0,i=a.length;n<i;++n)switch("string"===typeof a[n].since&&(s=r(a[n].since).startOf("day"),a[n].since=s.valueOf()),typeof a[n].until){case"undefined":a[n].until=1/0;break;case"string":s=r(a[n].until).startOf("day").valueOf(),a[n].until=s.valueOf()}return a}function Ai(e,t,n){var r,i,s,a,o,u=this.eras();for(e=e.toUpperCase(),r=0,i=u.length;r<i;++r)if(s=u[r].name.toUpperCase(),a=u[r].abbr.toUpperCase(),o=u[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return u[r];break;case"NNNN":if(s===e)return u[r];break;case"NNNNN":if(o===e)return u[r]}else if([s,a,o].indexOf(e)>=0)return u[r]}function Di(e,t){var n=e.since<=e.until?1:-1;return void 0===t?r(e.since).year():r(e.since).year()+(t-e.offset)*n}function Oi(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""}function Pi(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""}function Ni(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""}function Ri(){var e,t,n,i,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(n=s[e].since<=s[e].until?1:-1,i=this.clone().startOf("day").valueOf(),s[e].since<=i&&i<=s[e].until||s[e].until<=i&&i<=s[e].since)return(this.year()-r(s[e].since).year())*n+s[e].offset;return this.year()}function Li(e){return o(this,"_erasNameRegex")||Zi.call(this),e?this._erasNameRegex:this._erasRegex}function Mi(e){return o(this,"_erasAbbrRegex")||Zi.call(this),e?this._erasAbbrRegex:this._erasRegex}function Ui(e){return o(this,"_erasNarrowRegex")||Zi.call(this),e?this._erasNarrowRegex:this._erasRegex}function ji(e,t){return t.erasAbbrRegex(e)}function Fi(e,t){return t.erasNameRegex(e)}function Vi(e,t){return t.erasNarrowRegex(e)}function Bi(e,t){return t._eraYearOrdinalRegex||ye}function Zi(){var e,t,n,r,i,s=[],a=[],o=[],u=[],c=this.eras();for(e=0,t=c.length;e<t;++e)n=Ae(c[e].name),r=Ae(c[e].abbr),i=Ae(c[e].narrow),a.push(n),s.push(r),o.push(i),u.push(n),u.push(r),u.push(i);this._erasRegex=new RegExp("^("+u.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+a.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+o.join("|")+")","i")}function qi(e,t){V(0,[e,e.length],0,t)}function zi(e){return Ki.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Hi(e){return Ki.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function $i(){return kt(this.year(),1,4)}function Wi(){return kt(this.isoWeekYear(),1,4)}function Yi(){var e=this.localeData()._week;return kt(this.year(),e.dow,e.doy)}function Gi(){var e=this.localeData()._week;return kt(this.weekYear(),e.dow,e.doy)}function Ki(e,t,n,r,i){var s;return null==e?St(this,r,i).year:(t>(s=kt(e,r,i))&&(t=s),Qi.call(this,e,t,n,r,i))}function Qi(e,t,n,r,i){var s=_t(e,t,n,r,i),a=wt(s.year,0,s.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Ji(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}V("N",0,0,"eraAbbr"),V("NN",0,0,"eraAbbr"),V("NNN",0,0,"eraAbbr"),V("NNNN",0,0,"eraName"),V("NNNNN",0,0,"eraNarrow"),V("y",["y",1],"yo","eraYear"),V("y",["yy",2],0,"eraYear"),V("y",["yyy",3],0,"eraYear"),V("y",["yyyy",4],0,"eraYear"),Ee("N",ji),Ee("NN",ji),Ee("NNN",ji),Ee("NNNN",Fi),Ee("NNNNN",Vi),Ne(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var i=n._locale.erasParse(e,r,n._strict);i?m(n).era=i:m(n).invalidEra=e})),Ee("y",ye),Ee("yy",ye),Ee("yyy",ye),Ee("yyyy",ye),Ee("yo",Bi),Ne(["y","yy","yyy","yyyy"],Ue),Ne(["yo"],(function(e,t,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Ue]=n._locale.eraYearOrdinalParse(e,i):t[Ue]=parseInt(e,10)})),V(0,["gg",2],0,(function(){return this.weekYear()%100})),V(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),qi("gggg","weekYear"),qi("ggggg","weekYear"),qi("GGGG","isoWeekYear"),qi("GGGGG","isoWeekYear"),Ee("G",we),Ee("g",we),Ee("GG",he,ue),Ee("gg",he,ue),Ee("GGGG",me,le),Ee("gggg",me,le),Ee("GGGGG",ve,de),Ee("ggggg",ve,de),Re(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=Oe(e)})),Re(["gg","GG"],(function(e,t,n,i){t[i]=r.parseTwoDigitYear(e)})),V("Q",0,"Qo","quarter"),Ee("Q",oe),Ne("Q",(function(e,t){t[je]=3*(Oe(e)-1)})),V("D",["DD",2],"Do","date"),Ee("D",he,Te),Ee("DD",he,ue),Ee("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),Ne(["D","DD"],Fe),Ne("Do",(function(e,t){t[Fe]=Oe(e.match(he)[0])}));var Xi=Ke("Date",!0);function es(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}V("DDD",["DDDD",3],"DDDo","dayOfYear"),Ee("DDD",ge),Ee("DDDD",ce),Ne(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=Oe(e)})),V("m",["mm",2],0,"minute"),Ee("m",he,Ie),Ee("mm",he,ue),Ne(["m","mm"],Be);var ts=Ke("Minutes",!1);V("s",["ss",2],0,"second"),Ee("s",he,Ie),Ee("ss",he,ue),Ne(["s","ss"],Ze);var ns,rs,is=Ke("Seconds",!1);for(V("S",0,0,(function(){return~~(this.millisecond()/100)})),V(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),V(0,["SSS",3],0,"millisecond"),V(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),V(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),V(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),V(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),V(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),V(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),Ee("S",ge,oe),Ee("SS",ge,ue),Ee("SSS",ge,ce),ns="SSSS";ns.length<=9;ns+="S")Ee(ns,ye);function ss(e,t){t[qe]=Oe(1e3*("0."+e))}for(ns="S";ns.length<=9;ns+="S")Ne(ns,ss);function as(){return this._isUTC?"UTC":""}function os(){return this._isUTC?"Coordinated Universal Time":""}rs=Ke("Milliseconds",!1),V("z",0,0,"zoneAbbr"),V("zz",0,0,"zoneName");var us=S.prototype;function cs(e){return Gn(1e3*e)}function ls(){return Gn.apply(null,arguments).parseZone()}function ds(e){return e}us.add=Rr,us.calendar=Zr,us.clone=qr,us.diff=Kr,us.endOf=vi,us.format=ti,us.from=ni,us.fromNow=ri,us.to=ii,us.toNow=si,us.get=Xe,us.invalidAt=Ei,us.isAfter=zr,us.isBefore=Hr,us.isBetween=$r,us.isSame=Wr,us.isSameOrAfter=Yr,us.isSameOrBefore=Gr,us.isValid=Ti,us.lang=oi,us.locale=ai,us.localeData=ui,us.max=Qn,us.min=Kn,us.parsingFlags=Ii,us.set=et,us.startOf=mi,us.subtract=Lr,us.toArray=_i,us.toObject=Si,us.toDate=bi,us.toISOString=Xr,us.inspect=ei,"undefined"!==typeof Symbol&&null!=Symbol.for&&(us[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),us.toJSON=ki,us.toString=Jr,us.unix=wi,us.valueOf=yi,us.creationData=Ci,us.eraName=Oi,us.eraNarrow=Pi,us.eraAbbr=Ni,us.eraYear=Ri,us.year=Ye,us.isLeapYear=Ge,us.weekYear=zi,us.isoWeekYear=Hi,us.quarter=us.quarters=Ji,us.month=ft,us.daysInMonth=pt,us.week=us.weeks=xt,us.isoWeek=us.isoWeeks=At,us.weeksInYear=Yi,us.weeksInWeekYear=Gi,us.isoWeeksInYear=$i,us.isoWeeksInISOWeekYear=Wi,us.date=Xi,us.day=us.days=zt,us.weekday=Ht,us.isoWeekday=$t,us.dayOfYear=es,us.hour=us.hours=rn,us.minute=us.minutes=ts,us.second=us.seconds=is,us.millisecond=us.milliseconds=rs,us.utcOffset=gr,us.utc=vr,us.local=yr,us.parseZone=wr,us.hasAlignedHourOffset=br,us.isDST=_r,us.isLocal=kr,us.isUtcOffset=Tr,us.isUtc=Ir,us.isUTC=Ir,us.zoneAbbr=as,us.zoneName=os,us.dates=I("dates accessor is deprecated. Use date instead.",Xi),us.months=I("months accessor is deprecated. Use month instead",ft),us.years=I("years accessor is deprecated. Use year instead",Ye),us.zone=I("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",mr),us.isDSTShifted=I("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Sr);var hs=P.prototype;function fs(e,t,n,r){var i=yn(),s=p().set(r,t);return i[n](s,e)}function ps(e,t,n){if(l(e)&&(t=e,e=void 0),e=e||"",null!=t)return fs(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=fs(e,r,n,"month");return i}function gs(e,t,n,r){"boolean"===typeof e?(l(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,l(t)&&(n=t,t=void 0),t=t||"");var i,s=yn(),a=e?s._week.dow:0,o=[];if(null!=n)return fs(t,(n+a)%7,r,"day");for(i=0;i<7;i++)o[i]=fs(t,(i+a)%7,r,"day");return o}function ms(e,t){return ps(e,t,"months")}function vs(e,t){return ps(e,t,"monthsShort")}function ys(e,t,n){return gs(e,t,n,"weekdays")}function ws(e,t,n){return gs(e,t,n,"weekdaysShort")}function bs(e,t,n){return gs(e,t,n,"weekdaysMin")}hs.calendar=R,hs.longDateFormat=$,hs.invalidDate=Y,hs.ordinal=Q,hs.preparse=ds,hs.postformat=ds,hs.relativeTime=X,hs.pastFuture=ee,hs.set=D,hs.eras=xi,hs.erasParse=Ai,hs.erasConvertYear=Di,hs.erasAbbrRegex=Mi,hs.erasNameRegex=Li,hs.erasNarrowRegex=Ui,hs.months=ut,hs.monthsShort=ct,hs.monthsParse=dt,hs.monthsRegex=mt,hs.monthsShortRegex=gt,hs.week=Tt,hs.firstDayOfYear=Ct,hs.firstDayOfWeek=Et,hs.weekdays=Ft,hs.weekdaysMin=Bt,hs.weekdaysShort=Vt,hs.weekdaysParse=qt,hs.weekdaysRegex=Wt,hs.weekdaysShortRegex=Yt,hs.weekdaysMinRegex=Gt,hs.isPM=tn,hs.meridiem=sn,gn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===Oe(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=I("moment.lang is deprecated. Use moment.locale instead.",gn),r.langData=I("moment.langData is deprecated. Use moment.localeData instead.",yn);var _s=Math.abs;function Ss(){var e=this._data;return this._milliseconds=_s(this._milliseconds),this._days=_s(this._days),this._months=_s(this._months),e.milliseconds=_s(e.milliseconds),e.seconds=_s(e.seconds),e.minutes=_s(e.minutes),e.hours=_s(e.hours),e.months=_s(e.months),e.years=_s(e.years),this}function ks(e,t,n,r){var i=xr(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Ts(e,t){return ks(this,e,t,1)}function Is(e,t){return ks(this,e,t,-1)}function Es(e){return e<0?Math.floor(e):Math.ceil(e)}function Cs(){var e,t,n,r,i,s=this._milliseconds,a=this._days,o=this._months,u=this._data;return s>=0&&a>=0&&o>=0||s<=0&&a<=0&&o<=0||(s+=864e5*Es(As(o)+a),a=0,o=0),u.milliseconds=s%1e3,e=De(s/1e3),u.seconds=e%60,t=De(e/60),u.minutes=t%60,n=De(t/60),u.hours=n%24,a+=De(n/24),o+=i=De(xs(a)),a-=Es(As(i)),r=De(o/12),o%=12,u.days=a,u.months=o,u.years=r,this}function xs(e){return 4800*e/146097}function As(e){return 146097*e/4800}function Ds(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=ne(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+xs(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(As(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function Os(e){return function(){return this.as(e)}}var Ps=Os("ms"),Ns=Os("s"),Rs=Os("m"),Ls=Os("h"),Ms=Os("d"),Us=Os("w"),js=Os("M"),Fs=Os("Q"),Vs=Os("y"),Bs=Ps;function Zs(){return xr(this)}function qs(e){return e=ne(e),this.isValid()?this[e+"s"]():NaN}function zs(e){return function(){return this.isValid()?this._data[e]:NaN}}var Hs=zs("milliseconds"),$s=zs("seconds"),Ws=zs("minutes"),Ys=zs("hours"),Gs=zs("days"),Ks=zs("months"),Qs=zs("years");function Js(){return De(this.days()/7)}var Xs=Math.round,ea={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ta(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function na(e,t,n,r){var i=xr(e).abs(),s=Xs(i.as("s")),a=Xs(i.as("m")),o=Xs(i.as("h")),u=Xs(i.as("d")),c=Xs(i.as("M")),l=Xs(i.as("w")),d=Xs(i.as("y")),h=s<=n.ss&&["s",s]||s<n.s&&["ss",s]||a<=1&&["m"]||a<n.m&&["mm",a]||o<=1&&["h"]||o<n.h&&["hh",o]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(h=h||l<=1&&["w"]||l<n.w&&["ww",l]),(h=h||c<=1&&["M"]||c<n.M&&["MM",c]||d<=1&&["y"]||["yy",d])[2]=t,h[3]=+e>0,h[4]=r,ta.apply(null,h)}function ra(e){return void 0===e?Xs:"function"===typeof e&&(Xs=e,!0)}function ia(e,t){return void 0!==ea[e]&&(void 0===t?ea[e]:(ea[e]=t,"s"===e&&(ea.ss=t-1),!0))}function sa(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,s=ea;return"object"===typeof e&&(t=e,e=!1),"boolean"===typeof e&&(i=e),"object"===typeof t&&(s=Object.assign({},ea,t),null!=t.s&&null==t.ss&&(s.ss=t.s-1)),r=na(this,!i,s,n=this.localeData()),i&&(r=n.pastFuture(+this,r)),n.postformat(r)}var aa=Math.abs;function oa(e){return(e>0)-(e<0)||+e}function ua(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,i,s,a,o,u=aa(this._milliseconds)/1e3,c=aa(this._days),l=aa(this._months),d=this.asSeconds();return d?(e=De(u/60),t=De(e/60),u%=60,e%=60,n=De(l/12),l%=12,r=u?u.toFixed(3).replace(/\.?0+$/,""):"",i=d<0?"-":"",s=oa(this._months)!==oa(d)?"-":"",a=oa(this._days)!==oa(d)?"-":"",o=oa(this._milliseconds)!==oa(d)?"-":"",i+"P"+(n?s+n+"Y":"")+(l?s+l+"M":"")+(c?a+c+"D":"")+(t||e||u?"T":"")+(t?o+t+"H":"")+(e?o+e+"M":"")+(u?o+r+"S":"")):"P0D"}var ca=ar.prototype;return ca.isValid=ir,ca.abs=Ss,ca.add=Ts,ca.subtract=Is,ca.as=Ds,ca.asMilliseconds=Ps,ca.asSeconds=Ns,ca.asMinutes=Rs,ca.asHours=Ls,ca.asDays=Ms,ca.asWeeks=Us,ca.asMonths=js,ca.asQuarters=Fs,ca.asYears=Vs,ca.valueOf=Bs,ca._bubble=Cs,ca.clone=Zs,ca.get=qs,ca.milliseconds=Hs,ca.seconds=$s,ca.minutes=Ws,ca.hours=Ys,ca.days=Gs,ca.weeks=Js,ca.months=Ks,ca.years=Qs,ca.humanize=sa,ca.toISOString=ua,ca.toString=ua,ca.toJSON=ua,ca.locale=ai,ca.localeData=ui,ca.toIsoString=I("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ua),ca.lang=oi,V("X",0,0,"unix"),V("x",0,0,"valueOf"),Ee("x",we),Ee("X",Se),Ne("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),Ne("x",(function(e,t,n){n._d=new Date(Oe(e))})),r.version="2.30.1",i(Gn),r.fn=us,r.min=Xn,r.max=er,r.now=tr,r.utc=p,r.unix=cs,r.months=ms,r.isDate=d,r.locale=gn,r.invalid=y,r.duration=xr,r.isMoment=k,r.weekdays=ys,r.parseZone=ls,r.localeData=yn,r.isDuration=or,r.monthsShort=vs,r.weekdaysMin=bs,r.defineLocale=mn,r.updateLocale=vn,r.locales=wn,r.weekdaysShort=ws,r.normalizeUnits=ne,r.relativeTimeRounding=ra,r.relativeTimeThreshold=ia,r.calendarFormat=Br,r.prototype=us,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()},83454:function(e,t,n){"use strict";var r,i;e.exports=(null===(r=n.g.process)||void 0===r?void 0:r.env)&&"object"===typeof(null===(i=n.g.process)||void 0===i?void 0:i.env)?n.g.process:n(77663)},81780:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(7616)}])},48418:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);a=!0);}catch(u){o=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(o)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.default=void 0;var s,a=(s=n(67294))&&s.__esModule?s:{default:s},o=n(76273),u=n(90387),c=n(57190);var l={};function d(e,t,n,r){if(e&&o.isLocalURL(t)){e.prefetch(t,n,r).catch((function(e){0}));var i=r&&"undefined"!==typeof r.locale?r.locale:e&&e.locale;l[t+"%"+n+(i?"%"+i:"")]=!0}}var h=function(e){var t,n=!1!==e.prefetch,r=u.useRouter(),s=a.default.useMemo((function(){var t=i(o.resolveHref(r,e.href,!0),2),n=t[0],s=t[1];return{href:n,as:e.as?o.resolveHref(r,e.as):s||n}}),[r,e.href,e.as]),h=s.href,f=s.as,p=e.children,g=e.replace,m=e.shallow,v=e.scroll,y=e.locale;"string"===typeof p&&(p=a.default.createElement("a",null,p));var w=(t=a.default.Children.only(p))&&"object"===typeof t&&t.ref,b=i(c.useIntersection({rootMargin:"200px"}),2),_=b[0],S=b[1],k=a.default.useCallback((function(e){_(e),w&&("function"===typeof w?w(e):"object"===typeof w&&(w.current=e))}),[w,_]);a.default.useEffect((function(){var e=S&&n&&o.isLocalURL(h),t="undefined"!==typeof y?y:r&&r.locale,i=l[h+"%"+f+(t?"%"+t:"")];e&&!i&&d(r,h,f,{locale:t})}),[f,h,S,y,n,r]);var T={ref:k,onClick:function(e){t.props&&"function"===typeof t.props.onClick&&t.props.onClick(e),e.defaultPrevented||function(e,t,n,r,i,s,a,u){("A"!==e.currentTarget.nodeName.toUpperCase()||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&o.isLocalURL(n))&&(e.preventDefault(),t[i?"replace":"push"](n,r,{shallow:s,locale:u,scroll:a}))}(e,r,h,f,g,m,v,y)},onMouseEnter:function(e){t.props&&"function"===typeof t.props.onMouseEnter&&t.props.onMouseEnter(e),o.isLocalURL(h)&&d(r,h,f,{priority:!0})}};if(e.passHref||"a"===t.type&&!("href"in t.props)){var I="undefined"!==typeof y?y:r&&r.locale,E=r&&r.isLocaleDomain&&o.getDomainLocale(f,I,r&&r.locales,r&&r.domainLocales);T.href=E||o.addBasePath(o.addLocale(f,I,r&&r.defaultLocale))}return a.default.cloneElement(t,T)};t.default=h},57190:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);a=!0);}catch(u){o=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(o)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.useIntersection=function(e){var t=e.rootRef,n=e.rootMargin,r=e.disabled||!o,l=s.useRef(),d=i(s.useState(!1),2),h=d[0],f=d[1],p=i(s.useState(t?t.current:null),2),g=p[0],m=p[1],v=s.useCallback((function(e){l.current&&(l.current(),l.current=void 0),r||h||e&&e.tagName&&(l.current=function(e,t,n){var r=function(e){var t,n={root:e.root||null,margin:e.rootMargin||""},r=c.find((function(e){return e.root===n.root&&e.margin===n.margin}));r?t=u.get(r):(t=u.get(n),c.push(n));if(t)return t;var i=new Map,s=new IntersectionObserver((function(e){e.forEach((function(e){var t=i.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)}))}),e);return u.set(n,t={id:n,observer:s,elements:i}),t}(n),i=r.id,s=r.observer,a=r.elements;return a.set(e,t),s.observe(e),function(){if(a.delete(e),s.unobserve(e),0===a.size){s.disconnect(),u.delete(i);var t=c.findIndex((function(e){return e.root===i.root&&e.margin===i.margin}));t>-1&&c.splice(t,1)}}}(e,(function(e){return e&&f(e)}),{root:g,rootMargin:n}))}),[r,g,n,h]);return s.useEffect((function(){if(!o&&!h){var e=a.requestIdleCallback((function(){return f(!0)}));return function(){return a.cancelIdleCallback(e)}}}),[h]),s.useEffect((function(){t&&m(t.current)}),[t]),[v,h]};var s=n(67294),a=n(9311),o="undefined"!==typeof IntersectionObserver;var u=new Map,c=[]},52513:function(e,t,n){"use strict";n.d(t,{AB:function(){return I},Tq:function(){return C},qZ:function(){return E},ej:function(){return x},ZP:function(){return A}});var r=n(85893),i=(n(67294),n(70737)),s=n.n(i),a=n(21470),o=n.n(a),u=n(93434),c=n.n(u),l=n(26381),d=n.n(l),h=n(71724),f=n.n(h),p=n(32828),g=n.n(p),m=n(90988),v=n.n(m),y=n(41664),w=n(29423),b=n.n(w),_=function(e){var t=e.children,n=e.className,i=e.onClick,s=e.style,a=e.withBorder,o=e.href,u=e.disabled,c=void 0!==u&&u;return o?(0,r.jsx)(y.default,{href:o,children:(0,r.jsx)("a",{onClick:i,disabled:c,className:[b().button,a?null:b().withoutBorder,n].join(" "),style:s,children:t})}):(0,r.jsx)("button",{onClick:i,disabled:c,className:[b().button,a?null:b().withoutBorder,n].join(" "),style:s,children:t})},S=n(25617),k=n(79441),T="secondary",I="home",E="home_white",C="home_bordered",x="no_decoration",A=function(e){var t=e.text,n=e.classNameContainer,i=e.classNameText,a=e.onClick,u=e.type,l=e.color,h=void 0===l?null:l,p=e.path,m=void 0===p?null:p,y=e.classNameIcon,w=e.href,b=e.disabled,A=void 0!==b&&b,D=e.christmas,O=void 0!==D&&D,P=null,N=(0,S.v9)((function(e){return e.user.data.earlyPromo})),R=(0,S.v9)((0,k.OP)()),L=(0,S.v9)((function(e){return e.user.isLogged}));switch(u){case T:P=o();break;case I:P=c();break;case E:P=d();break;case C:P=f();break;case x:P=g();break;case"home_black":P=v();break;default:P=s()}var M=new Date("December 27, 2022 12:00:00 GMT+2:00"),U=new Date("December 28, 2022 12:00:00 GMT+2:00");!R&&L&&U.getTime()>=Date.now()&&(M.getTime()<=Date.now()||N)&&(O=!0);var j=null;return!O||u!==I&&u!==C&&u!==E||(j=(0,r.jsx)("img",{src:"/images/snow-cap.png",alt:"",className:s().snowcap})),(0,r.jsxs)(_,{href:w,style:x===u?{boxShadow:"none",minWidth:"auto"}:{background:h},withBorder:u===T||u===C,onClick:a,disabled:A,className:[P.container,n||null].join(" "),children:[m&&(0,r.jsx)("img",{src:m,alt:"",className:y}),(0,r.jsx)("span",{className:[P.text,i].join(" "),children:t}),j]})}},43948:function(e,t,n){"use strict";var r=n(85893),i=(n(67294),n(25663)),s=n.n(i);t.Z=function(e){var t=e.children,n=e.onClick,i=e.className,a=e.position;return(0,r.jsx)("div",{onClick:n,className:[s().container,i].join(" "),style:{position:null!==a&&void 0!==a?a:"absolute"},children:t})}},41409:function(e,t,n){"use strict";var r=n(85893),i=(n(67294),n(72278)),s=n.n(i);t.Z=function(e){var t=e.size,n=e.text,i=void 0===n?"":n,a=e.type,o=e.dark,u=e.align,c=e.bold,l=e.colorType,d=e.className,h=e.onClick,f=e.h1,p=e.h2,g=e.preLine,m=void 0!==g&&g,v=(e.animation,null);switch(a){case"tiny":v=s().tiny;break;case"verySmall":v=s().verySmall;break;case"small":v=s().small;break;case"subTitle":v=s().subTitle;break;case"title":v=s().title;break;case"bigNormal":v=s().bigNormal;break;case"semiBigTitle":v=s().semiBigTitle;break;case"bigTitle":v=s().bigTitle;break;case"veryBigTitle":v=s().veryBigTitle;break;case"hugeTitle":v=s().hugeTitle;break;default:v=s().normal}var y=null;"left"===u?y=s().alignLeft:"center"===u&&(y=s().alignCenter);var w=null;return"main"===l?w=s().colorMain:"secondary"===l?w=s().colorSecondary:"black"===l?w=s().colorBlack:"whiteOpacity"===l?w=s().whiteOpacity:"lightBlue"===l&&(w=s().lightBlue),(0,r.jsx)(r.Fragment,{children:f?(0,r.jsx)("h1",{className:[v,w,o?s().dark:null,c?s().bold:null,m?s().preLine:null,y,h?s().clickable:null,d].join(" "),style:t?{fontSize:t+"px"}:null,onClick:h,children:i}):p?(0,r.jsx)("h2",{className:[v,w,o?s().dark:null,c?s().bold:null,m?s().preLine:null,y,h?s().clickable:null,d].join(" "),style:t?{fontSize:t+"px"}:null,onClick:h,children:i}):(0,r.jsx)("p",{className:[v,w,o?s().dark:null,c?s().bold:null,m?s().preLine:null,y,h?s().clickable:null,d].join(" "),style:t?{fontSize:t+"px"}:null,onClick:h,children:i})})}},21432:function(e,t,n){"use strict";n.d(t,{oP:function(){return v},rU:function(){return l},Vp:function(){return p},ZP:function(){return y}});var r=n(41409),i=n(85893),s=(n(67294),n(1681)),a=n.n(s),o=n(72278),u=n.n(o),c=n(41664),l=function(e){var t=e.url,n=e.newTab,r=e.text,s=e.type,o=e.colorType,l=e.onClick,d=null;switch(s){case"small":d=u().small;break;case"subTitle":d=u().subTitle;break;case"title":d=u().title;break;case"bigNormal":d=u().bigNormal;break;case"bigTitle":d=u().bigTitle;break;case"hugeTitle":d=u().hugeTitle;break;default:d=u().normal}var h=u().colorMain;return"black"===o&&(h=u().colorBlack),t?(0,i.jsx)(c.default,{href:t,children:(0,i.jsx)("a",{onClick:l,className:[a().link,d,h].join(" "),target:n?"_blank":"_self",rel:n?"noreferrer":null,children:r})}):(0,i.jsx)("a",{className:[a().link,d,h].join(" "),onClick:l,children:r})},d=n(45218),h=n.n(d);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){return(0,i.jsx)(r.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}({},e,{className:[h().tag,e.className].join(" ")}))},g=n(37792),m=n.n(g),v=function(e){var t=e.fixed,n=void 0!==t&&t;return(0,i.jsxs)("div",{className:[m().container,n?m().fixedContainer:null].join(" "),children:[(0,i.jsx)("img",{src:"/icons/certificate".concat(n?"-white":"",".svg"),alt:"certification icon"}),(0,i.jsx)(r.Z,{dark:n,className:[m().text,n?m().fixedText:null].join(" "),text:(0,i.jsxs)(i.Fragment,{children:["With ",(0,i.jsx)("b",{children:"Certificate"})]}),type:"small"})]})},y=r.Z},17312:function(e,t,n){"use strict";n.d(t,{T5:function(){return i},W5:function(){return s},yd:function(){return a},tH:function(){return o},Qv:function(){return u}});var r=n(75475),i=4,s=3,a="-rehearsal",o=function(e){return"js"===e?"javascript":"sqlite"===e?"sql":e},u=function(e){var t=(0,r.eQ)(e);return"js"===t?"javascript":"py"===t?"python":t}},7616:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return jt}});var r=n(85893),i=(n(20472),n(40993),n(77236)),s=n(89569),a=n(69487),o=n(56743),u=n(64306),c=n(45679),l=n(40740),d=n(80027),h=n(23382),f=n(54549),p=n(240),g=n(65524),m=n(4040),v=n(97986),y=(0,s.UY)({courses:a.ZP,course:o.ZP,lesson:u.ZP,user:c.ZP,userProgress:d.ZP,task:h.ZP,blog:f.ZP,leaderboard:p.ZP,userDialogs:l.ZP,billing:g.ZP,challenges:m.ZP,roadmaps:v.ZP}),w=(0,i.xC)({reducer:y}),b=n(25617),_=n(67294),S=n(27640),k=n(11163),T=n(57919),I=n(34051),E=n.n(I),C=n(186),x=n(25816),A=n(53333),D=n(74444),O=n(8463);let P,N;const R=new WeakMap,L=new WeakMap,M=new WeakMap,U=new WeakMap,j=new WeakMap;let F={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return L.get(e);if("objectStoreNames"===t)return e.objectStoreNames||M.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Z(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function V(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(N||(N=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(q(this),t),Z(R.get(this))}:function(...t){return Z(e.apply(q(this),t))}:function(t,...n){const r=e.call(q(this),t,...n);return M.set(r,t.sort?t.sort():[t]),Z(r)}}function B(e){return"function"===typeof e?V(e):(e instanceof IDBTransaction&&function(e){if(L.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));L.set(e,t)}(e),t=e,(P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,F):e);var t}function Z(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Z(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&R.set(t,e)})).catch((()=>{})),j.set(t,e),t}(e);if(U.has(e))return U.get(e);const t=B(e);return t!==e&&(U.set(e,t),j.set(t,e)),t}const q=e=>j.get(e);const z=["get","getKey","getAll","getAllKeys","count"],H=["put","add","delete","clear"],$=new Map;function W(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if($.get(t))return $.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=H.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!z.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let a=s.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&s.done]))[0]};return $.set(t,s),s}F=(e=>({...e,get:(t,n,r)=>W(t,n)||e.get(t,n,r),has:(t,n)=>!!W(t,n)||e.has(t,n)}))(F);const Y="@firebase/installations",G="0.6.4",K=1e4,Q="w:0.6.4",J="FIS_v2",X=36e5,ee={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},te=new D.LL("installations","Installations",ee);function ne(e){return e instanceof D.ZR&&e.code.includes("request-failed")}function re({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function ie(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function se(e,t){const n=(await t.json()).error;return te.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function ae({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function oe(e,{refreshToken:t}){const n=ae(e);return n.append("Authorization",function(e){return`FIS_v2 ${e}`}(t)),n}async function ue(e){const t=await e();return t.status>=500&&t.status<600?e():t}function ce(e){return new Promise((t=>{setTimeout(t,e)}))}const le=/^[cdef][\w-]{21}$/;function de(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return le.test(t)?t:""}catch(e){return""}}function he(e){return`${e.appName}!${e.appId}`}const fe=new Map;function pe(e,t){const n=he(e);ge(n,t),function(e,t){const n=ve();n&&n.postMessage({key:e,fid:t});ye()}(n,t)}function ge(e,t){const n=fe.get(e);if(n)for(const r of n)r(t)}let me=null;function ve(){return!me&&"BroadcastChannel"in self&&(me=new BroadcastChannel("[Firebase] FID Change"),me.onmessage=e=>{ge(e.data.key,e.data.fid)}),me}function ye(){0===fe.size&&me&&(me.close(),me=null)}const we="firebase-installations-store";let be=null;function _e(){return be||(be=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(e,t),o=Z(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(Z(a.result),e.oldVersion,e.newVersion,Z(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),o.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),o}("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(we)}})),be}async function Se(e,t){const n=he(e),r=(await _e()).transaction(we,"readwrite"),i=r.objectStore(we),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||pe(e,t.fid),t}async function ke(e){const t=he(e),n=(await _e()).transaction(we,"readwrite");await n.objectStore(we).delete(t),await n.done}async function Te(e,t){const n=he(e),r=(await _e()).transaction(we,"readwrite"),i=r.objectStore(we),s=await i.get(n),a=t(s);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||s&&s.fid===a.fid||pe(e,a.fid),a}async function Ie(e){let t;const n=await Te(e.appConfig,(n=>{const r=function(e){return xe(e||{fid:de(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(te.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=re(e),i=ae(e),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const a={fid:n,authVersion:J,appId:e.appId,sdkVersion:Q},o={method:"POST",headers:i,body:JSON.stringify(a)},u=await ue((()=>fetch(r,o)));if(u.ok){const e=await u.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:ie(e.authToken)}}throw await se("Create Installation",u)}(e,t);return Se(e.appConfig,n)}catch(n){throw ne(n)&&409===n.customData.serverCode?await ke(e.appConfig):await Se(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Ee(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Ee(e){let t=await Ce(e.appConfig);for(;1===t.registrationStatus;)await ce(100),t=await Ce(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Ie(e);return n||t}return t}function Ce(e){return Te(e,(e=>{if(!e)throw te.create("installation-not-found");return xe(e)}))}function xe(e){return 1===(t=e).registrationStatus&&t.registrationTime+K<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Ae({appConfig:e,heartbeatServiceProvider:t},n){const r=function(e,{fid:t}){return`${re(e)}/${t}/authTokens:generate`}(e,n),i=oe(e,n),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const a={installation:{sdkVersion:Q,appId:e.appId}},o={method:"POST",headers:i,body:JSON.stringify(a)},u=await ue((()=>fetch(r,o)));if(u.ok){return ie(await u.json())}throw await se("Generate Auth Token",u)}async function De(e,t=!1){let n;const r=await Te(e.appConfig,(r=>{if(!Pe(r))throw te.create("not-registered");const i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+X}(e)}(i))return r;if(1===i.requestStatus)return n=async function(e,t){let n=await Oe(e.appConfig);for(;1===n.authToken.requestStatus;)await ce(100),n=await Oe(e.appConfig);const r=n.authToken;return 0===r.requestStatus?De(e,t):r}(e,t),r;{if(!navigator.onLine)throw te.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return n=async function(e,t){try{const n=await Ae(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Se(e.appConfig,r),n}catch(n){if(!ne(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Se(e.appConfig,n)}else await ke(e.appConfig);throw n}}(e,t),t}}));return n?await n:r.authToken}function Oe(e){return Te(e,(e=>{if(!Pe(e))throw te.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+K<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function Pe(e){return void 0!==e&&2===e.registrationStatus}async function Ne(e,t=!1){const n=e;await async function(e){const{registrationPromise:t}=await Ie(e);t&&await t}(n);return(await De(n,t)).token}function Re(e){return te.create("missing-app-config-values",{valueName:e})}const Le="installations",Me=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Re("App Configuration");if(!e.name)throw Re("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Re(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:(0,x.qX)(t,"heartbeat"),_delete:()=>Promise.resolve()}},Ue=e=>{const t=e.getProvider("app").getImmediate(),n=(0,x.qX)(t,Le).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await Ie(t);return r?r.catch(console.error):De(t).catch(console.error),n.fid}(n),getToken:e=>Ne(n,e)}};(0,x.Xd)(new O.wA(Le,Me,"PUBLIC")),(0,x.Xd)(new O.wA("installations-internal",Ue,"PRIVATE")),(0,x.KN)(Y,G),(0,x.KN)(Y,G,"esm2017");const je="analytics",Fe="https://www.googletagmanager.com/gtag/js",Ve=new A.Yd("@firebase/analytics"),Be={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ze=new D.LL("analytics","Analytics",Be);function qe(e){if(!e.startsWith(Fe)){const t=Ze.create("invalid-gtag-resource",{gtagURL:e});return Ve.warn(t.message),""}return e}function ze(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function He(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:qe}),r=document.createElement("script"),i=`${Fe}?l=${e}&id=${t}`;r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function $e(e,t,n,r){return async function(i,...s){try{if("event"===i){const[r,i]=s;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await ze(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(s){Ve.error(s)}}(e,t,n,r,i)}else if("config"===i){const[i,a]=s;await async function(e,t,n,r,i,s){const a=r[i];try{if(a)await t[a];else{const e=(await ze(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(o){Ve.error(o)}e("config",i,s)}(e,t,n,r,i,a)}else if("consent"===i){const[t]=s;e("consent","update",t)}else if("get"===i){const[t,n,r]=s;e("get",t,n,r)}else if("set"===i){const[t]=s;e("set",t)}else e(i,...s)}catch(a){Ve.error(a)}}}const We=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Ye(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Ge(e,t=We,n){const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw Ze.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Ze.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new Qe;return setTimeout((async()=>{o.abort()}),void 0!==n?n:6e4),Ke({appId:r,apiKey:i,measurementId:s},a,o,t)}async function Ke(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=We){var s;const{appId:a,measurementId:o}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(Ze.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(r,t)}catch(u){if(o)return Ve.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${null===u||void 0===u?void 0:u.message}]`),{appId:a,measurementId:o};throw u}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:Ye(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(s,i);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(o){}throw Ze.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return i.deleteThrottleMetadata(a),t}catch(u){const t=u;if(!function(e){if(!(e instanceof D.ZR)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(i.deleteThrottleMetadata(a),o)return Ve.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${null===t||void 0===t?void 0:t.message}]`),{appId:a,measurementId:o};throw u}const c=503===Number(null===(s=null===t||void 0===t?void 0:t.customData)||void 0===s?void 0:s.httpStatus)?(0,D.$s)(n,i.intervalMillis,30):(0,D.$s)(n,i.intervalMillis),l={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return i.setThrottleMetadata(a,l),Ve.debug(`Calling attemptFetch again in ${c} millis`),Ke(e,l,r,i)}}class Qe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Je,Xe;function et(e){Xe=e}function tt(e){Je=e}async function nt(e,t,n,r,i,s,a){var o;const u=Ge(e);u.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Ve.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>Ve.error(e))),t.push(u);const c=async function(){if(!(0,D.hl)())return Ve.warn(Ze.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await(0,D.eu)()}catch(e){return Ve.warn(Ze.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[l,d]=await Promise.all([u,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Fe)&&n.src.includes(e))return n;return null})(s)||He(s,l.measurementId),Xe&&(i("consent","default",Xe),et(void 0)),i("js",new Date);const h=null!==(o=null===a||void 0===a?void 0:a.config)&&void 0!==o?o:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),i("config",l.measurementId,h),Je&&(i("set",Je),tt(void 0)),l.measurementId}class rt{constructor(e){this.app=e}_delete(){return delete it[this.app.options.appId],Promise.resolve()}}let it={},st=[];const at={};let ot,ut,ct="dataLayer",lt="gtag",dt=!1;function ht(e,t,n){!function(){const e=[];if((0,D.ru)()&&e.push("This is a browser extension environment."),(0,D.zI)()||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=Ze.create("invalid-analytics-context",{errorInfo:t});Ve.warn(n.message)}}();const r=e.options.appId;if(!r)throw Ze.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Ze.create("no-api-key");Ve.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=it[r])throw Ze.create("already-exists",{id:r});if(!dt){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(ct);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(...e){window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=$e(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(it,st,at,ct,lt);ut=e,ot=t,dt=!0}it[r]=nt(e,st,at,t,ot,ct,n);return new rt(e)}function ft(e=(0,x.Mq)()){e=(0,D.m9)(e);const t=(0,x.qX)(e,je);return t.isInitialized()?t.getImmediate():function(e,t={}){const n=(0,x.qX)(e,je);if(n.isInitialized()){const e=n.getImmediate();if((0,D.vZ)(t,n.getOptions()))return e;throw Ze.create("already-initialized")}return n.initialize({options:t})}(e)}function pt(e,t,n){e=(0,D.m9)(e),async function(e,t,n,r){if(r&&r.global)return e("set",{user_id:n}),Promise.resolve();e("config",await t,{update:!0,user_id:n})}(ut,it[e.app.options.appId],t,n).catch((e=>Ve.error(e)))}function gt(e,t,n,r){e=(0,D.m9)(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(ut,it[e.app.options.appId],t,n,r).catch((e=>Ve.error(e)))}const mt="@firebase/analytics",vt="0.10.0";function yt(e,t,n,r,i,s,a){try{var o=e[s](a),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(r,i)}(0,x.Xd)(new O.wA(je,((e,{options:t})=>ht(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),(0,x.Xd)(new O.wA("analytics-internal",(function(e){try{const t=e.getProvider(je).getImmediate();return{logEvent:(e,n,r)=>gt(t,e,n,r)}}catch(t){throw Ze.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),(0,x.KN)(mt,vt),(0,x.KN)(mt,vt,"esm2017");var wt,bt,_t,St=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};wt=St,bt="setUid",_t=function(){var e,t=(e=E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.uid,pt(ft((0,C.gV)()),n);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){yt(s,r,i,a,o,"next",e)}function o(e){yt(s,r,i,a,o,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),bt in wt?Object.defineProperty(wt,bt,{value:_t,enumerable:!0,configurable:!0,writable:!0}):wt[bt]=_t;var kt=n(47246),Tt=function(){var e=(0,_.useState)(null),t=e[0],n=e[1],i=(0,b.I0)(),s=(0,k.useRouter)();return(0,_.useEffect)((function(){S.Z.setAuthChangeListener((function(e){i((0,c.BT)(e)),(null===e||void 0===e?void 0:e.uid)?(n(e.uid),St.setUid({uid:e.uid}),kt.Z.saveIsLogged(2)):kt.Z.saveIsLogged(1)}))}),[i]),(0,_.useEffect)((function(){var e=s.query,n=null;return t&&(void 0!==e.courseId&&void 0!==e.lessonId||void 0!==e.challengeId)&&(n=T.Z.listenToUser(t,(function(){i((0,c.Vs)())}))),function(){n&&n()}}),[s.query,i,t]),(0,r.jsx)(r.Fragment,{})},It=n(40782),Et=n(77091),Ct=n(1785),xt=n.n(Ct),At=n(83994),Dt=n.n(At),Ot=n(43948),Pt=n(52513),Nt=function(){var e=(0,_.useState)(null),t=e[0],n=e[1],i=(0,_.useState)(!0),s=i[0],a=i[1],o=(0,k.useRouter)().query.ref;return(0,_.useEffect)((function(){void 0!==o&&T.Z.getRefInfo(o).then((function(e){return n(e)}))}),[o]),void 0!==o&&null!==t&&s?(0,r.jsx)(Ot.Z,{onClick:function(){return a(!1)},children:(0,r.jsxs)("div",{onClick:function(e){return e.stopPropagation()},className:Dt().container,children:[(0,r.jsx)("img",{src:t.imagePath,alt:"",className:Dt().image}),(0,r.jsx)("p",{className:Dt().title,children:t.title}),(0,r.jsx)("p",{className:Dt().desc,children:t.desc}),(0,r.jsx)(Pt.ZP,{text:"CLOSE",type:Pt.ej,onClick:function(){return a(!1)}})]})}):null},Rt=n(74865),Lt=n.n(Rt);function Mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Mt(e,t,n[t])}))}return e}k.default.onRouteChangeStart=function(e){Lt().start()},k.default.onRouteChangeComplete=function(){return Lt().done()},k.default.onRouteChangeError=function(){return Lt().done()};var jt=function(e){var t=e.Component,n=e.pageProps,i=(0,k.useRouter)();return(0,_.useEffect)((function(){var e=function(e){Et.Z.pageView(e);var t=e.split("?")[1];if(void 0!==t){var n={};t.split("&").forEach((function(e){var t=e.split("=");n[t[0]]=t[1]})),n.from&&(localStorage.setItem("from",n.from),Et.Z.userProperties({from:n.from})),n.ref&&(localStorage.setItem("ref",n.ref),Et.Z.userProperties({ref:n.ref}))}};return e(null===i||void 0===i?void 0:i.asPath),i.events.on("routeChangeComplete",e),function(){i.events.off("routeChangeComplete",e)}}),[i.events,null===i||void 0===i?void 0:i.asPath]),(0,_.useEffect)((function(){xt().initialize({gtmId:"GTM-WD34SDN"})}),[]),(0,r.jsxs)(b.zt,{store:w,children:[(0,r.jsx)(Tt,{}),(0,r.jsx)(Nt,{}),(0,r.jsx)(It.Ix,{pauseOnHover:!1}),(0,r.jsx)(t,Ut({},n))]})}},77091:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return i}});var i=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};r(i,"event",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=i;void 0!==t&&(s.event_category=t),void 0!==n&&(s.event_label=n),void 0!==r&&(s.value=r),window.gtag("event",e,s)})),r(i,"setUser",(function(e){window.gtag("config","G-TZLB4EWQE3",{user_id:e})})),r(i,"pageView",(function(e){window.gtag("config","G-TZLB4EWQE3",{page_path:e})})),r(i,"userProperties",(function(e){gtag("set","user_properties",e)}))},49356:function(e,t,n){"use strict";var r=n(9669),i=n.n(r);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};s(a,"API_BASE_URL","https://compile-api-vxtgmew4cq-uc.a.run.app/api/v1"),s(a,"postChallenge",(function(e,t){return i().post(a.API_BASE_URL+"/compile/challenge",e,{headers:{Authorization:t}})})),s(a,"postChallengeWithContext",(function(e,t){return i().post(a.API_BASE_URL+"/compile/challengeFromContext",e,{headers:{Authorization:t}})})),s(a,"postChallengeMultiFile",(function(e,t){return i().post(a.API_BASE_URL+"/compile/challengeMultiFile",e,{headers:{Authorization:t}})})),s(a,"postChallengeMultiFileWithContext",(function(e,t){return i().post(a.API_BASE_URL+"/compile/challengeMultiFileFromContext",e,{headers:{Authorization:t}})})),s(a,"getChallengeSubmissions",(function(e,t,n){return i().get(a.API_BASE_URL+"/submissions/context?"+"courseId=".concat(t,"&")+"lessonId=".concat(n),{headers:{Authorization:e}})})),s(a,"getLastSubmissions",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return void 0===t?i().get(a.API_BASE_URL+"/submissions/?limit=".concat(n),{headers:{Authorization:e}}):i().get(a.API_BASE_URL+"/submissions/?"+"limit=".concat(n,"&startDate=").concat(t.toISOString().replace("Z","")),{headers:{Authorization:e}})}))},27640:function(e,t,n){"use strict";n.d(t,{Z:function(){return On}});var r=n(34051),i=n.n(r),s=n(74444),a=n(25816),o=n(97582),u=n(53333),c=n(8463);function l(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const d=l,h=new s.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),f="auth/email-already-in-use",p="auth/popup-closed-by-user",g=new u.Yd("@firebase/auth");function m(e,...t){g.logLevel<=u.in.ERROR&&g.error(`Auth (${a.Jn}): ${e}`,...t)}function v(e,...t){throw _(e,...t)}function y(e,...t){return _(e,...t)}function w(e,t,n){const r=Object.assign(Object.assign({},d()),{[t]:n});return new s.LL("auth","Firebase",r).create(t,{appName:e.name})}function b(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&v(e,"argument-error"),w(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _(e,...t){if("string"!==typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return h.create(e,...t)}function S(e,t,...n){if(!e)throw _(t,...n)}function k(e){const t="INTERNAL ASSERTION FAILED: "+e;throw m(t),new Error(t)}function T(e,t){e||k(t)}function I(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function E(){return"http:"===C()||"https:"===C()}function C(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class x{constructor(e,t){this.shortDelay=e,this.longDelay=t,T(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,s.uI)()||(0,s.b$)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(E()||(0,s.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function A(e,t){T(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class D{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void k("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void k("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void k("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const O={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},P=new x(3e4,6e4);function N(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function R(e,t,n,r,i={}){return L(e,i,(async()=>{let i={},a={};r&&("GET"===t?a=r:i={body:JSON.stringify(r)});const o=(0,s.xO)(Object.assign({key:e.config.apiKey},a)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),D.fetch()(U(e,e.config.apiHost,n,o),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},i))}))}async function L(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},O),t);try{const t=new j(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw F(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw F(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw F(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw F(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw w(e,o,a);v(e,o)}}catch(i){if(i instanceof s.ZR)throw i;v(e,"network-request-failed",{message:String(i)})}}async function M(e,t,n,r,i={}){const s=await R(e,t,n,r,i);return"mfaPendingCredential"in s&&v(e,"multi-factor-auth-required",{_serverResponse:s}),s}function U(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?A(e.config,i):`${e.config.apiScheme}://${i}`}class j{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(y(this.auth,"network-request-failed"))),P.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function F(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=y(e,t,r);return i.customData._tokenResponse=n,i}function V(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function B(e){return 1e3*Number(e)}function Z(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return m("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,s.tV)(n);return e?JSON.parse(e):(m("Failed to decode base64 JWT payload"),null)}catch(i){return m("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function q(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof s.ZR&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}class z{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class H{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=V(this.lastLoginAt),this.creationTime=V(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function $(e){var t;const n=e.auth,r=await e.getIdToken(),i=await q(e,async function(e,t){return R(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));S(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=(0,o._T)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const u=(c=e.providerData,l=a,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const d=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===u||void 0===u?void 0:u.length),f=!!d&&h,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new H(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(e,p)}class W{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){S(e.idToken,"internal-error"),S("undefined"!==typeof e.idToken,"internal-error"),S("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Z(e);return S(t,"internal-error"),S("undefined"!==typeof t.exp,"internal-error"),S("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return S(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await L(e,{},(async()=>{const n=(0,s.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=U(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",D.fetch()(a,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new W;return n&&(S("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(S("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(S("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new W,this.toJSON())}_performRefresh(){return k("not implemented")}}function Y(e,t){S("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class G{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=(0,o._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new z(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new H(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await q(this,this.stsTokenManager.getToken(this.auth,e));return S(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=(0,s.m9)(e),r=await n.getIdToken(t),i=Z(r);S(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a="object"===typeof i.firebase?i.firebase:void 0,o=null===a||void 0===a?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:V(B(i.auth_time)),issuedAtTime:V(B(i.iat)),expirationTime:V(B(i.exp)),signInProvider:o||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,s.m9)(e);await $(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(S(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new G(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){S(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await $(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await q(this,async function(e,t){return R(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,u,c;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,m=null!==(u=t.createdAt)&&void 0!==u?u:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:k}=t;S(y&&k,e,"internal-error");const T=W.fromJSON(this.name,k);S("string"===typeof y,e,"internal-error"),Y(l,e.name),Y(d,e.name),S("boolean"===typeof w,e,"internal-error"),S("boolean"===typeof b,e,"internal-error"),Y(h,e.name),Y(f,e.name),Y(p,e.name),Y(g,e.name),Y(m,e.name),Y(v,e.name);const I=new G({uid:y,auth:e,email:d,emailVerified:w,displayName:l,isAnonymous:b,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:T,createdAt:m,lastLoginAt:v});return _&&Array.isArray(_)&&(I.providerData=_.map((e=>Object.assign({},e)))),g&&(I._redirectEventId=g),I}static async _fromIdTokenResponse(e,t,n=!1){const r=new W;r.updateFromServerResponse(t);const i=new G({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await $(i),i}}const K=new Map;function Q(e){T(e instanceof Function,"Expected a class definition");let t=K.get(e);return t?(T(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,K.set(e,t),t)}class J{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}J.type="NONE";const X=J;function ee(e,t,n){return`firebase:${e}:${t}:${n}`}class te{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=ee(this.userKey,r.apiKey,i),this.fullPersistenceKey=ee("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?G._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new te(Q(X),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Q(X);const s=ee(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){const n=G._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(u){}const o=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(u){}}))),new te(i,e,n)):new te(i,e,n)}}function ne(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ae(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(re(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ue(t))return"Blackberry";if(ce(t))return"Webos";if(ie(t))return"Safari";if((t.includes("chrome/")||se(t))&&!t.includes("edge/"))return"Chrome";if(oe(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function re(e=(0,s.z$)()){return/firefox\//i.test(e)}function ie(e=(0,s.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function se(e=(0,s.z$)()){return/crios\//i.test(e)}function ae(e=(0,s.z$)()){return/iemobile/i.test(e)}function oe(e=(0,s.z$)()){return/android/i.test(e)}function ue(e=(0,s.z$)()){return/blackberry/i.test(e)}function ce(e=(0,s.z$)()){return/webos/i.test(e)}function le(e=(0,s.z$)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function de(e=(0,s.z$)()){return le(e)||oe(e)||ce(e)||ue(e)||/windows phone/i.test(e)||ae(e)}function he(e,t=[]){let n;switch(e){case"Browser":n=ne((0,s.z$)());break;case"Worker":n=`${ne((0,s.z$)())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${a.Jn}/${r}`}async function fe(e,t){return R(e,"GET","/v2/recaptchaConfig",N(e,t))}function pe(e){return void 0!==e&&void 0!==e.enterprise}class ge{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}function me(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=y("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function ve(e){return`__${e}${Math.floor(1e6*Math.random())}`}class ye{constructor(e){this.type="recaptcha-enterprise",this.auth=Se(e)}async verify(e="verify",t=!1){function n(t,n,r){const i=window.grecaptcha;pe(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{fe(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new ge(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&pe(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));me("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function we(e,t,n,r=!1){const i=new ye(e);let s;try{s=await i.verify(n)}catch(o){s=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}class be{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class _e{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ke(this),this.idTokenSubscription=new ke(this),this.beforeStateQueue=new be(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Q(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await te.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return S(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?(0,s.m9)(e):null;return t&&S(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&S(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Q(e))}))}async initializeRecaptchaConfig(){const e=await fe(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new ge(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new ye(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new s.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Q(e)||this._popupRedirectResolver;S(t,this,"argument-error"),this.redirectPersistenceManager=await te.create(this,[Q(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return S(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return S(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=he(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e,...t){g.logLevel<=u.in.WARN&&g.warn(`Auth (${a.Jn}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Se(e){return(0,s.m9)(e)}class ke{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,s.ne)((e=>this.observer=e))}get next(){return S(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Te(e,t,n){const r=Se(e);S(r._canInitEmulator,r,"emulator-config-failed"),S(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Ie(t),{host:a,port:o}=function(e){const t=Ie(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Ee(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ee(t)}}}(t),u=null===o?"":`:${o}`;r.config.emulator={url:`${s}//${a}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ie(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ee(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ce{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return k("not implemented")}_getIdTokenResponse(e){return k("not implemented")}_linkToIdToken(e,t){return k("not implemented")}_getReauthenticationResolver(e){return k("not implemented")}}async function xe(e,t){return R(e,"POST","/v1/accounts:update",t)}async function Ae(e,t){return M(e,"POST","/v1/accounts:signInWithPassword",N(e,t))}async function De(e,t){return R(e,"POST","/v1/accounts:sendOobCode",N(e,t))}async function Oe(e,t){return De(e,t)}class Pe extends Ce{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Pe(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Pe(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await we(e,n,"signInWithPassword");return Ae(e,t)}return Ae(e,n).catch((async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await we(e,n,"signInWithPassword");return Ae(e,t)}return Promise.reject(t)}));case"emailLink":return async function(e,t){return M(e,"POST","/v1/accounts:signInWithEmailLink",N(e,t))}(e,{email:this._email,oobCode:this._password});default:v(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return xe(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return M(e,"POST","/v1/accounts:signInWithEmailLink",N(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:v(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ne(e,t){return M(e,"POST","/v1/accounts:signInWithIdp",N(e,t))}class Re extends Ce{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Re(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):v("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=(0,o._T)(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Re(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Ne(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ne(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ne(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,s.xO)(t)}return e}}const Le={USER_NOT_FOUND:"user-not-found"};class Me extends Ce{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Me({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Me({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return M(e,"POST","/v1/accounts:signInWithPhoneNumber",N(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await M(e,"POST","/v1/accounts:signInWithPhoneNumber",N(e,t));if(n.temporaryProof)throw F(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return M(e,"POST","/v1/accounts:signInWithPhoneNumber",N(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Le)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Me({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Ue{constructor(e){var t,n,r,i,a,o;const u=(0,s.zd)((0,s.pd)(e)),c=null!==(t=u.apiKey)&&void 0!==t?t:null,l=null!==(n=u.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=u.mode)&&void 0!==r?r:null);S(c&&l&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=l,this.continueUrl=null!==(i=u.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(a=u.languageCode)&&void 0!==a?a:null,this.tenantId=null!==(o=u.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=(0,s.zd)((0,s.pd)(e)).link,n=t?(0,s.zd)((0,s.pd)(t)).deep_link_id:null,r=(0,s.zd)((0,s.pd)(e)).deep_link_id;return(r?(0,s.zd)((0,s.pd)(r)).link:null)||r||n||t||e}(e);try{return new Ue(t)}catch(n){return null}}}class je{constructor(){this.providerId=je.PROVIDER_ID}static credential(e,t){return Pe._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ue.parseLink(t);return S(n,"argument-error"),Pe._fromEmailAndCode(e,n.code,n.tenantId)}}je.PROVIDER_ID="password",je.EMAIL_PASSWORD_SIGN_IN_METHOD="password",je.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Fe{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ve extends Fe{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Be extends Ve{constructor(){super("facebook.com")}static credential(e){return Re._fromParams({providerId:Be.PROVIDER_ID,signInMethod:Be.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Be.credentialFromTaggedObject(e)}static credentialFromError(e){return Be.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Be.credential(e.oauthAccessToken)}catch(t){return null}}}Be.FACEBOOK_SIGN_IN_METHOD="facebook.com",Be.PROVIDER_ID="facebook.com";class Ze extends Ve{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Re._fromParams({providerId:Ze.PROVIDER_ID,signInMethod:Ze.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ze.credentialFromTaggedObject(e)}static credentialFromError(e){return Ze.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ze.credential(t,n)}catch(r){return null}}}Ze.GOOGLE_SIGN_IN_METHOD="google.com",Ze.PROVIDER_ID="google.com";class qe extends Ve{constructor(){super("github.com")}static credential(e){return Re._fromParams({providerId:qe.PROVIDER_ID,signInMethod:qe.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qe.credentialFromTaggedObject(e)}static credentialFromError(e){return qe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return qe.credential(e.oauthAccessToken)}catch(t){return null}}}qe.GITHUB_SIGN_IN_METHOD="github.com",qe.PROVIDER_ID="github.com";class ze extends Ve{constructor(){super("twitter.com")}static credential(e,t){return Re._fromParams({providerId:ze.PROVIDER_ID,signInMethod:ze.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ze.credentialFromTaggedObject(e)}static credentialFromError(e){return ze.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return ze.credential(t,n)}catch(r){return null}}}async function He(e,t){return M(e,"POST","/v1/accounts:signUp",N(e,t))}ze.TWITTER_SIGN_IN_METHOD="twitter.com",ze.PROVIDER_ID="twitter.com";class $e{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await G._fromIdTokenResponse(e,n,r),s=We(n);return new $e({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=We(n);return new $e({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function We(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ye extends s.ZR{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ye.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ye(e,t,n,r)}}function Ge(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Ye._fromErrorAndOperation(e,n,t,r);throw n}))}async function Ke(e,t,n=!1){const r=await q(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return $e._forOperation(e,"link",r)}async function Qe(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await q(e,Ge(r,i,t,e),n);S(s.idToken,r,"internal-error");const a=Z(s.idToken);S(a,r,"internal-error");const{sub:o}=a;return S(e.uid===o,r,"user-mismatch"),$e._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null===s||void 0===s?void 0:s.code)&&v(r,"user-mismatch"),s}}async function Je(e,t,n=!1){const r="signIn",i=await Ge(e,r,t),s=await $e._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Xe(e,t){return Je(Se(e),t)}function et(e,t,n){var r;S((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),S("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(S(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(S(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function tt(e,t,n){var r;const i=Se(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await we(i,s,"getOobCode",!0);n&&et(i,e,n),await Oe(i,e)}else n&&et(i,s,n),await Oe(i,s).catch((async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const e=await we(i,s,"getOobCode",!0);n&&et(i,e,n),await Oe(i,e)}}))}async function nt(e,t,n){var r;const i=Se(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let a;if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await we(i,s,"signUpPassword");a=He(i,e)}else a=He(i,s).catch((async e=>{if("auth/missing-recaptcha-token"===e.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await we(i,s,"signUpPassword");return He(i,e)}return Promise.reject(e)}));const o=await a.catch((e=>Promise.reject(e))),u=await $e._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(u.user),u}function rt(e,t,n){return Xe((0,s.m9)(e),je.credential(t,n))}async function it(e,t){const n=(0,s.m9)(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&et(n.auth,r,t);const{email:i}=await async function(e,t){return De(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function st(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=(0,s.m9)(e),i={idToken:await r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},a=await q(r,async function(e,t){return R(e,"POST","/v1/accounts:update",t)}(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const o=r.providerData.find((({providerId:e})=>"password"===e));o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}new WeakMap;const at="__sak";class ot{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(at,"1"),this.storage.removeItem(at),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ut extends ot{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,s.z$)();return ie(e)||le(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=de(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,s.w1)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ut.type="LOCAL";const ct=ut;class lt extends ot{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lt.type="SESSION";const dt=lt;class ht{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new ht(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map((async e=>e(t.origin,i))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ft(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ht.receivers=[];class pt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((a,o)=>{const u=ft("",20);r.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===u)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function gt(){return window}function mt(){return"undefined"!==typeof gt().WorkerGlobalScope&&"function"===typeof gt().importScripts}const vt="firebaseLocalStorageDb",yt="firebaseLocalStorage",wt="fbase_key";class bt{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function _t(e,t){return e.transaction([yt],t?"readwrite":"readonly").objectStore(yt)}function St(){const e=indexedDB.open(vt,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(yt,{keyPath:wt})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(yt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(vt);return new bt(e).toPromise()}(),t(await St()))}))}))}async function kt(e,t,n){const r=_t(e,!0).put({[wt]:t,value:n});return new bt(r).toPromise()}function Tt(e,t){const n=_t(e,!0).delete(t);return new bt(n).toPromise()}class It{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await St()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mt()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ht._getInstance(mt()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new pt(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await St();return await kt(e,at,"1"),await Tt(e,at),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>kt(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=_t(e,!1).get(t),r=await new bt(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Tt(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=_t(e,!1).getAll();return new bt(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}It.type="LOCAL";const Et=It;ve("rcb"),new x(3e4,6e4);const Ct="recaptcha";async function xt(e,t,n){var r;const i=await n.verify();try{let s;if(S("string"===typeof i,e,"argument-error"),S(n.type===Ct,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){S("enroll"===t.type,e,"internal-error");const n=await function(e,t){return R(e,"POST","/v2/accounts/mfaEnrollment:start",N(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{S("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;S(n,e,"missing-multi-factor-info");const a=await function(e,t){return R(e,"POST","/v2/accounts/mfaSignIn:start",N(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return R(e,"POST","/v1/accounts:sendVerificationCode",N(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class At{constructor(e){this.providerId=At.PROVIDER_ID,this.auth=Se(e)}verifyPhoneNumber(e,t){return xt(this.auth,e,(0,s.m9)(t))}static credential(e,t){return Me._fromVerification(e,t)}static credentialFromResult(e){const t=e;return At.credentialFromTaggedObject(t)}static credentialFromError(e){return At.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Me._fromTokenResponse(t,n):null}}function Dt(e,t){return t?Q(t):(S(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}At.PROVIDER_ID="phone",At.PHONE_SIGN_IN_METHOD="phone";class Ot extends Ce{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ne(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ne(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ne(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Pt(e){return Je(e.auth,new Ot(e),e.bypassAuthState)}function Nt(e){const{auth:t,user:n}=e;return S(n,t,"internal-error"),Qe(n,new Ot(e),e.bypassAuthState)}async function Rt(e){const{auth:t,user:n}=e;return S(n,t,"internal-error"),Ke(n,new Ot(e),e.bypassAuthState)}class Lt{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Pt;case"linkViaPopup":case"linkViaRedirect":return Rt;case"reauthViaPopup":case"reauthViaRedirect":return Nt;default:v(this.auth,"internal-error")}}resolve(e){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Mt=new x(2e3,1e4);async function Ut(e,t,n){const r=Se(e);b(e,t,Fe);const i=Dt(r,n);return new jt(r,"signInViaPopup",t,i).executeNotNull()}class jt extends Lt{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,jt.currentPopupAction&&jt.currentPopupAction.cancel(),jt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return S(e,this.auth,"internal-error"),e}async onExecution(){T(1===this.filter.length,"Popup operations only handle one event");const e=ft();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(y(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(y(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jt.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(y(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Mt.get())};e()}}jt.currentPopupAction=null;const Ft=new Map;class Vt extends Lt{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Ft.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=qt(t),r=Zt(e);if(!(await r._isAvailable()))return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Ft.set(this.auth._key(),e)}return this.bypassAuthState||Ft.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Bt(e,t){Ft.set(e._key(),t)}function Zt(e){return Q(e._redirectPersistence)}function qt(e){return ee("pendingRedirect",e.config.apiKey,e.name)}async function zt(e,t,n=!1){const r=Se(e),i=Dt(r,t),s=new Vt(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Ht{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wt(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Wt(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(y(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($t(e))}saveEventToCache(e){this.cachedEventUids.add($t(e)),this.lastProcessedEventTime=Date.now()}}function $t(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Wt({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null===t||void 0===t?void 0:t.code)}const Yt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gt=/^https?/;async function Kt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return R(e,"GET","/v1/projects",t)}(e);for(const r of t)try{if(Qt(r))return}catch(n){}v(e,"unauthorized-domain")}function Qt(e){const t=I(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Gt.test(n))return!1;if(Yt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Jt=new x(3e4,6e4);function Xt(){const e=gt().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let en=null;function tn(e){return en=en||function(e){return new Promise(((t,n)=>{var r,i,s;function a(){Xt(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Xt(),n(y(e,"network-request-failed"))},timeout:Jt.get()})}if(null===(i=null===(r=gt().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=gt().gapi)||void 0===s?void 0:s.load)){const t=ve("iframefcb");return gt()[t]=()=>{gapi.load?a():n(y(e,"network-request-failed"))},me(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw en=null,e}))}(e),en}const nn=new x(5e3,15e3),rn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function an(e){const t=e.config;S(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?A(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:a.Jn},i=sn.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${(0,s.xO)(r).slice(1)}`}const on={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class un{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function cn(e,t,n,r=500,i=600){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},on),{width:r.toString(),height:i.toString(),top:a,left:o}),l=(0,s.z$)().toLowerCase();n&&(u=se(l)?"_blank":n),re(l)&&(t=t||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=(0,s.z$)()){var t;return le(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==u)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new un(null);const h=window.open(t||"",u,d);S(h,e,"popup-blocked");try{h.focus()}catch(f){}return new un(h)}const ln="__/auth/handler",dn="emulator/auth/handler",hn=encodeURIComponent("fac");async function fn(e,t,n,r,i,o){S(e.config.authDomain,e,"auth-domain-config-required"),S(e.config.apiKey,e,"invalid-api-key");const u={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:a.Jn,eventId:i};if(t instanceof Fe){t.setDefaultLanguage(e.languageCode),u.providerId=t.providerId||"",(0,s.xb)(t.getCustomParameters())||(u.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))u[e]=t}if(t instanceof Ve){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(u.scopes=e.join(","))}e.tenantId&&(u.tid=e.tenantId);const c=u;for(const s of Object.keys(c))void 0===c[s]&&delete c[s];const l=await e._getAppCheckToken(),d=l?`#${hn}=${encodeURIComponent(l)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${ln}`;return A(e,dn)}(e)}?${(0,s.xO)(c).slice(1)}${d}`}const pn="webStorageSupport";const gn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dt,this._completeRedirectFn=zt,this._overrideRedirectResult=Bt}async _openPopup(e,t,n,r){var i;T(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return cn(e,await fn(e,t,n,I(),r),ft())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){gt().location.href=e}(await fn(e,t,n,I(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(T(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await tn(e),n=gt().gapi;return S(n,e,"internal-error"),t.open({where:document.body,url:an(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rn,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=y(e,"network-request-failed"),s=gt().setTimeout((()=>{r(i)}),nn.get());function a(){gt().clearTimeout(s),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}(e),n=new Ht(e);return t.register("authEvent",(t=>{S(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pn,{type:pn},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),v(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Kt(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return de()||ie()||le()}};var mn="@firebase/auth",vn="0.23.2";class yn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){S(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const wn=(0,s.Pz)("authIdTokenMaxAge")||300;let bn=null;function _n(e=(0,a.Mq)()){const t=(0,a.qX)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,a.qX)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,s.vZ)(r,null!==t&&void 0!==t?t:{}))return e;v(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:gn,persistence:[Et,ct,dt]}),r=(0,s.Pz)("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>wn)return;const r=null===t||void 0===t?void 0:t.token;bn!==r&&(bn=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){(0,s.m9)(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,r){(0,s.m9)(e).onIdTokenChanged(t,n,r)}(n,(t=>e(t)))}var i;const o=(0,s.q4)("auth");return o&&Te(n,`http://${o}`),n}var Sn;Sn="Browser",(0,a.Xd)(new c.wA("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=n.options;S(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:s,authDomain:a,clientPlatform:Sn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:he(Sn)},u=new _e(n,r,i,o);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Q);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,t),u}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),(0,a.Xd)(new c.wA("auth-internal",(e=>(e=>new yn(e))(Se(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,a.KN)(mn,vn,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Sn)),(0,a.KN)(mn,vn,"esm2017");var kn=n(40782),Tn=n(186),In=n(45679),En=n(59564),Cn=n(75475);function xn(e,t,n,r,i,s,a){try{var o=e[s](a),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(r,i)}function An(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){xn(s,r,i,a,o,"next",e)}function o(e){xn(s,r,i,a,o,"throw",e)}a(void 0)}))}}function Dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var On=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};Dn(On,"getExperimentRoll",(function(){var e=Math.random();return e<.5?{experimentId:"pricing_50",groupId:"B"}:e>=.5&&e<.75?{experimentId:"pricing_50",groupId:"A"}:{experimentId:"pricing_50",groupId:"D"}})),Dn(On,"isEmailVerified",(function(){var e,t,n=_n((0,Tn.gV)());return null!==(t=null===n||void 0===n||null===(e=n.currentUser)||void 0===e?void 0:e.emailVerified)&&void 0!==t&&t})),Dn(On,"sendEmailVerification",An(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_n((0,Tn.gV)()),e.abrupt("return",it(t.currentUser).then((function(){return kn.Am.success("Email verification resent")})));case 2:case"end":return e.stop()}}),e)})))),Dn(On,"sendPasswordResetEmail",function(){var e=An(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_n((0,Tn.gV)()),e.abrupt("return",tt(n,t).then((function(){return kn.Am.success("Email sent to "+t)})).catch((function(e){"auth/user-not-found"===e.code?kn.Am.error(t+" not exists."):"auth/invalid-email"===e.code&&kn.Am.error(t+" not valid.")})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Dn(On,"setAuthChangeListener",(function(e){!function(e,t,n,r){(0,s.m9)(e).onAuthStateChanged(t,n,r)}(_n((0,Tn.gV)()),(function(t){e(t)}))})),Dn(On,"isLogged",(function(){return null!==_n((0,Tn.gV)()).currentUser})),Dn(On,"loginWithEmailAndPassword",function(){var e=An(i().mark((function e(t,n,r){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=_n((0,Tn.gV)()),e.abrupt("return",new Promise((function(e,a){return rt(s,t,n).then(function(){var t=An(i().mark((function t(n){var s,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=(0,Cn.dF)(n.user),t.next=3,En.Z.createUser(s);case 3:a=t.sent,r((0,In.r4)({res:a})),e();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){"auth/user-not-found"===e.code?a("User not found"):"auth/wrong-password"===e.code?a("Wrong password"):a(e.message)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),Dn(On,"logout",An(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_n(),e.abrupt("return",t.signOut());case 2:case"end":return e.stop()}}),e)})))),Dn(On,"loginWithGoogle",function(){var e=An(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_n((0,Tn.gV)()),r=new Ze,e.abrupt("return",new Promise((function(e,s){return Ut(n,r).then(function(){var n=An(i().mark((function n(r){var s,a,o,u,c,l,d;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=localStorage.getItem("from"),a=localStorage.getItem("ref"),o=On.getExperimentRoll(),u=(0,Cn.dF)(r.user),s&&(u.from=s),a&&(u.ref=a),o&&(u.experiment=o),n.next=9,En.Z.createUser(u);case 9:c=n.sent,t((0,In.r4)({res:c})),l=new Date(r.user.metadata.creationTime).getTime(),new Date(r.user.metadata.lastSignInTime).getTime()-l<6e4&&(d={},s&&(d.from=s),a&&(d.ref=a),o&&(d.experiment=o),En.Z.updateUserWithDelayAfterCreation(d)),e();case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){if(e.code===p)s(null);else s(e.message)}))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Dn(On,"signupUserWithEmailAndPassword",function(){var e=An(i().mark((function e(t,n,r,s){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=_n((0,Tn.gV)()),e.abrupt("return",new Promise((function(e,o){return nt(a,t,n).then(function(){var t=An(i().mark((function t(n){var o,u,c,l,d,h;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st(n.user,{displayName:r});case 2:return n.user.displayName=r,it(a.currentUser),o=localStorage.getItem("from"),u=localStorage.getItem("ref"),c=On.getExperimentRoll(),l=(0,Cn.dF)(n.user),o&&(l.from=o),u&&(l.ref=u),c&&(l.experiment=c),t.next=13,En.Z.createUser(l);case 13:d=t.sent,s((0,In.r4)({res:d})),h={displayName:r},o&&(h.from=o),u&&(h.ref=u),c&&(h.experiment=c),En.Z.updateUserWithDelayAfterCreation(h),e();case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){if(e.code===f)o("Email already in use");else o(e.message)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()),Dn(On,"getAccessToken",An(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=_n((0,Tn.gV)())).currentUser){e.next=5;break}return e.abrupt("return",t.currentUser.getIdToken());case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)}))))},57919:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(34051),i=n.n(r),s=n(88036),a=(n(75475),n(186));function o(e,t,n,r,i,s,a){try{var o=e[s](a),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){o(s,r,i,a,u,"next",e)}function u(e){o(s,r,i,a,u,"throw",e)}a(void 0)}))}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};c(l,"getRoadmaps",u(i().mark((function e(){var t,n,r,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,s.ad)((0,a.gV)()),n=(0,s.hJ)(t,"roadmaps"),r=(0,s.IO)(n,(0,s.ar)("shadowed","==",!1)),e.next=5,(0,s.PL)(r);case 5:return o=e.sent,u={},o.forEach((function(e){u[e.id]=e.data(),u[e.id].id=e.id,u[e.id].courses={}})),e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})))),c(l,"getRoadmap",function(){var e=u(i().mark((function e(t){var n,r,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.ad)((0,a.gV)()),r=(0,s.JU)(n,"roadmaps",t),e.next=4,(0,s.QT)(r);case 4:if((o=e.sent).exists()){e.next=7;break}return e.abrupt("return",null);case 7:return(u=o.data()).id=o.id,e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(l,"getCoursesByIds",function(){var e=u(i().mark((function e(t){var n,r,o,u,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=(0,s.ad)((0,a.gV)()),r=(0,s.hJ)(n,"courses"),o=[],u={},c=0;c<Math.ceil(t.length/10);c++)l=(0,s.PL)((0,s.IO)(r,(0,s.ar)("shadowed","==",!1),(0,s.ar)("__name__","in",t.slice(10*c,10*(c+1))))).then((function(e){e.forEach((function(e){u[e.id]=e.data(),u[e.id].id=e.id}))})),o.push(l);return e.next=7,Promise.all(o);case 7:return e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(l,"getCourses",u(i().mark((function e(){var t,n,r,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,s.ad)((0,a.gV)()),n=(0,s.hJ)(t,"courses"),r=(0,s.IO)(n,(0,s.ar)("shadowed","==",!1)),e.next=5,(0,s.PL)(r);case 5:return o=e.sent,u={},o.forEach((function(e){u[e.id]=e.data(),u[e.id].id=e.id})),e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})))),c(l,"getCoursesByTag",function(){var e=u(i().mark((function e(t){var n,r,o,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.ad)((0,a.gV)()),r=(0,s.hJ)(n,"courses"),o=(0,s.IO)(r,(0,s.ar)("shadowed","==",!1),(0,s.ar)("tags","array-contains",t)),e.next=5,(0,s.PL)(o);case 5:return u=e.sent,c=[],u.forEach((function(e){var t=e.data();t.id=e.id,c.push(t)})),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(l,"getCoursesByCreator",function(){var e=u(i().mark((function e(t){var n,r,o,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.ad)((0,a.gV)()),r=(0,s.hJ)(n,"courses"),o=(0,s.IO)(r,(0,s.ar)("shadowed","==",!1),(0,s.ar)("creators","array-contains",t)),e.next=5,(0,s.PL)(o);case 5:return u=e.sent,c=[],u.forEach((function(e){var t=e.data();t.id=e.id,c.push(t)})),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(l,"getCoddyCourses",u(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getCoursesByCreator("q7SY0o4MoBaCtaKxPLNd4bPMnFl2");case 2:return t=e.sent,e.next=5,l.getCoursesByCreator("yiH7oAY5GsX859cZ5dJfb9MPvIk1");case 5:return n=e.sent,t=t.concat(n),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))),c(l,"getCoursesByPublishedDate",function(){var e=u(i().mark((function e(t,n){var r,o,u,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.ad)((0,a.gV)()),o=(0,s.hJ)(r,"courses"),u=(0,s.IO)(o,(0,s.ar)("shadowed","==",!1),(0,s.ar)("publishedDate","<",n),(0,s.Xo)("publishedDate","desc"),(0,s.b9)(t)),e.next=5,(0,s.PL)(u);case 5:return c=e.sent,l=[],c.forEach((function(e){var t=e.data();t.id=e.id,l.push(t)})),e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(l,"getCourse",function(){var e=u(i().mark((function e(t,n){var r,o,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n?(0,s.ad)((0,a.Lj)()):(0,s.ad)((0,a.gV)()),o=(0,s.JU)(r,"courses",t),e.next=5,(0,s.QT)(o);case 5:if((u=e.sent).exists()){e.next=8;break}return e.abrupt("return",null);case 8:return(c=u.data()).id=u.id,c.lastUpdated&&(c.lastUpdated=c.lastUpdated.toDate().getTime()),e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(l,"getRandomCourse",u(i().mark((function e(){var t,n,r,o,u,c,l,d,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,s.ad)((0,a.gV)()),n=(0,s.hJ)(t,"courses"),e.next=4,(0,s.Yp)(n);case 4:r=e.sent,o=r.data().count,u=[];case 8:if(l=Math.floor(Math.random()*o+1),!u.includes(l)){e.next=12;break}return e.abrupt("continue",8);case 12:return d=(0,s.IO)(n,(0,s.ar)("index","==",l),(0,s.ar)("shadowed","==",!1),(0,s.b9)(1)),e.next=15,(0,s.PL)(d);case 15:if(!(h=e.sent).empty){e.next=19;break}return u.push(l),e.abrupt("continue",8);case 19:return h.forEach((function(e){c=e.id})),e.abrupt("break",23);case 23:return e.abrupt("return",c);case 24:case"end":return e.stop()}}),e)})))),c(l,"getBusinessCourse",function(){var e=u(i().mark((function e(t,n){var r,o,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.ad)((0,a.gV)()),o=(0,s.JU)(r,"businesses/"+n+"/courses",t),e.next=4,(0,s.QT)(o);case 4:if((u=e.sent).exists()){e.next=7;break}return e.abrupt("return",null);case 7:return(c=u.data()).id=u.id,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(l,"getShowcaseCourses",u(i().mark((function e(){var t,n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,s.ad)((0,a.gV)()),n=(0,s.JU)(t,"showcase","coursesIds"),e.next=4,(0,s.QT)(n);case 4:if((r=e.sent).exists()){e.next=7;break}return e.abrupt("return",null);case 7:return o=r.data(),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})))),c(l,"getLesson",function(){var e=u(i().mark((function e(t,n,r){var o,u,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r?(0,s.ad)((0,a.Lj)()):(0,s.ad)((0,a.gV)()),u=(0,s.JU)(o,"courses/"+t+"/lessons",n),e.next=5,(0,s.QT)(u);case 5:if(!(c=e.sent).exists()){e.next=10;break}return(l=c.data()).id=c.id,e.abrupt("return",l);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),c(l,"getChallenge",function(){var e=u(i().mark((function e(t,n){var r,o,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n?(0,s.ad)((0,a.Lj)()):(0,s.ad)((0,a.gV)()),o=(0,s.JU)(r,"challenges",t),e.next=5,(0,s.QT)(o);case 5:if(!(u=e.sent).exists()){e.next=10;break}return(c=u.data()).id=u.id,e.abrupt("return",c);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(l,"getBusinessLesson",function(){var e=u(i().mark((function e(t,n,r){var o,u,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,s.ad)((0,a.gV)()),u=(0,s.JU)(o,"businesses/"+r+"/courses/"+t+"/lessons",n),e.next=4,(0,s.QT)(u);case 4:if(!(c=e.sent).exists()){e.next=9;break}return(l=c.data()).id=c.id,e.abrupt("return",l);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),c(l,"getUser",function(){var e=u(i().mark((function e(t){var n,r,o,u,c,l,d,h,f,p,g,m,v,y,w,b,_=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_.length>1&&void 0!==_[1]&&_[1],h=(0,s.ad)((0,a.gV)()),f=(0,s.JU)(h,"users",t),e.next=6,(0,s.QT)(f);case 6:if(p=e.sent,(g=p.data())&&void 0!==(null===g||void 0===g?void 0:g.createdDate)&&(g.createdDate=null!==(y=null===(v=null===g||void 0===g||null===(m=g.createdDate)||void 0===m?void 0:m.toDate())||void 0===v?void 0:v.getTime())&&void 0!==y?y:(new Date).getTime()),g&&void 0!==(null===g||void 0===g||null===(r=g.metadata)||void 0===r?void 0:r.lastChallengeRunDate)&&(g.metadata.lastChallengeRunDate=g.metadata.lastChallengeRunDate.toDate().getTime()),g&&void 0!==(null===g||void 0===g||null===(o=g.metadata)||void 0===o?void 0:o.lastAskAiDate)&&(g.metadata.lastAskAiDate=g.metadata.lastAskAiDate.toDate().getTime()),g&&void 0!==(null===g||void 0===g||null===(u=g.metadata)||void 0===u?void 0:u.lastStreakDate)&&(g.metadata.lastStreakDate=g.metadata.lastStreakDate.toDate().getTime()),g&&void 0!==(null===g||void 0===g||null===(c=g.metadata)||void 0===c?void 0:c.lastLimitReachedDate)&&(g.metadata.lastLimitReachedDate=g.metadata.lastLimitReachedDate.toDate().getTime()),g&&void 0!==(null===g||void 0===g||null===(l=g.metadata)||void 0===l||null===(d=l.specialPromotionCode)||void 0===d?void 0:d.expiresAt)&&(g.metadata.specialPromotionCode.expiresAt=g.metadata.specialPromotionCode.expiresAt.toDate().getTime()),g&&(null===g||void 0===g?void 0:g.doneCourses)&&Object.keys(g.doneCourses).forEach((function(e){var t;(null===(t=g.doneCourses[e])||void 0===t?void 0:t.doneDate)&&(g.doneCourses[e].doneDate=g.doneCourses[e].doneDate.toDate().getTime())})),!n){e.next=21;break}return w=(0,s.JU)(h,"billing",t),e.next=19,(0,s.QT)(w);case 19:(b=e.sent).exists()&&(g.billingData=b.data());case 21:return e.abrupt("return",g);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(l,"listenToUser",(function(e,t){var n=(0,s.ad)((0,a.gV)()),r=(0,s.JU)(n,"users",e);return(0,s.cf)(r,t)})),c(l,"getUserProgress",function(){var e=u(i().mark((function e(t,n){var r,o,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.ad)((0,a.gV)()),o=(0,s.JU)(r,"users",t,"progress",n),e.next=4,(0,s.QT)(o);case 4:if((u=e.sent).exists()){e.next=7;break}return e.abrupt("return",void 0);case 7:return c=u.data(),Object.keys(c).forEach((function(e){void 0!==c[e].hints&&Object.keys(c[e].hints).forEach((function(t){c[e].hints[t]=c[e].hints[t].toDate().getTime()})),void 0!==c[e].solution&&(c[e].solution=c[e].solution.toDate().getTime()),void 0!==c[e].lastUpdated&&(c[e].lastUpdated=c[e].lastUpdated.toDate().getTime())})),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(l,"getUserProgressCourses",function(){var e=u(i().mark((function e(t,n){var r,o,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.ad)((0,a.gV)()),o=(0,s.JU)(r,"users",t,"progress"),u=(0,s.IO)(o,(0,s.ar)("__name__","in",n)),c={},e.next=6,(0,s.PL)(u);case 6:return e.sent.forEach((function(e){var t=e.data();Object.keys(t).forEach((function(e){void 0!==t[e].hints&&Object.keys(t[e].hints).forEach((function(n){t[e].hints[n]=t[e].hints[n].toDate().getTime()})),void 0!==t[e].solution&&(t[e].solution=t[e].solution.toDate().getTime()),void 0!==t[e].lastUpdated&&(t[e].lastUpdated=t[e].lastUpdated.toDate().getTime())})),c[e.id]=t})),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(l,"getUserChallengeProgress",function(){var e=u(i().mark((function e(t,n){var r,o,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.ad)((0,a.gV)()),o=(0,s.JU)(r,"users",t,"challenges",n),e.next=4,(0,s.QT)(o);case 4:if((u=e.sent).exists()){e.next=7;break}return e.abrupt("return",void 0);case 7:return void 0!==(c=u.data()).hints&&Object.keys(c.hints).forEach((function(e){c.hints[e]=c.hints[e].toDate().getTime()})),void 0!==c.solution&&(c.solution=c.solution.toDate().getTime()),void 0!==c.lastUpdated&&(c.lastUpdated=c.lastUpdated.toDate().getTime()),e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(l,"getAllUserProgress",function(){var e=u(i().mark((function e(t){var n,r,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.ad)((0,a.gV)()),r=(0,s.IO)((0,s.hJ)(n,"users",t,"progress")),e.next=4,(0,s.PL)(r);case 4:return o=e.sent,u={},o.forEach((function(e){if("knowledge"!==e.id){var t=e.data();Object.keys(t).forEach((function(e){void 0!==t[e].hints&&Object.keys(t[e].hints).forEach((function(n){t[e].hints[n]=t[e].hints[n].toDate().getTime()})),void 0!==t[e].solution&&(t[e].solution=t[e].solution.toDate().getTime()),void 0!==t[e].lastUpdated&&(t[e].lastUpdated=t[e].lastUpdated.toDate().getTime())})),u[e.id]=t}})),e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(l,"getPost",function(){var e=u(i().mark((function e(t){var n,r,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.ad)((0,a.gV)()),r=(0,s.JU)(n,"blog",t),e.next=4,(0,s.QT)(r);case 4:if(!(o=e.sent).exists()){e.next=10;break}return(u=o.data()).id=o.id,u.date=u.date.seconds,e.abrupt("return",u);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(l,"getNumberOfPosts",u(i().mark((function e(){var t,n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,s.ad)((0,a.gV)()),n=(0,s.hJ)(t,"blog"),e.next=4,(0,s.Yp)(n);case 4:return r=e.sent,e.abrupt("return",r.data().count);case 6:case"end":return e.stop()}}),e)})))),c(l,"getTag",function(){var e=u(i().mark((function e(t){var n,r,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.ad)((0,a.gV)()),r=(0,s.JU)(n,"tags",t),e.next=4,(0,s.QT)(r);case 4:if(!(o=e.sent).exists()){e.next=9;break}return(u=o.data()).id=o.id,e.abrupt("return",u);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(l,"getTagByAlias",function(){var e=u(i().mark((function e(t){var n,r,o,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.ad)((0,a.gV)()),r=(0,s.hJ)(n,"tags"),o=(0,s.IO)(r,(0,s.ar)("alias","array-contains",t)),e.next=5,(0,s.PL)(o);case 5:if(1!==(u=e.sent).size){e.next=10;break}return(c=u.docs[0].data()).id=u.docs[0].id,e.abrupt("return",c);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(l,"getTags",u(i().mark((function e(){var t,n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,s.ad)((0,a.gV)()),n=(0,s.IO)((0,s.hJ)(t,"tags")),e.next=4,(0,s.PL)(n);case 4:return r=e.sent,o=[],r.forEach((function(e){var t=e.data();t.id=e.id,o.push(t)})),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))),c(l,"getBlogs",u(i().mark((function e(){var t,n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,s.ad)((0,a.gV)()),n=(0,s.IO)((0,s.hJ)(t,"blog")),e.next=4,(0,s.PL)(n);case 4:return r=e.sent,o=[],r.forEach((function(e){var t=e.data();t.id=e.id,o.push(t)})),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))),c(l,"getAllPosts",function(){var e=u(i().mark((function e(t,n){var r,o,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.ad)((0,a.gV)()),o=(0,s.IO)((0,s.hJ)(r,"blog"),(0,s.ar)("index","<=",t),(0,s.Xo)("index","desc"),(0,s.b9)(n)),e.next=4,(0,s.PL)(o);case 4:return u=e.sent,c=[],u.forEach((function(e){var t=e.data();t.id=e.id,t.date=t.date.seconds,c.push(t)})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(l,"updateUser",function(){var e=u(i().mark((function e(t,n){var r,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.ad)((0,a.gV)()),o=(0,s.JU)(r,"users",t),e.next=4,(0,s.r7)(o,n);case 4:return u=e.sent,e.abrupt("return",u);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(l,"updateUserProgress",function(){var e=u(i().mark((function e(t,n,r,o){var u,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=(0,s.ad)((0,a.gV)()),c=(0,s.JU)(u,"users",t,"progress",n),!o){e.next=9;break}return e.next=6,(0,s.pl)(c,r,{merge:!0});case 6:l=e.sent,e.next=12;break;case 9:return e.next=11,(0,s.r7)(c,r);case 11:l=e.sent;case 12:return e.abrupt("return",l);case 13:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()),c(l,"updateUserChallengeProgress",function(){var e=u(i().mark((function e(t,n,r,o){var u,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=(0,s.ad)((0,a.gV)()),c=(0,s.JU)(u,"users",t,"challenges",n),!o){e.next=9;break}return e.next=6,(0,s.pl)(c,r,{merge:!0});case 6:l=e.sent,e.next=12;break;case 9:return e.next=11,(0,s.r7)(c,r);case 11:l=e.sent;case 12:return e.abrupt("return",l);case 13:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()),c(l,"saveForLaterCourse",function(){var e=u(i().mark((function e(t,n){var r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.ad)((0,a.gV)()),o=(0,s.JU)(r,"users",t,"progress",n),e.next=4,(0,s.QT)(o);case 4:if(e.sent.exists()){e.next=11;break}return e.next=8,(0,s.pl)(o,{});case 8:return e.abrupt("return",e.sent);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(l,"getLeaderBoardInfo",function(){var e=u(i().mark((function e(t){var n,r,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.ad)((0,a.gV)()),r=(0,s.JU)(n,"leaderboards",t),e.next=4,(0,s.QT)(r);case 4:if(!(o=e.sent).exists()){e.next=11;break}return(u=o.data()).id=o.id,u.start=u.start.toDate().getTime(),u.end=u.end.toDate().getTime(),e.abrupt("return",u);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(l,"getOngoingLeaderBoardUsers",function(){var e=u(i().mark((function e(t){var n,r,o,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.ad)((0,a.gV)()),r=(0,s.hJ)(n,"leaderboards",t,"ongoing"),o=(0,s.IO)(r,(0,s.Xo)("challenges","desc"),(0,s.b9)(10)),e.next=5,(0,s.PL)(o);case 5:return u=e.sent,c=[],u.forEach((function(e){var t=e.data();t.uid=e.id,c.push(t)})),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(l,"getOngoingLeaderBoardUser",function(){var e=u(i().mark((function e(t,n){var r,o,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.ad)((0,a.gV)()),o=(0,s.JU)(r,"leaderboards",t,"ongoing",n),e.next=4,(0,s.QT)(o);case 4:if(!(u=e.sent).exists()){e.next=9;break}return(c=u.data()).uid=u.id,e.abrupt("return",c);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(l,"getRefInfo",function(){var e=u(i().mark((function e(t){var n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.ad)((0,a.gV)()),r=(0,s.JU)(n,"ref",t),e.next=4,(0,s.QT)(r);case 4:if(!(o=e.sent).exists()){e.next=7;break}return e.abrupt("return",o.data());case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(l,"isUserPartOfBusiness",function(){var e=u(i().mark((function e(t,n){var r,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.ad)((0,a.Uw)()),o=(0,s.JU)(r,"businesses",n),e.next=4,(0,s.QT)(o);case 4:if(!(u=e.sent).exists()){e.next=7;break}return e.abrupt("return",u.data().students.includes(t));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(l,"getUserSupportData",function(){var e=u(i().mark((function e(t,n,r){var o,u,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,s.ad)((0,a.gV)()),u=(0,s.JU)(o,"users",t,"support","".concat(n,"-").concat(r)),e.next=4,(0,s.QT)(u);case 4:if(!(c=e.sent).exists()){e.next=10;break}return(l=c.data()).lastUpdated=l.lastUpdated.toDate().getTime(),l.messages=l.messages.map((function(e){return e.time=e.time.toDate().getTime(),e})),e.abrupt("return",l);case 10:return e.abrupt("return",{});case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),c(l,"getUserActivityUsage",function(){var e=u(i().mark((function e(t){var n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.ad)((0,a.gV)()),r=(0,s.JU)(n,"users",t,"activity","usage"),e.next=4,(0,s.QT)(r);case 4:if(!(o=e.sent).exists()){e.next=7;break}return e.abrupt("return",o.data());case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(l,"getUserProgressSummary",function(){var e=u(i().mark((function e(t){var n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.ad)((0,a.gV)()),r=(0,s.JU)(n,"users",t,"activity","progressSummary"),e.next=4,(0,s.QT)(r);case 4:if(!(o=e.sent).exists()){e.next=7;break}return e.abrupt("return",o.data());case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(l,"getCertificationData",function(){var e=u(i().mark((function e(t){var n,r,o,u,c,l,d,h,f,p,g;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2===(n=t.split("-")).length){e.next=3;break}return e.abrupt("return",{});case 3:if(!(6!==n[0].length||n[1].length<3)){e.next=5;break}return e.abrupt("return",{});case 5:if(n[0].match("^[A-Za-z0-9]+$")&&n[1].match("^[A-Za-z0-9]+$")){e.next=7;break}return e.abrupt("return",{});case 7:return r=(0,s.ad)((0,a.gV)()),o=(0,s.hJ)(r,"users"),u=(0,s.IO)(o,(0,s.ar)((0,s.Jm)(),">=",n[0]),(0,s.b9)(1)),e.next=12,(0,s.PL)(u);case 12:if(!(c=e.sent).empty){e.next=15;break}return e.abrupt("return",{});case 15:return l=c.docs[0].data(),o=(0,s.hJ)(r,"courses"),u=(0,s.IO)(o,(0,s.ar)("cid",">=",n[1]),(0,s.b9)(1)),e.next=20,(0,s.PL)(u);case 20:if(!(c=e.sent).empty){e.next=23;break}return e.abrupt("return",{});case 23:if(void 0!==(c=c.docs.find((function(e){var t,r,i,s;return(null===(t=e.data())||void 0===t||null===(r=t.cid)||void 0===r?void 0:r.startsWith(n[1]))&&!(null===(i=e.data())||void 0===i||null===(s=i.additionalProperties)||void 0===s?void 0:s.noCertification)})))){e.next=26;break}return e.abrupt("return",{});case 26:if(d=c.id,void 0===l.doneCourses||void 0===l.doneCourses[d]){e.next=45;break}return h=l.displayName,f=l.doneCourses[d].doneDate.toDate().getTime(),o=(0,s.JU)(r,"courses/".concat(d)),e.next=33,(0,s.QT)(o);case 33:return c=(c=e.sent).data(),p=c.title,o=(0,s.JU)(r,"users/".concat(c.creators[0])),e.next=39,(0,s.QT)(o);case 39:return c=(c=e.sent).data(),g="coddy"===c.creatorVisibility?"Coddy Team":c.displayName,e.abrupt("return",{displayName:h,doneTime:f,courseName:p,creatorName:g});case 45:return e.abrupt("return",{});case 46:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(l,"getUserNotifications",function(){var e=u(i().mark((function e(t,n){var r,o,u,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.ad)((0,a.gV)()),o=(0,s.hJ)(r,"users",t,"notifications"),u=(0,s.IO)(o,(0,s.Xo)("timestamp","desc"),(0,s.b9)(5)),n&&(u=(0,s.IO)(o,(0,s.ar)("timestamp","<",new Date(n)),(0,s.Xo)("timestamp","desc"),(0,s.b9)(5))),e.next=6,(0,s.PL)(u);case 6:return c=e.sent,l=[],c.forEach((function(e){var t=e.data();t.id=e.id,t.timestamp=t.timestamp.toDate().getTime(),l.push(t)})),e.abrupt("return",l);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(l,"getUserChallengesActivity",function(){var e=u(i().mark((function e(t){var n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.ad)((0,a.gV)()),r=(0,s.JU)(n,"users",t,"activity","challenges"),e.next=4,(0,s.QT)(r);case 4:if(!(o=e.sent).exists()){e.next=7;break}return e.abrupt("return",o.data());case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(l,"updateUserChallengeFeedback",function(){var e=u(i().mark((function e(t,n,r){var o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,s.ad)((0,a.gV)()),u=(0,s.JU)(o,"users",t,"challenges",n),e.next=4,(0,s.r7)(u,{feedback:r});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),c(l,"updateUserCurrentRoadmap",function(){var e=u(i().mark((function e(t,n){var r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.ad)((0,a.gV)()),o=(0,s.JU)(r,"users",t),e.next=4,(0,s.r7)(o,{currentRoadmap:void 0===n?(0,s.AK)():n});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(l,"getUserReferredUsersData",function(){var e=u(i().mark((function e(t){var n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.ad)((0,a.gV)()),r=(0,s.JU)(n,"users",t,"activity","referredUsers"),e.next=4,(0,s.QT)(r);case 4:if(!(o=e.sent).exists()){e.next=7;break}return e.abrupt("return",o.data());case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(l,"getCurrentLearningGoals",function(){var e=u(i().mark((function e(t,n,r){var o,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,s.ad)((0,a.gV)()),u=(0,s.JU)(o,"users",t,"goals","".concat(r,"W").concat(String(n).padStart(2,"0"))),e.next=4,(0,s.QT)(u);case 4:if(!(c=e.sent).exists()){e.next=7;break}return e.abrupt("return",c.data());case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),c(l,"getMotivationalQuote",function(){var e=u(i().mark((function e(t,n){var r,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.ad)((0,a.gV)()),o=(0,s.JU)(r,"motivational_quotes","".concat(n,"W").concat(String(t).padStart(2,"0"))),e.next=4,(0,s.QT)(o);case 4:if(!(u=e.sent).exists()){e.next=7;break}return e.abrupt("return",u.data());case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},186:function(e,t,n){"use strict";n.d(t,{gV:function(){return o},Lj:function(){return u},Uw:function(){return c}});var r=n(25816),i={apiKey:"AIzaSyAwpKz7TwTGkm-mIUDeCVwOP4TfpxBqvyU",authDomain:"coddy-15505.firebaseapp.com",databaseURL:"https://coddy-15505-default-rtdb.firebaseio.com",projectId:"coddy-15505",storageBucket:"coddy-15505.appspot.com",messagingSenderId:"733978470830",appId:"1:733978470830:web:e1055550dc24f1408fc03f",measurementId:"G-TZLB4EWQE3"},s={apiKey:"AIzaSyAEoSmdHhBZyERidDBT5_JtR13bLxJzRc4",authDomain:"coddy-for-creators.firebaseapp.com",projectId:"coddy-for-creators",storageBucket:"coddy-for-creators.appspot.com",messagingSenderId:"251824326892",appId:"1:251824326892:web:4ab15f8e2a253652cefdc9",measurementId:"G-PYMYZLFWCY"},a={apiKey:"AIzaSyAlGQGqFeBIwXer5lQObIgo6slOavXUM3s",authDomain:"coddy-rapidsight.firebaseapp.com",projectId:"coddy-rapidsight",storageBucket:"coddy-rapidsight.appspot.com",messagingSenderId:"185529559720",appId:"1:185529559720:web:24b5d8834bf19c7306309d",measurementId:"G-EKMYJJKP68"},o=function(){return(0,r.C6)().some((function(e){return"[DEFAULT]"===e.name}))?(0,r.Mq)():(0,r.ZF)(i)},u=function(){return(0,r.C6)().some((function(e){return"creator"===e.name}))?(0,r.Mq)("creator"):(0,r.ZF)(s,"creator")},c=function(){return(0,r.C6)().some((function(e){return"rapidSight"===e.name}))?(0,r.Mq)("rapidSight"):(0,r.ZF)(a,"rapidSight")}},59564:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}});var r=n(34051),i=n.n(r),s=n(25816),a=n(74444),o=n(8463);function u(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function c(e){if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map((e=>c(e)));if("function"===typeof e||"object"===typeof e)return u(e,(e=>c(e)));throw new Error("Data cannot be encoded in JSON: "+e)}function l(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((e=>l(e))):"function"===typeof e||"object"===typeof e?u(e,(e=>l(e))):e}const d="functions",h={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class f extends a.ZR{constructor(e,t,n){super(`functions/${e}`,t||""),this.details=n}}class p{constructor(e,t,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then((e=>this.auth=e),(()=>{})),this.messaging||t.get().then((e=>this.messaging=e),(()=>{})),this.appCheck||n.get().then((e=>this.appCheck=e),(()=>{}))}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null===e||void 0===e?void 0:e.accessToken}catch(e){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(e){return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}const g="us-central1";class m{constructor(e,t,n,r,i="us-central1",s){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new p(t,n,r),this.cancelAllRequests=new Promise((e=>{this.deleteService=()=>Promise.resolve(e())}));try{const e=new URL(i);this.customDomain=e.origin,this.region=g}catch(a){this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){return`${this.emulatorOrigin}/${t}/${this.region}/${e}`}return null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function v(e,t,n){return r=>function(e,t,n,r){const i=e._url(t);return w(e,i,n,r)}(e,t,r,n||{})}async function y(e,t,n,r){let i;n["Content-Type"]="application/json";try{i=await r(e,{method:"POST",body:JSON.stringify(t),headers:n})}catch(a){return{status:0,json:null}}let s=null;try{s=await i.json()}catch(a){}return{status:i.status,json:s}}async function w(e,t,n,r){const i={data:n=c(n)},s={},a=await e.contextProvider.getContext(r.limitedUseAppCheckTokens);a.authToken&&(s.Authorization="Bearer "+a.authToken),a.messagingToken&&(s["Firebase-Instance-ID-Token"]=a.messagingToken),null!==a.appCheckToken&&(s["X-Firebase-AppCheck"]=a.appCheckToken);const o=function(e){let t=null;return{promise:new Promise(((n,r)=>{t=setTimeout((()=>{r(new f("deadline-exceeded","deadline-exceeded"))}),e)})),cancel:()=>{t&&clearTimeout(t)}}}(r.timeout||7e4),u=await Promise.race([y(t,i,s,e.fetchImpl),o.promise,e.cancelAllRequests]);if(o.cancel(),!u)throw new f("cancelled","Firebase Functions instance was deleted.");const d=function(e,t){let n,r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r;try{const e=t&&t.error;if(e){const t=e.status;if("string"===typeof t){if(!h[t])return new f("internal","internal");r=h[t],i=t}const s=e.message;"string"===typeof s&&(i=s),n=e.details,void 0!==n&&(n=l(n))}}catch(s){}return"ok"===r?null:new f(r,i,n)}(u.status,u.json);if(d)throw d;if(!u.json)throw new f("internal","Response is not valid JSON object.");let p=u.json.data;if("undefined"===typeof p&&(p=u.json.result),"undefined"===typeof p)throw new f("internal","Response is missing data field.");return{data:l(p)}}const b="@firebase/functions",_="0.10.0";function S(e=(0,s.Mq)(),t="us-central1"){const n=(0,s.qX)((0,a.m9)(e),d).getImmediate({identifier:t}),r=(0,a.P0)("functions");return r&&function(e,t,n){!function(e,t,n){e.emulatorOrigin=`http://${t}:${n}`}((0,a.m9)(e),t,n)}(n,...r),n}function k(e,t,n){return v((0,a.m9)(e),t,n)}var T,I;function E(e,t,n,r,i,s,a){try{var o=e[s](a),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(r,i)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){E(s,r,i,a,o,"next",e)}function o(e){E(s,r,i,a,o,"throw",e)}a(void 0)}))}}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}T=fetch.bind(self),(0,s.Xd)(new o.wA(d,((e,{instanceIdentifier:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("messaging-internal"),s=e.getProvider("app-check-internal");return new m(n,r,i,s,t,T)}),"PUBLIC").setMultipleInstances(!0)),(0,s.KN)(b,_,I),(0,s.KN)(b,_,"esm2017");var A=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};x(A,"submitChallenge",function(){var e=C(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S(),r=k(n,"submit_challenge"),e.next=4,r(t).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x(A,"aiLessonHelp",function(){var e=C(i().mark((function e(t,n){var r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=S(),s=k(r,"ai_lesson_help"),e.next=4,s({cid:t,lid:n}).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),x(A,"aiExplainSolution",function(){var e=C(i().mark((function e(t,n){var r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=S(),s=k(r,"ai_explain_solution"),e.next=4,s({cid:t,lid:n}).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),x(A,"aiLessonHistory",function(){var e=C(i().mark((function e(t,n){var r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=S(),s=k(r,"ai_lesson_history"),e.next=4,s({cid:t,lid:n}).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),x(A,"aiFeedbackLessonHelp",function(){var e=C(i().mark((function e(t,n,r,s){var a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=S(),o=k(a,"ai_feedback_lesson_help"),e.next=4,o({id:t,cid:n,lid:r,thumbs:s}).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()),x(A,"sendContact",function(){var e=C(i().mark((function e(t,n,r){var s,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=S(),a=k(s,"sendContact"),e.next=4,a({email:t,name:n,message:r});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),x(A,"sendFeedback",function(){var e=C(i().mark((function e(t,n){var r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=S(),s=k(r,"sendFeedback"),e.next=4,s({rating:t,feedback:n});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),x(A,"onCodeExecution",C(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S(),n=k(t,"onCodeExecution"),e.next=4,n();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))),x(A,"sendSupport",function(){var e=C(i().mark((function e(t,n,r,s,a,o){var u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=S(),c=k(u,"sendSupport"),void 0!==o){e.next=8;break}return e.next=5,c({email:t,uid:n,message:r,courseId:s,lessonId:a});case 5:case 10:return e.abrupt("return",e.sent);case 8:return e.next=10,c({email:t,uid:n,message:r,courseId:s,lessonId:a,tid:o});case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,i,s,a){return e.apply(this,arguments)}}()),x(A,"createCheckoutSession",function(){var e=C(i().mark((function e(t,n,r){var s,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=S(),a=k(s,"createCheckoutSession"),e.next=4,a({priceId:t,email:n,couponId:r}).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),x(A,"createSpecialUserPromoCode",function(){var e=C(i().mark((function e(t,n){var r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=S(),s=k(r,"createSpecialUserPromoCode"),e.next=4,s({uid:t,email:n}).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),x(A,"getServerTimestamp",C(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S(),n=k(t,"getServerTimestamp"),e.next=4,n().then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))),x(A,"setNotificationSeen",function(){var e=C(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S(),r=k(n,"setNotificationSeen"),e.next=4,r({nid:t}).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x(A,"generatePersonalizedChallenge",function(){var e=C(i().mark((function e(t,n,r){var s,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=S(),a=k(s,"generatePersonalizedChallenge"),e.next=4,a({year:t,month:n,day:r}).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),x(A,"setPremiumMemberEventNotified",C(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S(),n=k(t,"setPremiumMemberEventNotified"),e.next=4,n({});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))),x(A,"updateBigQueryExposureWay",function(){var e=C(i().mark((function e(t,n,r,s){var a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=S(),o=k(a,"updateBigQueryExposureWay"),e.next=4,o({how:t,more:n,info:r,submitted:s});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()),x(A,"updateStreak",C(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S(),n=k(t,"updateStreak"),e.next=4,n({timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))),x(A,"equipBooster",function(){var e=C(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S(),r=k(n,"equipBooster"),e.next=4,r({product:t}).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x(A,"getReferredUsers",C(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S(),n=k(t,"getReferredUsers"),e.next=4,n({}).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))),x(A,"redeemReferredUser",function(){var e=C(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S(),r=k(n,"redeemReferredUser"),e.next=4,r({referredUid:t}).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x(A,"getChallengeSubmissions",function(){var e=C(i().mark((function e(t,n){var r,s,a,o=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:10,s=S(),a=k(s,"get_submissions_from_context"),e.next=5,a({courseId:t,lessonId:n,limit:r}).then((function(e){return e.data}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),x(A,"getLastSubmissions",C(i().mark((function e(){var t,n,r,s,a=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,n=a.length>1&&void 0!==a[1]?a[1]:10,r=S(),s=k(r,"get_submissions"),e.next=5,s({startDate:t,limit:n}).then((function(e){return e.data}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))),x(A,"createUser",function(){var e=C(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S(),r=k(n,"createUser"),e.next=4,r({user:t}).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x(A,"generateLearningGoals",function(){var e=C(i().mark((function e(t,n,r,s){var a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=S(),o=k(a,"generateLearningGoals"),e.next=4,o({week:t,year:n,intensity:r,start:s}).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()),x(A,"updateLearningGoals",function(){var e=C(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S(),r=k(n,"updateLearningGoals"),e.next=4,r({type:t}).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x(A,"getLearningGoalsReward",function(){var e=C(i().mark((function e(t,n){var r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=S(),s=k(r,"getLearningGoalsReward"),e.next=4,s({week:t,year:n}).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),x(A,"updateUserWithDelayAfterCreation",(function(e){k(S(),"updateUserWithDelayAfterCreation")({toUpdate:e})})),x(A,"likeMotivationalQuote",(function(e,t){k(S(),"likeMotivationalQuote")({week:e,year:t})}))},47246:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return i}});var i=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};r(i,"saveLastCode",(function(e,t,n,r){return localStorage.setItem(e+t+n,r)})),r(i,"loadLastCode",(function(e,t,n){return localStorage.getItem(e+t+n)})),r(i,"saveLastCodeMultiFiles",(function(e,t,n,r){var i={};return r.forEach((function(e){return i[e.path]=e.payload})),localStorage.setItem(e+t+n,JSON.stringify(i))})),r(i,"loadLastCodeMultiFiles",(function(e,t,n){var r=localStorage.getItem(e+t+n);if(r){r=JSON.parse(r);var i=[];return Object.keys(r).forEach((function(e){i.push({path:e,payload:r[e]})})),i}return null})),r(i,"saveLastLanguage",(function(e){return localStorage.setItem("lastLanguage",e)})),r(i,"loadLastLanguage",(function(){var e;return null!==(e=localStorage.getItem("lastLanguage"))&&void 0!==e?e:"python"})),r(i,"saveIsLogged",(function(e){return localStorage.setItem("isLogged",e)})),r(i,"loadIsLogged",(function(){var e;return null!==(e=localStorage.getItem("isLogged"))&&void 0!==e?e:1}))},97418:function(e,t,n){"use strict";n.d(t,{Z:function(){return De}});var r=n(34051),i=n.n(r),s=n(25816),a=n(74444),o=n(8463);const u="firebasestorage.googleapis.com";class c extends a.ZR{constructor(e,t,n=0){super(h(e),`Firebase Storage: ${t} (${h(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,c.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return h(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var l,d;function h(e){return"storage/"+e}function f(){return new c(l.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function p(){return new c(l.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function g(){return new c(l.CANCELED,"User canceled the upload/download.")}function m(){return new c(l.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function v(e){return new c(l.INVALID_ARGUMENT,e)}function y(){return new c(l.APP_DELETED,"The Firebase app was deleted.")}function w(e,t){return new c(l.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function b(e){throw new c(l.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(l||(l={}));class _{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=_.makeFromUrl(e,t)}catch(i){return new _(e,"")}if(""===n.path)return n;throw r=e,new c(l.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${a}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===u?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let u=0;u<o.length;u++){const t=o[u],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new _(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new c(l.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class S{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function k(e){return"string"===typeof e||e instanceof String}function T(e){return I()&&e instanceof Blob}function I(){return"undefined"!==typeof Blob&&!(0,a.UG)()}function E(e,t,n,r){if(r<t)throw v(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw v(`Invalid value for '${e}'. Expected ${n} or less.`)}function C(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function x(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function A(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(d||(d={}));class D{constructor(e,t,n,r,i,s,a,o,u,c,l,d=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=o,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=l,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new O(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===d.NO_ERROR,i=n.getStatus();if(!t||A(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===d.ABORT;return void e(!1,new O(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new O(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());void 0!==e?n(e):n()}catch(s){r(s)}else if(null!==i){const e=f();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?y():g())}else{r(p())}};this.canceled_?t(0,new O(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,a=!1,o=0;function u(){return 2===o}let c=!1;function l(...e){c||(c=!0,t.apply(null,e))}function d(t){i=setTimeout((()=>{i=null,e(f,u())}),t)}function h(){s&&clearTimeout(s)}function f(e,...t){if(c)return void h();if(e)return h(),void l.call(null,e,...t);if(u()||a)return h(),void l.call(null,e,...t);let n;r<64&&(r*=2),1===o?(o=2,n=0):n=1e3*(r+Math.random()),d(n)}let p=!1;function g(e){p||(p=!0,h(),c||(null!==i?(e||(o=2),clearTimeout(i),d(0)):e||(o=1)))}return d(0),s=setTimeout((()=>{a=!0,g(!0)}),n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class O{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function P(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function N(...e){const t=P();if(void 0!==t){const n=new t;for(let t=0;t<e.length;t++)n.append(e[t]);return n.getBlob()}if(I())return new Blob(e);throw new c(l.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function R(e){if("undefined"===typeof atob)throw t="base-64",new c(l.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const L="raw",M="base64",U="base64url",j="data_url";class F{constructor(e,t){this.data=e,this.contentType=t||null}}function V(e,t){switch(e){case L:return new F(B(t));case M:case U:return new F(Z(e,t));case j:return new F(function(e){const t=new q(e);return t.base64?Z(M,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw w(j,"Malformed data URL.")}return B(t)}(t.rest)}(t),new q(t).contentType)}throw f()}function B(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Z(e,t){switch(e){case M:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw w(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case U:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw w(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=R(t)}catch(i){if(i.message.includes("polyfill"))throw i;throw w(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class q{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw w(j,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)}}class z{constructor(e,t){let n=0,r="";T(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(T(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new z(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new z(n,!0)}}static getBlob(...e){if(I()){const t=e.map((e=>e instanceof z?e.data_:e));return new z(N.apply(null,t))}{const t=e.map((e=>k(e)?V(L,e).data:e.data_));let n=0;t.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return t.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new z(r,!0)}}uploadData(){return this.data_}}function H(e){let t;try{t=JSON.parse(e)}catch(r){return null}return"object"!==typeof(n=t)||Array.isArray(n)?null:t;var n}function $(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function W(e,t){return t}class Y{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||W}}let G=null;function K(){if(G)return G;const e=[];e.push(new Y("bucket")),e.push(new Y("generation")),e.push(new Y("metageneration")),e.push(new Y("name","fullPath",!0));const t=new Y("name");t.xform=function(e,t){return function(e){return!k(e)||e.length<2?e:$(e)}(t)},e.push(t);const n=new Y("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Y("timeCreated")),e.push(new Y("updated")),e.push(new Y("md5Hash",null,!0)),e.push(new Y("cacheControl",null,!0)),e.push(new Y("contentDisposition",null,!0)),e.push(new Y("contentEncoding",null,!0)),e.push(new Y("contentLanguage",null,!0)),e.push(new Y("contentType",null,!0)),e.push(new Y("metadata","customMetadata",!0)),G=e,G}function Q(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new _(n,r);return t._makeStorageReference(i)}})}(r,e),r}function J(e,t,n){const r=H(t);if(null===r)return null;return Q(e,r,n)}function X(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class ee{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function te(e){if(!e)throw f()}function ne(e,t){return function(n,r){const i=J(e,r,t);return te(null!==i),i}}function re(e,t){return function(n,r){const i=J(e,r,t);return te(null!==i),function(e,t,n,r){const i=H(t);if(null===i)return null;if(!k(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const a=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return C("/b/"+a(i)+"/o/"+a(s),n,r)+x({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function ie(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new c(l.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new c(l.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new c(l.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new c(l.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function se(e){const t=ie(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new c(l.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function ae(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function oe(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+o;const u=ae(t,r,i),c="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+X(u,n)+"\r\n--"+o+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+o+"--",d=z.getBlob(c,r,l);if(null===d)throw m();const h={name:u.fullPath},f=C(s,e.host,e._protocol),p=e.maxUploadRetryTime,g=new ee(f,"POST",ne(e,n),p);return g.urlParams=h,g.headers=a,g.body=d.uploadData(),g.errorHandler=ie(t),g}class ue{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=d.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=d.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=d.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw b("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw b("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw b("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw b("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw b("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class ce extends ue{initXhr(){this.xhr_.responseType="text"}}function le(){return new ce}class de{constructor(e,t){this._service=e,this._location=t instanceof _?t:_.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new de(e,t)}get root(){const e=new _(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new _(this._location.bucket,e);return new de(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new c(l.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function he(e,t,n){e._throwIfRoot("uploadBytes");const r=oe(e.storage,e._location,K(),new z(t,!0),n);return e.storage.makeRequestWithTokens(r,le).then((t=>({metadata:t,ref:e})))}function fe(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=C(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new ee(r,"GET",re(e,n),i);return s.errorHandler=se(t),s}(e.storage,e._location,K());return e.storage.makeRequestWithTokens(t,le).then((e=>{if(null===e)throw new c(l.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function pe(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new _(e._location.bucket,n);return new de(e.storage,r)}function ge(e,t){if(e instanceof ye){const n=e;if(null==n._bucket)throw new c(l.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the 'storageBucket' property when initializing the app?");const r=new de(n,n._bucket);return null!=t?ge(r,t):r}return void 0!==t?pe(e,t):e}function me(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof ye)return new de(e,t);throw v("To use ref(service, url), the first argument must be a Storage instance.")}return ge(e,t)}function ve(e,t){const n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:_.makeFromBucketSpec(n,e)}class ye{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=u,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?_.makeFromBucketSpec(r,this._host):ve(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=_.makeFromBucketSpec(this._url,e):this._bucket=ve(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){E("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){E("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new de(this,e)}_makeRequest(e,t,n,r,i=!0){if(this._deleted)return new S(y());{const s=function(e,t,n,r,i,s,a=!0){const o=x(e.urlParams),u=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new D(u,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const we="@firebase/storage",be="0.11.2",_e="storage";function Se(e,t,n){return he(e=(0,a.m9)(e),t,n)}function ke(e){return fe(e=(0,a.m9)(e))}function Te(e,t){return me(e=(0,a.m9)(e),t)}function Ie(e=(0,s.Mq)(),t){e=(0,a.m9)(e);const n=(0,s.qX)(e,_e).getImmediate({identifier:t}),r=(0,a.P0)("storage");return r&&function(e,t,n,r={}){!function(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:(0,a.Sg)(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}function Ee(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new ye(n,r,i,t,s.Jn)}function Ce(e,t,n,r,i,s,a){try{var o=e[s](a),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(r,i)}function xe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){Ce(s,r,i,a,o,"next",e)}function o(e){Ce(s,r,i,a,o,"throw",e)}a(void 0)}))}}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,s.Xd)(new o.wA(_e,Ee,"PUBLIC").setMultipleInstances(!0)),(0,s.KN)(we,be,""),(0,s.KN)(we,be,"esm2017");var De=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};Ae(De,"uploadProfileImage",function(){var e=xe(i().mark((function e(t,n){var r,s,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ie(),s=Te(r,"users/"+t),e.next=4,Se(s,n);case 4:return a=e.sent,e.next=7,ke(a.ref);case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ae(De,"getProfileImage",function(){var e=xe(i().mark((function e(t){var n,r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ie(),r=Te(n,"users/"+t),e.next=4,ke(r).catch((function(e){return null}));case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},54549:function(e,t,n){"use strict";n.d(t,{ZP:function(){return I},wn:function(){return b},Zh:function(){return S},T6:function(){return w},rd:function(){return T}});var r=n(34051),i=n.n(r),s=n(77236),a=n(57919),o=n(4231),u=n(40782),c=function(e,t){e.fetchStatus=o.Z.Loading},l=function(e,t){e.fetchStatus=o.Z.Success,t.payload&&(e.posts=t.payload)},d=function(e,t){e.posts=e.posts.concat(t.payload)},h=function(e,t){e.fetchStatus=o.Z.Fail,u.Am.error(t.error.message)},f=function(e,t){e.fetchSingleStatus=o.Z.Loading},p=function(e,t){e.fetchSingleStatus=o.Z.Success,t.payload&&e.posts.push(t.payload)},g=function(e,t){e.fetchSingleStatus=o.Z.Fail,u.Am.error(t.error.message)},m=function(e,t){e.numOfPosts=t.payload};function v(e,t,n,r,i,s,a){try{var o=e[s](a),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(r,i)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){v(s,r,i,a,o,"next",e)}function o(e){v(s,r,i,a,o,"throw",e)}a(void 0)}))}}var w=(0,s.hg)("blog/fetchPosts",function(){var e=y(i().mark((function e(t,n){var r,s,u,c,l,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.startIndex,s=t.limit,u=n.getState,c=u().blog,l=c.posts,d=c.fetchStatus,0!==l.length&&d===o.Z.Success){e.next=4;break}return e.abrupt("return",a.Z.getAllPosts(r,s));case 4:return e.abrupt("return",null);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),b=(0,s.hg)("blog/fetchMorePosts",function(){var e=y(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.startIndex,r=t.limit,e.abrupt("return",a.Z.getAllPosts(n,r));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_=(0,s.hg)("blog/fetchPost",function(){var e=y(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,void 0!==r().blog.posts.find((function(e){return e.id===t}))){e.next=4;break}return e.abrupt("return",a.Z.getPost(t));case 4:return e.abrupt("return",null);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),S=(0,s.hg)("blog/fetchNumberOfPosts",function(){var e=y(i().mark((function e(t,n){var r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,0===(s=r().blog.numOfPosts)){e.next=6;break}return e.abrupt("return",s);case 6:return e.abrupt("return",a.Z.getNumberOfPosts());case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),k=(0,s.oM)({name:"blog",initialState:{posts:[],currPage:1,numOfPosts:0,fetchStatus:o.Z.Loading,fetchSingleStatus:o.Z.Loading},reducers:{setCurrPage:function(e,t){e.currPage=t.payload}},extraReducers:function(e){e.addCase(w.pending,c).addCase(w.fulfilled,l).addCase(w.rejected,h).addCase(b.fulfilled,d).addCase(_.pending,f).addCase(_.fulfilled,p).addCase(_.rejected,g).addCase(S.fulfilled,m)}}),T=k.actions.setCurrPage,I=k.reducer},4040:function(e,t,n){"use strict";n.d(t,{ZP:function(){return D},gW:function(){return k},VU:function(){return S},f5:function(){return _},QG:function(){return T},nD:function(){return x},dy:function(){return C},jI:function(){return A}});var r=n(34051),i=n.n(r),s=n(77236),a=n(57919),o=n(40782),u=n(4231),c=function(e,t){e.currDate=t.payload,e.selectedDate=t.payload,e.selectedMonth=t.payload},l=function(e,t){t.payload||o.Am.error(t.error.message)},d=function(e,t){e.challengesActivity=t.payload,e.fetchActivityStatus=u.Z.Success},h=function(e,t){o.Am.error(t.error.message)},f=function(e,t){e.data[t.meta.arg.id]=t.payload},p=function(e,t){o.Am.error(t.error.message)},g=function(e,t){void 0===e.challengesActivity[t.meta.arg.year]&&(e.challengesActivity[t.meta.arg.year]={}),void 0===e.challengesActivity[t.meta.arg.year][t.meta.arg.month]&&(e.challengesActivity[t.meta.arg.year][t.meta.arg.month]={}),e.challengesActivity[t.meta.arg.year][t.meta.arg.month][t.meta.arg.day]={id:"loading",started:!1,done:!1}},m=function(e,t){void 0===e.challengesActivity[t.meta.arg.year]&&(e.challengesActivity[t.meta.arg.year]={}),void 0===e.challengesActivity[t.meta.arg.year][t.meta.arg.month]&&(e.challengesActivity[t.meta.arg.year][t.meta.arg.month]={}),e.challengesActivity[t.meta.arg.year][t.meta.arg.month][t.meta.arg.day]=t.payload},v=function(e,t){t.payload?o.Am.error(t.payload):o.Am.error(t.error.message)},y=n(59564);function w(e,t,n,r,i,s,a){try{var o=e[s](a),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(r,i)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){w(s,r,i,a,o,"next",e)}function o(e){w(s,r,i,a,o,"throw",e)}a(void 0)}))}}var _=(0,s.hg)("challenges/fetchCurrTime",function(){var e=b(i().mark((function e(t,n){var r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,s=n.rejectWithValue,void 0===r().challenges.currDate){e.next=4;break}return e.abrupt("return",s("exists"));case 4:return e.abrupt("return",y.Z.getServerTimestamp());case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),S=(0,s.hg)("challenges/fetchChallengesActivity",function(){var e=b(i().mark((function e(t,n){var r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,r().user.isLogged){e.next=4;break}return e.abrupt("return",void 0);case 4:return s=r().user.data.uid,e.abrupt("return",a.Z.getUserChallengesActivity(s));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),k=(0,s.hg)("challenges/fetchChallenge",function(){var e=b(i().mark((function e(t,n){var r,s,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id,s=n.getState,!(o=s().challenges.data[r])){e.next=4;break}return e.abrupt("return",o);case 4:return e.abrupt("return",a.Z.getChallenge(r));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),T=(0,s.hg)("challenges/generatePersonalizedChallenge",function(){var e=b(i().mark((function e(t,n){var r,s,a,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.year,s=t.month,a=t.day,o=n.getState,u=n.rejectWithValue,o().user.isLogged){e.next=4;break}return e.abrupt("return",u("Create an account before generating a daily challenge"));case 4:return e.abrupt("return",y.Z.generatePersonalizedChallenge(r,s,a));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),I=(0,s.oM)({name:"challenges",initialState:{challengesActivity:void 0,data:{},currDate:void 0,selectedDate:void 0,selectedMonth:void 0,fetchActivityStatus:u.Z.None},reducers:{prevMonth:function(e,t){var n=new Date(e.selectedMonth);n.setDate(1),n.setMonth(n.getMonth()-1),e.selectedMonth=n.getTime()},nextMonth:function(e,t){var n=new Date(e.selectedMonth);n.setDate(1),n.setMonth(n.getMonth()+1),e.selectedMonth=n.getTime()},setSelectedDate:function(e,t){e.selectedDate=t.payload}},extraReducers:function(e){e.addCase(_.fulfilled,c).addCase(_.rejected,l).addCase(S.fulfilled,d).addCase(S.rejected,h).addCase(T.pending,g).addCase(T.fulfilled,m).addCase(T.rejected,v).addCase(k.fulfilled,f).addCase(k.rejected,p)}}),E=I.actions,C=E.prevMonth,x=E.nextMonth,A=E.setSelectedDate,D=I.reducer},56743:function(e,t,n){"use strict";n.d(t,{ZP:function(){return f},uH:function(){return h}});var r=n(34051),i=n.n(r),s=n(77236),a=n(57919),o=n(4231),u=function(e,t){var n;(null===(n=e.data)||void 0===n?void 0:n.id)!==t.meta.arg&&(e.data={}),e.status=o.Z.Loading},c=function(e,t){e.status=o.Z.Success,t.payload&&(e.data=t.payload)},l=function(e,t){e.status=o.Z.Fail,e.error=t.error.message};function d(e,t,n,r,i,s,a){try{var o=e[s](a),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(r,i)}var h=(0,s.hg)("course/fetchCourse",function(){var e,t=(e=i().mark((function e(t,n){var r,s,o,u,c,l,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.courseId,s=t.preview,o=n.getState,(c=o().course.data).id!==r){e.next=5;break}return e.abrupt("return",c);case 5:if(void 0===(l=o().courses.data.find((function(e){return e.id===r})))){e.next=8;break}return e.abrupt("return",l);case 8:return d=(null===(u=o().user.data)||void 0===u?void 0:u.accessLevel)>=1,e.abrupt("return",a.Z.getCourse(r,s&&d));case 10:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){d(s,r,i,a,o,"next",e)}function o(e){d(s,r,i,a,o,"throw",e)}a(void 0)}))});return function(e,n){return t.apply(this,arguments)}}()),f=(0,s.oM)({name:"course",initialState:{data:{},status:o.Z.None,error:""},reducers:{},extraReducers:function(e){e.addCase(h.pending,u).addCase(h.fulfilled,c).addCase(h.rejected,l)}}).reducer},69487:function(e,t,n){"use strict";n.d(t,{ZP:function(){return O},uH:function(){return I},oV:function(){return T},EO:function(){return E},tt:function(){return C},u4:function(){return D}});var r=n(34051),i=n.n(r),s=n(77236),a=n(57919),o=n(4231),u=function(e,t){e.status=o.Z.Loading},c=function(e,t){e.status=o.Z.Success,e.data=Object.keys(t.payload).map((function(e){var n=t.payload[e];return n.id=e,n})).sort((function(e,t){return e.lessonsNum-t.lessonsNum})),e.filteredData=e.data},l=function(e,t){e.status=o.Z.Fail,e.error=t.error.message},d=function(e,t){Object.keys(t.payload).forEach((function(n){e.courses[n]=t.payload[n]}))},h=function(e,t){e.fetchCourseStatus[t.meta.arg]=o.Z.Loading},f=function(e,t){e.data.some((function(e){var n;return(null===e||void 0===e?void 0:e.id)===(null===(n=t.payload)||void 0===n?void 0:n.id)}))||e.data.push(t.payload),e.fetchCourseStatus[t.meta.arg]=o.Z.Success},p=function(e,t){e.fetchCourseStatus[t.meta.arg]=o.Z.Fail},g=function(e,t){e.fetchCreatorStatus[t.meta.arg]=o.Z.Loading},m=function(e,t){e.creators[t.meta.arg]=t.payload,e.fetchCreatorStatus[t.meta.arg]=o.Z.Success},v=function(e,t){e.fetchCreatorStatus[t.meta.arg]=o.Z.Fail},y=function(e,t){e.fetchCoursesShowcaseIdsStatus=o.Z.Loading},w=function(e,t){e.coursesIds=t.payload,e.fetchCoursesShowcaseIdsStatus=o.Z.Success},b=function(e,t){e.fetchCoursesShowcaseIdsStatus=o.Z.Fail};function _(e,t,n,r,i,s,a){try{var o=e[s](a),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(r,i)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){_(s,r,i,a,o,"next",e)}function o(e){_(s,r,i,a,o,"throw",e)}a(void 0)}))}}var k=(0,s.hg)("courses/fetchCourses",S(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.Z.getCourses());case 1:case"end":return e.stop()}}),e)})))),T=(0,s.hg)("courses/fetchCoursesByIds",function(){var e=S(i().mark((function e(t,n){var r,s,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState,s=r().courses.courses,o=t.filter((function(e){return!s.hasOwnProperty(e)})),e.abrupt("return",a.Z.getCoursesByIds(o));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),I=(0,s.hg)("courses/fetchCourse",function(){var e=S(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.Z.getCourse(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E=(0,s.hg)("courses/fetchCoursesShoowcaseIds",S(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.Z.getShowcaseCourses());case 1:case"end":return e.stop()}}),e)})))),C=(0,s.hg)("courses/fetchCreator",function(){var e=S(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.Z.getUser(t).then((function(e){var t;return{imagePath:e.imagePath,displayName:e.displayName,creatorVisibility:null!==(t=e.creatorVisibility)&&void 0!==t?t:"normal",uid:e.uid}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x=(0,s.oM)({name:"courses",initialState:{data:[],courses:{},coursesIds:{},filteredData:[],fetchCourseStatus:{},status:o.Z.None,error:"",filterValue:"",creators:{},fetchCreatorStatus:{},fetchCoursesShowcaseIdsStatus:o.Z.None},reducers:{filter:function(e,t){var n=t.payload.toLowerCase();e.filteredData=e.data.filter((function(e){return e.title.toLowerCase().includes(n.toLowerCase())||e.id.includes(n)})),e.filterValue=t.payload},saveCourse:function(e,t){e.courses[t.payload.id]=t.payload.course}},extraReducers:function(e){e.addCase(k.pending,u).addCase(k.fulfilled,c).addCase(k.rejected,l).addCase(T.fulfilled,d).addCase(I.pending,h).addCase(I.fulfilled,f).addCase(I.rejected,p).addCase(C.pending,g).addCase(C.fulfilled,m).addCase(C.rejected,v).addCase(E.pending,y).addCase(E.fulfilled,w).addCase(E.rejected,b)}}),A=x.actions,D=(A.filter,A.saveCourse),O=x.reducer},240:function(e,t,n){"use strict";n.d(t,{ZP:function(){return p},dw:function(){return f}});var r=n(34051),i=n.n(r),s=n(77236),a=n(57919),o=n(40782),u=n(4231),c=function(e,t){e.fetchStatus=u.Z.Loading},l=function(e,t){e.fetchStatus=u.Z.Success,null!==t.payload&&(e.info=t.payload.info,e.users=t.payload.users,e.stats=t.payload.stats,e.myStat=t.payload.myStat)},d=function(e,t){e.status=u.Z.Fail,o.Am.error(t.error.message)};function h(e,t,n,r,i,s,a){try{var o=e[s](a),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(r,i)}var f=(0,s.hg)("leaderboard/fetchLeaderboard",function(){var e,t=(e=i().mark((function e(t,n){var r,s,o,u,c,l,d,h,f,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.leaderBoardId,s=t.refresh,o=n.getState,s||!(o().leaderboard.users.length>0)){e.next=4;break}return e.abrupt("return",null);case 4:return l=null!==(c=null===(u=o().user.data)||void 0===u?void 0:u.uid)&&void 0!==c?c:"",e.next=8,a.Z.getLeaderBoardInfo(r);case 8:return d=e.sent,e.next=11,a.Z.getOngoingLeaderBoardUsers(r);case 11:return h=e.sent,e.next=14,Promise.all(h.map((function(e){return a.Z.getUser(e.uid)})));case 14:if(f=e.sent,void 0!==(p=h.find((function(e){return e.uid===l})))||""===l){e.next=20;break}return e.next=19,a.Z.getOngoingLeaderBoardUser(r,l);case 19:p=e.sent;case 20:return e.abrupt("return",{info:d,stats:h,users:f,myStat:p});case 21:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){h(s,r,i,a,o,"next",e)}function o(e){h(s,r,i,a,o,"throw",e)}a(void 0)}))});return function(e,n){return t.apply(this,arguments)}}()),p=(0,s.oM)({name:"leaderboard",initialState:{info:{},users:[],stats:[],myStat:null,fetchStatus:u.Z.None},extraReducers:function(e){e.addCase(f.pending,c).addCase(f.fulfilled,l).addCase(f.rejected,d)}}).reducer},64306:function(e,t,n){"use strict";n.d(t,{iS:function(){return ne},ZP:function(){return ae},gW:function(){return U},u6:function(){return M},Tq:function(){return j},qy:function(){return F},eV:function(){return re},H7:function(){return z},z0:function(){return V},Gy:function(){return q},OG:function(){return $},iO:function(){return te},Pb:function(){return ie},LB:function(){return X},Z2:function(){return ee},qq:function(){return J},wn:function(){return K},ck:function(){return G},zP:function(){return W},g8:function(){return se},jh:function(){return Q},gc:function(){return Y},BF:function(){return H}});var r=n(34051),i=n.n(r),s=n(77236),a=n(57919),o=n(35185),u=n(4231),c=n(47246),l=n(40782),d=n(17312);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}var p=function(e,t){return(null===e||void 0===e?void 0:e.defaultCode)?o.Z.decode(e.defaultCode):(null===e||void 0===e?void 0:e.defaultCodes)?o.Z.decode(null!==(n=e.defaultCodes[t])&&void 0!==n?n:""):"";var n},g=function(e,t){e.status=u.Z.Loading,t.meta.arg.courseId!==e.courseId&&(e.courseId=t.meta.arg.courseId)},m=function(e,t){var n,r,i,s;if(e.status=u.Z.Success,e.fetchSupportDataStatus=u.Z.None,e.supportData={},null===t.payload.data)0!==Object.keys(e.data).length&&(e.data={}),e.code="",e.lang="",e.files=[],e.openPaths=[],e.selectedPath=null,t.payload.isProject&&l.Am.info("Complete the previous lesson!");else if(e.data=t.payload.data,(null===(n=t.payload.data)||void 0===n||null===(r=n.task)||void 0===r||null===(i=r.languages)||void 0===i?void 0:i.length)>0?e.lang=t.payload.data.task.languages.includes(c.Z.loadLastLanguage())?c.Z.loadLastLanguage():t.payload.data.task.languages[0]:e.lang="",e.data.isProject=t.payload.isProject,e.rehearsal=!!t.payload.rehearsal,e.showSolutionAlert=!1,e.showSolution=!1,null===(s=e.data)||void 0===s?void 0:s.isMultiFile){var a,h,g,m,v,y=c.Z.loadLastCodeMultiFiles(e.courseId,e.data.id+(e.rehearsal?d.yd:""),e.lang);if(t.payload.isProject)e.data.lastLessonFiles=t.payload.lastLessonFiles,e.files=null===y||0===y.length?null!==(a=e.data.lastLessonFiles)&&void 0!==a?a:[]:y,e.openPaths=e.files.map((function(e){return e.path})),e.selectedPath=null!==(h=t.payload.data.task.defaultCodes[e.lang].find((function(e){return e.main})).path)&&void 0!==h?h:null;else if(void 0!==(null===(g=t.payload.data.task)||void 0===g?void 0:g.defaultCodes)&&void 0!==t.payload.data.task.defaultCodes[e.lang])if(y)e.files=y,e.openPaths=y.map((function(e){return e.path})),e.selectedPath=null!==(m=t.payload.data.task.defaultCodes[e.lang].find((function(e){return e.main})).path)&&void 0!==m?m:null;else e.files=t.payload.data.task.defaultCodes[e.lang].map((function(e){return f({},e,{payload:o.Z.decode(e.payload)})})),e.openPaths=t.payload.data.task.defaultCodes[e.lang].map((function(e){return e.path})),e.selectedPath=null!==(v=t.payload.data.task.defaultCodes[e.lang].find((function(e){return e.main})).path)&&void 0!==v?v:null;else e.files=[]}else{var w=c.Z.loadLastCode(e.courseId,e.data.id+(e.rehearsal?d.yd:""),e.lang);t.payload.isProject?(e.data.lastLessonCode=t.payload.lastLessonCode,e.code=null!==w&&void 0!==w?w:e.data.lastLessonCode):e.code=null!==w&&void 0!==w?w:p(t.payload.data.task,e.lang)}},v=function(e,t){t.payload&&l.Am.error(t.payload),e.status=u.Z.Fail,e.error=t.error.message},y=function(e,t){e.status=u.Z.Loading,e.courseId="challenge"},w=function(e,t){var n,r,i,s;if(e.status=u.Z.Success,e.fetchSupportDataStatus=u.Z.None,e.supportData={},null===t.payload.data)0!==Object.keys(e.data).length&&(e.data={}),e.code="",e.lang="",e.files=[],e.openPaths=[],e.selectedPath=null;else if(e.data=t.payload.data,(null===(n=t.payload.data)||void 0===n||null===(r=n.task)||void 0===r||null===(i=r.languages)||void 0===i?void 0:i.length)>0?e.lang=t.payload.data.task.languages.includes(c.Z.loadLastLanguage())?c.Z.loadLastLanguage():t.payload.data.task.languages[0]:e.lang="",e.data.isProject=!1,e.rehearsal=!1,e.showSolutionAlert=!1,e.showSolution=!1,null===(s=e.data)||void 0===s?void 0:s.isMultiFile){var a,l,d,h=c.Z.loadLastCodeMultiFiles(e.courseId,e.data.id,e.lang);if(void 0!==(null===(a=t.payload.data.task)||void 0===a?void 0:a.defaultCodes)&&void 0!==t.payload.data.task.defaultCodes[e.lang])if(h)e.files=h,e.openPaths=h.map((function(e){return e.path})),e.selectedPath=null!==(l=t.payload.data.task.defaultCodes[e.lang].find((function(e){return e.main})).path)&&void 0!==l?l:null;else e.files=t.payload.data.task.defaultCodes[e.lang].map((function(e){return f({},e,{payload:o.Z.decode(e.payload)})})),e.openPaths=t.payload.data.task.defaultCodes[e.lang].map((function(e){return e.path})),e.selectedPath=null!==(d=t.payload.data.task.defaultCodes[e.lang].find((function(e){return e.main})).path)&&void 0!==d?d:null;else e.files=[]}else{var g=c.Z.loadLastCode(e.courseId,e.data.id,e.lang);e.code=null!==g&&void 0!==g?g:p(t.payload.data.task,e.lang)}},b=function(e,t){t.payload&&l.Am.error(t.payload),e.status=u.Z.Fail,e.error=t.error.message},_=function(e,t){e.fetchSubmissionsStatus=u.Z.Loading,e.submissionsCourseId===e.courseId&&e.submissionsLessonId===e.data.id||(e.submissions=[])},S=function(e,t){var n,r;e.fetchSubmissionsStatus=u.Z.Success,e.submissions=t.payload,e.submissionsCourseId=e.courseId,e.submissionsLessonId=null!==(r=null===(n=e.data)||void 0===n?void 0:n.id)&&void 0!==r?r:""},k=function(e,t){e.fetchSubmissionsStatus=u.Z.Fail,l.Am.error(t.error.message)},T=function(e,t){e.fetchSupportDataStatus=u.Z.Success,e.supportData=t.payload},I=function(e,t){e.fetchSupportDataStatus=u.Z.Fail,e.supportData={},l.Am.error(t.error.message)},E=function(e,t){e.sendSupportStatus=u.Z.Loading},C=function(e,t){var n,r=Date.now(),i={body:t.meta.arg.message,time:r,sender:"user"};void 0===(null===(n=e.supportData)||void 0===n?void 0:n.messages)?e.supportData={lastUpdated:r,courseId:t.meta.arg.courseId,lessonId:t.meta.arg.lessonId,messages:[i]}:(e.supportData.messages=e.supportData.messages.concat(i),e.supportData.lastUpdated=r),e.sendSupportStatus=u.Z.Success},x=function(e,t){l.Am.error(t.error.message),e.sendSupportStatus=u.Z.Fail},A=(n(49356),n(75475)),D=n(59564),O=n(27640);function P(e,t,n,r,i,s,a){try{var o=e[s](a),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(r,i)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){P(s,r,i,a,o,"next",e)}function o(e){P(s,r,i,a,o,"throw",e)}a(void 0)}))}}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){R(e,t,n[t])}))}return e}var M=(0,s.hg)("lesson/fetchLesson",function(){var e=N(i().mark((function e(t,n){var r,s,u,l,d,h,f,p,g,m,v,y,w,b,_,S,k,T,I,E,C,x,P,R,M,U,j;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.courseId,s=t.lessonId,u=t.preview,l=t.rehearsal,d=t.businessId,h=n.getState,f=n.rejectWithValue,g=h().lesson.data,m=h().course.data.id,v=h().user.data,!(u&&(null!==(y=null===v||void 0===v?void 0:v.accessLevel)&&void 0!==y?y:0)<1)){e.next=8;break}return e.abrupt("return",f("User is not a creator!"));case 8:if(w=h().course.data.chapters,b=h().course.data,void 0!==w){e.next=15;break}return e.next=13,a.Z.getCourse(r,u);case 13:b=e.sent,w=b.chapters;case 15:if(u||void 0===(null===b||void 0===b?void 0:b.additionalProperties)){e.next=40;break}if(!(void 0!==(null===(_=b.additionalProperties)||void 0===_?void 0:_.emailSuffix)&&b.additionalProperties.emailSuffix.length>0)){e.next=30;break}if(v.email&&(b.additionalProperties.emailSuffix===(0,A.zZ)(v.email)||(null!==(E=null===(T=b.additionalProperties)||void 0===T?void 0:T.customEmailAccess)&&void 0!==E?E:[]).includes(v.email))){e.next=24;break}return e.abrupt("return",f("Missing permissions for this course"));case 24:if(O.Z.isEmailVerified()){e.next=28;break}return e.abrupt("return",f("Email must be verified"));case 28:if(null!==(C=null===(I=v.billingData)||void 0===I?void 0:I.isPremium)&&void 0!==C&&C){e.next=30;break}return e.abrupt("return",f("Missing premium plan"));case 30:if(void 0===(null===(S=b.additionalProperties)||void 0===S?void 0:S.openDate)&&void 0===(null===(k=b.additionalProperties)||void 0===k?void 0:k.closeDate)){e.next=40;break}return e.next=33,D.Z.getServerTimestamp();case 33:if(x=e.sent,!(void 0!==b.additionalProperties.openDate&&x<b.additionalProperties.openDate)){e.next=38;break}return e.abrupt("return",f("Course is closed!"));case 38:if(!(void 0!==b.additionalProperties.closeDate&&x>b.additionalProperties.closeDate)){e.next=40;break}return e.abrupt("return",f("Course is closed!"));case 40:if(P=w.flatMap((function(e){return e.lessons})).find((function(e){return e.id===s})),u||void 0===(null===P||void 0===P?void 0:P.additionalProperties)){e.next=50;break}return e.next=45,D.Z.getServerTimestamp();case 45:if(U=e.sent,!(void 0!==(null===(R=P.additionalProperties)||void 0===R?void 0:R.openDate)&&P.additionalProperties.openDate>U)){e.next=48;break}return e.abrupt("return",f("Lesson is closed!"));case 48:if(!(void 0!==(null===(M=P.additionalProperties)||void 0===M?void 0:M.closeDate)&&P.additionalProperties.closeDate<U)){e.next=50;break}return e.abrupt("return",f("Lesson is closed!"));case 50:if(j=!0===(null===(p=w.flatMap((function(e){return e.lessons})).find((function(e){return e.id==s})))||void 0===p?void 0:p.isProject),g.id!==s||m!==r){e.next=53;break}return e.abrupt("return",{data:g,isProject:j,rehearsal:l});case 53:if(!j){e.next=55;break}return e.abrupt("return",(d?a.Z.getBusinessLesson(r,s,d):a.Z.getLesson(r,s,u)).then(function(){var e=N(i().mark((function e(t){var n,a,l,d,f,p,g,m,v,y,b,_;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=w.findIndex((function(e){return e.lessons.some((function(e){return e.id===s}))})),a=w[n].lessons.findIndex((function(e){return e.id===s})),l=(0,A.RA)(w,n,a),d=l.id,f=""===h().lesson.lang?t.task.languages[0]:h().lesson.lang,u){e.next=26;break}if(!(p=h().userProgress.progress).hasOwnProperty(r)||!(null!==(g=p[r])&&void 0!==g?g:{}).hasOwnProperty(d)){e.next=23;break}if(!(m=p[r][d]).done){e.next=20;break}if(!t.isMultiFile){e.next=16;break}return v=m.hasOwnProperty(f)?m[f]:[],e.abrupt("return",{data:t,isProject:j,lastLessonFiles:v.map((function(e){return L({},e,{payload:o.Z.decode(e.payload)})}))});case 16:return y=m.hasOwnProperty(f)?m[f]:"",e.abrupt("return",{data:t,isProject:j,lastLessonCode:o.Z.decode(y)});case 18:e.next=21;break;case 20:case 23:return e.abrupt("return",{data:null,isProject:j});case 21:e.next=24;break;case 24:e.next=33;break;case 26:if(!t.isMultiFile){e.next=31;break}return b=c.Z.loadLastCodeMultiFiles(r,d,f),e.abrupt("return",{data:t,isProject:j,lastLessonFiles:b});case 31:return _=c.Z.loadLastCode(r,d,f),e.abrupt("return",{data:t,isProject:j,lastLessonCode:_});case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 55:return e.abrupt("return",(d?a.Z.getBusinessLesson(r,s,d):a.Z.getLesson(r,s,u)).then((function(e){return{data:e,isProject:j,rehearsal:l}})));case 56:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),U=(0,s.hg)("lesson/fetchChallenge",function(){var e=N(i().mark((function e(t,n){var r,s,o,u,c,l,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.challengeId,s=t.preview,o=n.getState,u=n.rejectWithValue,c=o().lesson.data,l=o().user.data,!(s&&(null!==(d=null===l||void 0===l?void 0:l.accessLevel)&&void 0!==d?d:0)<1)){e.next=6;break}return e.abrupt("return",u("User is not a creator!"));case 6:if(c.id!==r){e.next=8;break}return e.abrupt("return",{data:c});case 8:return e.abrupt("return",a.Z.getChallenge(r,s).then((function(e){return{data:e}})));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),j=(0,s.hg)("lesson/fetchSubmissions",N(i().mark((function e(){var t,n,r,s,a,o,u,c=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]&&c[0],n=(c.length>1?c[1]:void 0).getState,r=n().lesson,s=r.courseId,a=r.data,o=r.submissionsCourseId,u=r.submissionsLessonId,o!==s||u!==a.id||t){e.next=4;break}return e.abrupt("return",n().lesson.submissions);case 4:return e.next=6,D.Z.getChallengeSubmissions(s,a.id);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))),F=(0,s.hg)("lesson/fetchSupportData",function(){var e=N(i().mark((function e(t,n){var r,s,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.courseId,s=t.lessonId,o=n.getState,u=o().user.data.uid,e.next=4,a.Z.getUserSupportData(u,r,s);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),V=(0,s.hg)("lesson/sendSupport",function(){var e=N(i().mark((function e(t,n){var r,s,a,o,u,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.message,s=t.courseId,a=t.lessonId,o=n.getState,u=o().user.data.uid,c=o().user.data.email,l=o().lesson.supportData,e.next=6,D.Z.sendSupport(c,u,r,s,a,l.tid);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),B=(0,s.oM)({name:"lesson",initialState:{data:{},apiResult:{},status:u.Z.None,fetchSubmissionsStatus:u.Z.None,error:"",code:"",files:[],openPaths:[],selectedPath:null,lang:"",contentType:"lesson",courseId:"",submissionsCourseId:"",submissionsLessonId:"",submissions:[],showTour:!1,tourStepIndex:0,rehearsal:!1,showSolutionAlert:!1,showSolution:!1,showLimitReached:!1,limitReachedType:0,showCourseDone:!1,showWeeklyGoalsDoneTour:!1,supportData:{},fetchSupportDataStatus:u.Z.None,sendSupportStatus:u.Z.None,showExpendedIO:!1,expendedData:{}},reducers:{setCode:function(e,t){var n;(null===(n=e.data)||void 0===n?void 0:n.isMultiFile)?(e.files=e.files.map((function(n){return n.path===e.selectedPath&&(n.payload=t.payload),n})),c.Z.saveLastCodeMultiFiles(e.courseId,e.data.id+(e.rehearsal?d.yd:""),e.lang,e.files)):(c.Z.saveLastCode(e.courseId,e.data.id+(e.rehearsal?d.yd:""),e.lang,t.payload),e.code=t.payload)},resetCode:function(e,t){var n,r,i,s;(null===(n=e.data)||void 0===n?void 0:n.isMultiFile)?e.data.isProject?(e.files=e.data.lastLessonFiles,e.openPaths=e.files.map((function(e){return e.path})),e.selectedPath=null!==(r=e.data.task.defaultCodes[e.lang].find((function(e){return e.main})).path)&&void 0!==r?r:null,c.Z.saveLastCodeMultiFiles(e.courseId,e.data.id+(e.rehearsal?d.yd:""),e.lang,e.files)):void 0!==(null===(i=e.data.task)||void 0===i?void 0:i.defaultCodes)&&void 0!==e.data.task.defaultCodes[e.lang]?(e.files=e.data.task.defaultCodes[e.lang].map((function(e){return f({},e,{payload:o.Z.decode(e.payload)})})),e.openPaths=e.data.task.defaultCodes[e.lang].map((function(e){return e.path})),e.selectedPath=null!==(s=e.data.task.defaultCodes[e.lang].find((function(e){return e.main})).path)&&void 0!==s?s:null,c.Z.saveLastCodeMultiFiles(e.courseId,e.data.id+(e.rehearsal?d.yd:""),e.lang,e.files)):(e.files=[],e.openPaths=[],e.selectedPath=null):e.data.isProject?(e.code=e.data.lastLessonCode,c.Z.saveLastCode(e.courseId,e.data.id+(e.rehearsal?d.yd:""),e.lang,e.code)):(e.code=p(e.data.task,e.lang),c.Z.saveLastCode(e.courseId,e.data.id+(e.rehearsal?d.yd:""),e.lang,e.code))},updateLanguage:function(e,t){c.Z.saveLastLanguage(t.payload),e.lang=t.payload;var n=c.Z.loadLastCode(e.courseId,e.data.id+(e.rehearsal?d.yd:""),e.lang);e.code=null!==n&&void 0!==n?n:p(e.data.task,e.lang)},setContentType:function(e,t){e.contentType=t.payload},setShowTour:function(e,t){e.showTour=t.payload},setTourStepIndex:function(e,t){e.tourStepIndex=t.payload},setShowSolutionAlert:function(e,t){e.showSolutionAlert=t.payload},setShowSolution:function(e,t){e.showSolution=t.payload},setSolutionCode:function(e,t){var n,r;(null===(n=e.data)||void 0===n?void 0:n.isMultiFile)?(e.files=e.data.task.solutionCodes.map((function(e){return f({},e,{payload:o.Z.decode(e.payload)})})),e.openPaths=e.data.task.solutionCodes.map((function(e){return e.path})),e.selectedPath=null!==(r=e.data.task.solutionCodes.find((function(e){return e.main})).path)&&void 0!==r?r:null,c.Z.saveLastCodeMultiFiles(e.courseId,e.data.id+(e.rehearsal?d.yd:""),e.lang,e.files)):(e.code=o.Z.decode(e.data.task.solutionCodes[e.data.task.languages[0]]),c.Z.saveLastCode(e.courseId,e.data.id+(e.rehearsal?d.yd:""),e.lang,e.code))},setShowLimitReached:function(e,t){var n;e.showLimitReached=t.payload.show,e.limitReachedType=null!==(n=t.payload.type)&&void 0!==n?n:0},setShowCourseDone:function(e,t){e.showCourseDone=t.payload},setShowExpendedIO:function(e,t){e.expendedData=t.payload,e.showExpendedIO=!0},setHideExpendedIO:function(e,t){e.showExpendedIO=!1,e.expendedData={}},addOpenPath:function(e,t){e.openPaths.includes(t.payload)||e.openPaths.push(t.payload),e.selectedPath=t.payload},removeOpenPath:function(e,t){e.openPaths.includes(t.payload)&&(e.openPaths=e.openPaths.filter((function(e){return e!==t.payload})),e.selectedPath===t.payload&&(e.selectedPath=null))},setSelectedPath:function(e,t){e.selectedPath=t.payload},setShowWeeklyGoalsDoneTour:function(e,t){e.showWeeklyGoalsDoneTour=t.payload}},extraReducers:function(e){e.addCase(M.pending,g).addCase(M.fulfilled,m).addCase(M.rejected,v).addCase(U.pending,y).addCase(U.fulfilled,w).addCase(U.rejected,b).addCase(j.pending,_).addCase(j.fulfilled,S).addCase(j.rejected,k).addCase(F.fulfilled,T).addCase(F.rejected,I).addCase(V.pending,E).addCase(V.fulfilled,C).addCase(V.rejected,x)}}),Z=B.actions,q=Z.setCode,z=Z.resetCode,H=Z.updateLanguage,$=Z.setContentType,W=Z.setShowTour,Y=Z.setTourStepIndex,G=Z.setShowSolutionAlert,K=Z.setShowSolution,Q=Z.setSolutionCode,J=Z.setShowLimitReached,X=Z.setShowCourseDone,ee=Z.setShowExpendedIO,te=Z.setHideExpendedIO,ne=Z.addOpenPath,re=Z.removeOpenPath,ie=Z.setSelectedPath,se=Z.setShowWeeklyGoalsDoneTour,ae=B.reducer},23382:function(e,t,n){"use strict";n.d(t,{cJ:function(){return P},ZP:function(){return q},dj:function(){return N},m4:function(){return R},zD:function(){return j},_5:function(){return O},ID:function(){return B},f8:function(){return V},cX:function(){return F},PP:function(){return Z},tk:function(){return L}});var r=n(34051),i=n.n(r),s=n(77236),a=n(35185),o=n(40782),u=n(4231),c=function(e,t){e.runCodeStatus=u.Z.Loading,e.apiResult={}},l=function(e,t){var n,r,i,s;if(e.runCodeStatus=u.Z.Success,e.apiResult=t.payload.data,!t.meta.arg){var a;if(void 0!==(null===(n=t.payload)||void 0===n?void 0:n.firstDone)?(e.done=!0,e.firstDone=!0,e.streakUpdate=t.payload.streakUpdate):void 0!==(null===(r=t.payload)||void 0===r?void 0:r.streakUpdate)?(e.done=!t.payload.data.failed&&!t.payload.data.regexFailed&&t.payload.data.testsResult.every((function(e){return!e.failed})),e.firstDone=!1,e.streakUpdate=t.payload.streakUpdate):(e.done=!t.payload.failed&&!t.payload.regexFailed&&t.payload.testsResult.every((function(e){return!e.failed})),e.firstDone=!1,e.streakUpdate=!1),void 0!==(null===(i=t.payload)||void 0===i?void 0:i.streakFreezeRemove))e.streakFreezeRemove=null===(a=t.payload)||void 0===a?void 0:a.streakFreezeRemove;(null===(s=t.payload)||void 0===s?void 0:s.streakFreezeSave)&&(e.streakFreezeSave=!0),e.showLessonDone=e.done}},d=function(e,t){e.runCodeStatus=u.Z.Fail,e.runCodeError=t.error.message,(null===t||void 0===t?void 0:t.payload)&&o.Am.error(t.payload)},h=function(e,t){e.askAIStatus=u.Z.Loading},f=function(e,t){e.askAIStatus=u.Z.Success,e.askAIData.unshift(t.payload),e.currentView=L.AI_RESPONSES},p=function(e,t){e.askAIStatus=u.Z.Fail,(null===t||void 0===t?void 0:t.payload)&&o.Am.error(t.payload)},g=function(e,t){e.explainSolutionStatus=u.Z.Loading},m=function(e,t){e.explainSolutionStatus=u.Z.Success;var n=t.payload;n.type="explainSolution",e.askAIData.unshift(n),e.currentView=L.AI_RESPONSES},v=function(e,t){e.explainSolutionStatus=u.Z.Fail,(null===t||void 0===t?void 0:t.payload)&&o.Am.error(t.payload)},y=function(e,t){e.fetchLastAiResponsesStatus=u.Z.Loading},w=function(e,t){var n=t.payload.filter((function(t){return e.askAIData.every((function(e){return e.date!==t.date}))}));e.askAIData=e.askAIData.concat(n),e.fetchLastAiResponsesStatus=u.Z.Success},b=function(e,t){(null===t||void 0===t?void 0:t.payload)&&o.Am.error(t.payload),e.fetchLastAiResponsesStatus=u.Z.Fail},_=n(57919),S=n(88036),k=n(80027),T=n(45679),I=n(59564),E=n(64306);function C(e,t,n,r,i,s,a){try{var o=e[s](a),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(r,i)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){C(s,r,i,a,o,"next",e)}function o(e){C(s,r,i,a,o,"throw",e)}a(void 0)}))}}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){A(e,t,n[t])}))}return e}var O=(0,s.hg)("task/runCode",function(){var e=x(i().mark((function e(t,n){var r,s,o,u,c,l,d,h,f,p,g,m,v,y,w;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState,n.rejectWithValue,s=n.dispatch,o=r().lesson.code,u=r().lesson.files,c=r().lesson.lang,l=r().lesson,d=l.data,h=l.courseId,f={lang:c,courseId:h,lessonId:d.id,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone},t&&(f.isPreview=t),d.isMultiFile?(g=d.task.defaultCodes[c].find((function(e){return e.main})).path,f.payloads=u.map((function(e){return D({},e,{payload:a.Z.encode(e.payload),main:g===e.path})}))):f.payload=a.Z.encode(o),e.next=11,I.Z.submitChallenge(f);case 11:return p=e.sent,m=p.submissionResult,v=p.streakResult,y=p.metadataAfterCodeRun,w={data:m},t||(s((0,T.Nz)(y)),p.isFailed&&s((0,k.jv)({courseId:h,lessonId:d.id})),w.firstDone=p.firstDone,w.streakUpdate=v.streakUpdate,w.streakFreezeRemove=v.streakFreezeRemove,w.streakFreezeSave=v.streakFreezeSave),e.abrupt("return",w);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),P=(0,s.hg)("task/askAI",function(){var e=x(i().mark((function e(t,n){var r,s,a,o,u,c,l,d,h,f,p,g,m,v,y,w,b;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,s=n.rejectWithValue,a=n.dispatch,!t){e.next=4;break}return e.abrupt("return",s("Cannot ask AI on preview"));case 4:return h=null===(o=r().user.data)||void 0===o?void 0:o.uid,f=r().lesson,p=f.data,g=f.courseId,e.next=8,I.Z.aiLessonHelp(g,p.id).catch((function(e){var t;return{error:!0,msg:e.toString(),code:null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status}}));case 8:if(!(null===(m=e.sent)||void 0===m?void 0:m.error)){e.next=11;break}return e.abrupt("return",s(403===m.code?"Error 403: Please refresh the page":m.msg));case 11:return e.next=13,a((0,k.GG)());case 13:return v=new Date,y=(null===(u=r().user.data)||void 0===u||null===(c=u.metadata)||void 0===c?void 0:c.lastAskAiDate)?new Date(null===(l=r().user.data)||void 0===l||null===(d=l.metadata)||void 0===d?void 0:d.lastAskAiDate):void 0,w=void 0===y||y.getFullYear()!==v.getFullYear()||y.getMonth()!==v.getMonth()||y.getDate()!==v.getDate(),b={"metadata.lastAskAiDate":(0,S.Bt)(),"metadata.askAiNum":(0,S.nP)(1),"metadata.todayAskAiNum":(0,S.nP)(1)},w?(b["metadata.todayAskAiNum"]=1,a((0,T.Nz)({lastAskAiDate:v.getTime(),todayAskAiNum:1}))):a((0,T.Nz)({lastAskAiDate:v.getTime(),todayAskAiIncrease:1})),e.next=20,_.Z.updateUser(h,b);case 20:return e.abrupt("return",m);case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),N=(0,s.hg)("task/explainSolution",function(){var e=x(i().mark((function e(t,n){var r,s,a,o,u,c,l,d,h,f,p,g,m,v,y,w,b;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,s=n.rejectWithValue,a=n.dispatch,!t){e.next=4;break}return e.abrupt("return",s("Cannot ask AI on preview"));case 4:return h=null===(o=r().user.data)||void 0===o?void 0:o.uid,f=r().lesson,p=f.data,g=f.courseId,e.next=8,I.Z.aiExplainSolution(g,p.id).catch((function(e){return{error:!0,msg:e.toString()}}));case 8:if(!(null===(m=e.sent)||void 0===m?void 0:m.error)){e.next=11;break}return e.abrupt("return",s(m.msg));case 11:return a((0,E.OG)("code")),e.next=14,a((0,k.GG)());case 14:return v=new Date,y=(null===(u=r().user.data)||void 0===u||null===(c=u.metadata)||void 0===c?void 0:c.lastAskAiDate)?new Date(null===(l=r().user.data)||void 0===l||null===(d=l.metadata)||void 0===d?void 0:d.lastAskAiDate):void 0,w=void 0===y||y.getFullYear()!==v.getFullYear()||y.getMonth()!==v.getMonth()||y.getDate()!==v.getDate(),b={"metadata.lastAskAiDate":(0,S.Bt)(),"metadata.askAiNum":(0,S.nP)(1),"metadata.todayAskAiNum":(0,S.nP)(1)},w?(b["metadata.todayAskAiNum"]=1,a((0,T.Nz)({lastAskAiDate:v.getTime(),todayAskAiNum:1}))):a((0,T.Nz)({lastAskAiDate:v.getTime(),todayAskAiIncrease:1})),e.next=21,_.Z.updateUser(h,b);case 21:return e.abrupt("return",m);case 22:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),R=(0,s.hg)("task/fetchLastAiResponses",function(){var e=x(i().mark((function e(t,n){var r,s,a,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,s=n.rejectWithValue,a=r().lesson,o=a.data,u=a.courseId,!(r().task.askAIData.length<=1)){e.next=7;break}return e.abrupt("return",I.Z.aiLessonHistory(u,o.id).catch((function(e){return s(e.toString())})));case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),L={TEST_CASES:"TEST_CASES",CONSOLE:"CONSOLE",AI_RESPONSES:"AI RESPONSES"},M=(0,s.oM)({name:"task",initialState:{apiResult:{},askAIData:[],runCodeStatus:u.Z.None,fetchLastAiResponsesStatus:u.Z.None,runCodeError:"",askAIStatus:u.Z.None,explainSolutionStatus:u.Z.None,done:!1,showLessonDone:!1,firstDone:!1,streakUpdate:!1,currentView:L.TEST_CASES},reducers:{load:function(e,t){e.apiResult={},e.askAIData=[],e.fetchLastAiResponsesStatus=u.Z.None,e.done=!1,e.showLessonDone=!1,e.runCodeStatus=u.Z.None,e.firstDone=!1,e.streakUpdate=!1,e.currentView=L.TEST_CASES},setHideLessonDone:function(e,t){e.showLessonDone=!1},setShowLessonDone:function(e,t){e.showLessonDone=!0},setCurrentView:function(e,t){e.currentView=t.payload},setAiResponseThumbs:function(e,t){e.askAIData[t.payload.index].thumbs=t.payload.thumbs},streakFreezeRemoveHandled:function(e,t){e.streakFreezeRemove=!1}},extraReducers:function(e){e.addCase(O.pending,c).addCase(O.fulfilled,l).addCase(O.rejected,d).addCase(P.pending,h).addCase(P.fulfilled,f).addCase(P.rejected,p).addCase(N.pending,g).addCase(N.fulfilled,m).addCase(N.rejected,v).addCase(R.pending,y).addCase(R.fulfilled,w).addCase(R.rejected,b)}}),U=M.actions,j=U.load,F=U.setHideLessonDone,V=(U.setShowLessonDone,U.setCurrentView),B=U.setAiResponseThumbs,Z=U.streakFreezeRemoveHandled,q=M.reducer},97986:function(e,t,n){"use strict";n.d(t,{ZP:function(){return k},Vx:function(){return b},Zg:function(){return _},wc:function(){return S}});var r=n(34051),i=n.n(r),s=n(77236),a=n(57919),o=n(4231),u=function(e,t){e.fetchRoadmapStatus=o.Z.Loading},c=function(e,t){e.fetchRoadmapStatus=o.Z.Success,t.payload&&(e.data[t.meta.arg]=t.payload)},l=function(e,t){e.fetchRoadmapStatus=o.Z.Fail},d=function(e,t){e.fetchRoadmapsStatus=o.Z.Loading},h=function(e,t){e.fetchRoadmapsStatus=o.Z.Success,t.payload&&(e.data=t.payload)},f=function(e,t){e.fetchRoadmapsStatus=o.Z.Fail},p=function(e,t){e.updateCurrentRoadmapStatus=o.Z.Loading},g=function(e,t){e.updateCurrentRoadmapStatus=o.Z.Success},m=function(e,t){e.updateCurrentRoadmapStatus=o.Z.Fail},v=n(45679);function y(e,t,n,r,i,s,a){try{var o=e[s](a),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(r,i)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){y(s,r,i,a,o,"next",e)}function o(e){y(s,r,i,a,o,"throw",e)}a(void 0)}))}}var b=(0,s.hg)("roadmaps/fetchRoadmap",function(){var e=w(i().mark((function e(t,n){var r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,void 0===(s=r().roadmaps.data[t])){e.next=6;break}return e.abrupt("return",s);case 6:return e.abrupt("return",a.Z.getRoadmap(t));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_=(0,s.hg)("roadmaps/fetchRoadmaps",function(){var e=w(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,r().roadmaps.fetchRoadmapsStatus!==o.Z.Success){e.next=6;break}return e.abrupt("return",data);case 6:return e.abrupt("return",a.Z.getRoadmaps());case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),S=(0,s.hg)("roadmaps/updateCurrentRoadmap",function(){var e=w(i().mark((function e(t,n){var r,s,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rid,s=n.getState,o=n.dispatch,u=s().user.data.uid,e.next=4,a.Z.updateUserCurrentRoadmap(u,r);case 4:o((0,v.TG)({rid:r}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),k=(0,s.oM)({name:"roadmaps",initialState:{data:{},fetchRoadmapsStatus:o.Z.None,fetchRoadmapStatus:o.Z.None,updateCurrentRoadmapStatus:o.Z.None},extraReducers:function(e){e.addCase(_.pending,d).addCase(_.fulfilled,h).addCase(_.rejected,f).addCase(b.pending,u).addCase(b.fulfilled,c).addCase(b.rejected,l).addCase(S.pending,p).addCase(S.fulfilled,g).addCase(S.rejected,m)}}).reducer},4231:function(e,t){"use strict";var n=Object.freeze({None:0,Loading:1,Success:2,Fail:3});t.Z=n},65524:function(e,t,n){"use strict";n.d(t,{ZP:function(){return p},Im:function(){return f}});var r=n(34051),i=n.n(r),s=n(77236),a=n(40782),o=n(4231),u=function(e,t){e.requestCheckoutStatus=o.Z.Loading},c=function(e,t){e.requestCheckoutStatus=o.Z.Success,window.location=t.payload},l=function(e,t){e.requestCheckoutStatus=o.Z.Fail,t.payload?a.Am.error(t.payload):a.Am.error(t.error.message)},d=n(59564);function h(e,t,n,r,i,s,a){try{var o=e[s](a),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(r,i)}var f=(0,s.hg)("billing/requestCheckout",function(){var e,t=(e=i().mark((function e(t,n){var r,s,a,o,u,c,l,h,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.type,s=t.couponId,a=n.getState,o=n.rejectWithValue,u=a().user.data.email,c=a().user.data.experiment,l="price_1MXtOGCp0KKrcu3kL7DMIAlk",h="price_1MXtN5Cp0KKrcu3kb5dvMzU0",f="price_1M0thsCp0KKrcu3kLSXrxMOU",void 0!==c&&null!==c&&("pricing_50"===c.experimentId&&"B"===c.groupId?(l="price_1OexLmCp0KKrcu3k5llRXVf9",h="price_1OexLICp0KKrcu3kf6P0U9KR",f="price_1OexGcCp0KKrcu3kyGr6hWDi"):"pricing_50"===c.experimentId&&"C"===c.groupId?(l="price_1Og8xiCp0KKrcu3kP6kQSayp",h="price_1Og8whCp0KKrcu3kok9W0l3L",f="price_1Og8vsCp0KKrcu3knwSaIbzO"):"pricing_50"===c.experimentId&&"D"===c.groupId&&(l="price_1OmHYZCp0KKrcu3kx0N6swhL",h="price_1OmHYECp0KKrcu3kil4L63KK",f="price_1OmHXnCp0KKrcu3knYVC35nL")),!u){e.next=16;break}e.t0=r,e.next="year"===e.t0?11:"semiYear"===e.t0?12:13;break;case 11:return e.abrupt("return",d.Z.createCheckoutSession(l,u,s));case 12:return e.abrupt("return",d.Z.createCheckoutSession(h,u,s));case 13:return e.abrupt("return",d.Z.createCheckoutSession(f,u,s));case 14:e.next=17;break;case 16:return e.abrupt("return",o("Please create an account before"));case 17:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){h(s,r,i,a,o,"next",e)}function o(e){h(s,r,i,a,o,"throw",e)}a(void 0)}))});return function(e,n){return t.apply(this,arguments)}}()),p=(0,s.oM)({name:"billing",initialState:{requestCheckoutStatus:o.Z.None},extraReducers:function(e){e.addCase(f.pending,u).addCase(f.fulfilled,c).addCase(f.rejected,l)}}).reducer},79441:function(e,t,n){"use strict";n.d(t,{DM:function(){return r},cY:function(){return i},vC:function(){return s},OP:function(){return a},nh:function(){return o},JW:function(){return u}});var r=function(e,t,n){if(!e||0===Object.keys(e).length)return function(e){};var r=e.flatMap((function(e){return e.lessons})),i=r.findIndex((function(e){return e.id===n}));if(0===i)return function(e){};var s=r[i-1];return function(e){return e.userProgress.progress.hasOwnProperty(t)&&e.userProgress.progress[t].hasOwnProperty(s.id)?e.userProgress.progress[t][s.id]:{}}},i=function(e,t){return function(n){return n.userProgress.progress.hasOwnProperty(e)&&n.userProgress.progress[e].hasOwnProperty(t)?n.userProgress.progress[e][t]:{}}},s=function(e){return function(t){return t.userProgress.progress.hasOwnProperty(e)?t.userProgress.progress[e]:{}}},a=function(){var e;return function(t){var n,r;return null!==(e=null===(n=t.user.data)||void 0===n||null===(r=n.billingData)||void 0===r?void 0:r.isPremium)&&void 0!==e&&e}},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n,r,i,s,o,u=null!==(o=null===(n=t.user.data)||void 0===n||null===(r=n.metadata)||void 0===r?void 0:r.todayCompilesNum)&&void 0!==o?o:0,c=(null===(i=t.user.data)||void 0===i||null===(s=i.metadata)||void 0===s?void 0:s.lastChallengeRunDate)?new Date(t.user.data.metadata.lastChallengeRunDate):new Date,l=(new Date).setHours(0,0,0,0)===c.setHours(0,0,0,0);return!(a()(t)||!l)&&("daily_limit_1"===(null===e||void 0===e?void 0:e.experimentId)&&"B"===(null===e||void 0===e?void 0:e.groupId)?u>=30:"daily_limit_2"===(null===e||void 0===e?void 0:e.experimentId)&&"B"===(null===e||void 0===e?void 0:e.groupId)?u>=15:u>=10)}},u=function(){return function(e){var t,n,r,i,s,o=null!==(s=null===(t=e.user.data)||void 0===t||null===(n=t.metadata)||void 0===n?void 0:n.todayAskAiNum)&&void 0!==s?s:0,u=(null===(r=e.user.data)||void 0===r||null===(i=r.metadata)||void 0===i?void 0:i.lastAskAiDate)?new Date(e.user.data.metadata.lastAskAiDate):new Date,c=(new Date).setHours(0,0,0,0)===u.setHours(0,0,0,0);return!(a()(e)||!c)&&o>=3}}},45679:function(e,t,n){"use strict";n.d(t,{r4:function(){return se},ZP:function(){return Re},L4:function(){return me},ul:function(){return ge},nZ:function(){return pe},Ug:function(){return ve},BT:function(){return ae},Nh:function(){return _e},C3:function(){return Se},wJ:function(){return Ce},Lm:function(){return xe},K4:function(){return we},S6:function(){return Ne},b8:function(){return de},LS:function(){return De},dP:function(){return Ie},IO:function(){return Ae},tm:function(){return le},Nz:function(){return Ee},et:function(){return ue},f$:function(){return be},n7:function(){return ye},Vs:function(){return oe},gJ:function(){return he},Nq:function(){return ce},TG:function(){return Oe},r8:function(){return Pe}});var r=n(34051),i=n.n(r),s=n(85893),a=n(77236),o=n(57919),u=n(59564),c=n(97418),l=n(4231),d=n(40782),h=n(75475),f=function(e,t){e.createStatus=l.Z.Loading},p=function(e,t){null!=t.payload&&(void 0!==e.data&&null!==e.data||(e.data={}),Object.keys(t.payload).forEach((function(n){e.data[n]=t.payload[n]})),e.isLogged=!0,e.accessToken=t.meta.arg.accessToken),e.createStatus=l.Z.Success},g=function(e,t){e.isLogged=!1,d.Am.error(t.error.message),e.createStatus=l.Z.Fail},m=function(e,t){e.fetchStatus=l.Z.Loading},v=function(e,t){if(null!=t.payload)void 0!==e.data&&null!==e.data||(e.data={}),Object.keys(t.payload).forEach((function(n){e.data[n]=t.payload[n]})),e.isLogged=!0,e.accessToken=t.meta.arg.accessToken;else{var n=t.meta.arg;if(n){void 0!==e.data&&null!==e.data||(e.data={}),e.accessToken=n.accessToken;var r=(0,h.dF)(n);e.data.uid=r.uid,e.data.email=r.email,e.data.displayName=r.displayName,e.data.imagePath=r.imagePath,e.isLogged=!0}else e.data={},e.notifications=[],e.accessToken=null,e.isLogged=!1}e.fetchStatus=l.Z.Success},y=function(e,t){e.fetchStatus=l.Z.Fail,e.fetchError=t.error.message,e.isLogged=!1,d.Am.error(t.error.message)},w=function(e,t){t.payload&&(e.data.metadata.limitReachedNum+=1,e.data.metadata.lastLimitReachedDate=Date.now())},b=function(e,t){var n,r;e.createSpecialPromoCodeStatus=l.Z.Loading;var i=Date.now()+864e5;void 0===(null===(n=e.data)||void 0===n||null===(r=n.metadata)||void 0===r?void 0:r.specialPromotionCode)&&(e.data.metadata.specialPromotionCode={}),e.data.metadata.specialPromotionCode.expiresAt=i},_=function(e,t){var n=t.payload;e.data.metadata.specialPromotionCode.promoCode=n,e.createSpecialPromoCodeStatus=l.Z.Success},S=function(e,t){e.updateStatus=l.Z.Loading},k=function(e,t){e.data.displayName=t.meta.arg.updatedData.displayName,e.data.bio=t.meta.arg.updatedData.bio,e.data.githubPage=t.meta.arg.updatedData.githubPage,e.data.linkedInPage=t.meta.arg.updatedData.linkedInPage,e.data.facebookPage=t.meta.arg.updatedData.facebookPage,e.data.instagramPage=t.meta.arg.updatedData.instagramPage,e.data.twitterPage=t.meta.arg.updatedData.twitterPage,e.data.personalWebPage=t.meta.arg.updatedData.personalWebPage,e.data.youtubePage=t.meta.arg.updatedData.youtubePage,null!=t.meta.arg.updatedData.imagePath&&(e.data.imagePath=t.meta.arg.updatedData.imagePath),e.updateStatus=l.Z.Success,d.Am.success("Profile updated"),void 0!==e.currentLearningGoals&&void 0!==e.currentLearningGoals.goals.profile_update&&(e.currentLearningGoals.goals.profile_update.current=1)},T=function(e,t){e.updateStatus=l.Z.Fail,e.updateError=t.error.message,d.Am.error(t.error.message)},I=function(e,t){var n;!0===t.payload&&(void 0!==e.currentLearningGoals&&void 0!==e.currentLearningGoals.goals.visit_store&&(e.currentLearningGoals.goals.visit_store.current=1),void 0===(null===(n=e.data)||void 0===n?void 0:n.metadata)&&(e.data.metadata={}),e.data.metadata.visitedStore=!0)},E=function(e,t){var n,r,i,s,a,o;null!==t.payload&&(void 0!==(null===(n=t.payload)||void 0===n?void 0:n.score)&&(e.data.score=t.payload.score),void 0!==(null===(r=t.payload)||void 0===r?void 0:r.streak)&&(e.data.streak=t.payload.streak),void 0!==(null===(i=t.payload)||void 0===i?void 0:i.doneCourses)&&(e.data.doneCourses=t.payload.doneCourses),void 0!==(null===(s=t.payload)||void 0===s||null===(a=s.metadata)||void 0===a?void 0:a.lastStreakDate)&&(void 0===(null===(o=e.data)||void 0===o?void 0:o.metadata)&&(e.data.metadata={}),e.data.metadata.lastStreakDate=t.payload.metadata.lastStreakDate))},C=function(e,t){t.meta.arg.more?t.payload&&(e.notifications=e.notifications.concat(t.payload),t.payload.length<5&&(e.allNotificationsFetched=!0)):t.payload&&(e.notifications=t.payload,t.payload.length<5&&(e.allNotificationsFetched=!0))},x=function(e,t){e.fetchReferredUsersStatus=l.Z.Loading},A=function(e,t){e.referredUsers=t.payload.referredUsers,e.referredData=t.payload.referredData,e.fetchReferredUsersStatus=l.Z.Success},D=function(e,t){d.Am.error(t.error.message),e.fetchReferredUsersStatus=l.Z.Fail},O=function(e,t){e.data.hasOwnProperty("metadata")||(e.data.metadata={}),e.data.metadata.referredUsers=t.payload},P=function(e,t){e.redeemReferredUserStatus=l.Z.Loading},N=function(e,t){e.redeemReferredUserStatus=l.Z.Fail,d.Am.error(t.error.message)},R=function(e,t){var n;e.data.score+=t.payload,void 0===(null===(n=e.referredData)||void 0===n?void 0:n.users)&&(e.referredData.users={}),void 0===e.referredData.users[t.meta.arg]&&(e.referredData.users[t.meta.arg]={redeems:[]}),e.referredData.users[t.meta.arg].redeems.push({score:t.payload,timestamp:Date.now()}),e.redeemReferredUserStatus=l.Z.Success,d.Am.success("Redeemed ".concat(t.payload," score!"))},L=function(e,t){e.data.hasOwnProperty("badges")||(e.data.badges={}),e.data.badges[t.meta.arg.type]=t.meta.arg.level},M=function(e,t){e.purchaseStatus=l.Z.Loading},U=function(e,t){(e.purchaseStatus=l.Z.Success,null!==t.payload)&&(t.payload.purchased&&(e.data.metadata.streakFreeze=!0,void 0===e.data.metadata.productsNum&&(e.data.metadata.productsNum=0),e.data.metadata.productsNum+=1,e.data.score+=t.payload.score.operand))},j=function(e,t){e.purchaseStatus=l.Z.Fail,d.Am.error(t.error.message)},F=function(e,t){e.purchaseStatus=l.Z.Loading},V=function(e,t){(e.purchaseStatus=l.Z.Success,null!==t.payload)&&(t.payload.purchased&&(void 0===e.data.billingData&&(e.data.billingData={}),e.data.billingData.isPremium=!0,void 0===e.data.metadata.productsNum&&(e.data.metadata.productsNum=0),e.data.metadata.productsNum+=1,e.data.score+=t.payload.score.operand))},B=function(e,t){t.meta.arg.intensity>0?e.data.goalsIntensity=t.meta.arg.intensity:void 0!==e.data.goalsIntensity&&delete e.data.goalsIntensity,e.currentLearningGoals=void 0},Z=function(e,t){e.currentLearningGoals=t.payload},q=function(e,t){e.currentLearningGoals=t.payload},z=function(e,t){e.getGoalsRewardStatus=l.Z.Loading},H=function(e,t){if(t.payload.reward>0){var n,r;if(t.meta.arg.updateScore)void 0===e.data.score&&(e.data.score=0),void 0===e.data.maxScore&&(e.data.maxScore=0),e.data.score+=t.payload.reward-(null!==(n=e.currentLearningGoals.rewarded)&&void 0!==n?n:0),e.data.maxScore+=t.payload.reward-(null!==(r=e.currentLearningGoals.rewarded)&&void 0!==r?r:0);e.currentLearningGoals.rewarded=t.payload.reward,t.payload.done&&(void 0===e.data.metadata&&(e.data.metadata={}),e.data.metadata.weeklyGoalsDone+=1)}e.getGoalsRewardStatus=l.Z.Success},$=function(e,t){d.Am.error(t.error.message),e.getGoalsRewardStatus=l.Z.Fail},W=function(e,t){e.purchaseStatus=l.Z.Fail,d.Am.error(t.error.message)},Y=function(e,t){},G=function(e,t){},K=function(e,t){"Rejected"===t.error.message?d.Am.error(t.payload):d.Am.error(t.error.message)},Q=n(77091),J=n(64306),X=n(23382),ee=n(88036),te=n(21432);function ne(e,t,n,r,i,s,a){try{var o=e[s](a),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(r,i)}function re(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){ne(s,r,i,a,o,"next",e)}function o(e){ne(s,r,i,a,o,"throw",e)}a(void 0)}))}}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se=(0,a.hg)("user/createUser",function(){var e=re(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(n=t.res)?Q.Z.event("login"):Q.Z.event("signup"),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ae=(0,a.hg)("user/fetchUser",function(){var e=re(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t){e.next=3;break}return Q.Z.setUser(t.uid),e.abrupt("return",o.Z.getUser(t.uid,!0).then((function(e){var t,n,r,i,s;if(null===e||void 0===e||null===(t=e.billingData)||void 0===t?void 0:t.isPremium)if("month"===(null===e||void 0===e||null===(n=e.billingData)||void 0===n?void 0:n.interval))void 0===(null===e||void 0===e||null===(s=e.billingData)||void 0===s?void 0:s.isEventNotified)||e.billingData.isEventNotified||(Q.Z.event("purchase_premium_member_month"),u.Z.setPremiumMemberEventNotified());else if("year"===(null===e||void 0===e||null===(r=e.billingData)||void 0===r?void 0:r.interval)){var a;void 0===(null===e||void 0===e||null===(a=e.billingData)||void 0===a?void 0:a.isEventNotified)||e.billingData.isEventNotified||(Q.Z.event("purchase_premium_member_year"),u.Z.setPremiumMemberEventNotified())}else if("semi-year"===(null===e||void 0===e||null===(i=e.billingData)||void 0===i?void 0:i.interval)){var o;void 0===(null===e||void 0===e||null===(o=e.billingData)||void 0===o?void 0:o.isEventNotified)||e.billingData.isEventNotified||(Q.Z.event("purchase_premium_member_semi_year"),u.Z.setPremiumMemberEventNotified())}return e})));case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),oe=(0,a.hg)("user/updateScore",function(){var e=re(i().mark((function e(t,n){var r,a,c,l,h,f,p,g,m,v,y,w,b;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,a=n.dispatch,!r().user.isLogged){e.next=17;break}return l=r().user.data,h=l.score,f=l.doneCourses,p=r().lesson.courseId,e.next=7,o.Z.getUser(r().user.data.uid);case 7:return g=e.sent,(null!==h&&void 0!==h?h:0)<10&&(null!==(m=null===g||void 0===g?void 0:g.score)&&void 0!==m?m:0)>=10&&Q.Z.event("score_above_10"),(null!==h&&void 0!==h?h:0)<1&&(null!==(v=null===g||void 0===g?void 0:g.score)&&void 0!==v?v:0)>=1&&Q.Z.event("score_above_1"),(null!==h&&void 0!==h?h:0)<2&&(null!==(y=null===g||void 0===g?void 0:g.score)&&void 0!==y?y:0)>=2&&Q.Z.event("score_above_2"),(null===(c=Object.keys(null!==(w=null===g||void 0===g?void 0:g.doneCourses)&&void 0!==w?w:{}))||void 0===c?void 0:c.includes(p))&&(u.Z.updateLearningGoals("course_".concat(p)).then((function(e){if(e.done){a(Pe({id:"course_".concat(p)}));var t=r().course.data.title;d.Am.success((0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(te.ZP,{text:"Goal completed:",type:"small"}),(0,s.jsx)(te.ZP,{text:"Complete ".concat(t),bold:!0})]}),{theme:"colored"}),Q.Z.event("weekly_goals_course_done")}})),(null===(b=Object.keys(null!==f&&void 0!==f?f:{}))||void 0===b?void 0:b.includes(p))||(Q.Z.event("course_completed"),a((0,X.cX)()),a((0,J.LB)(!0)))),e.abrupt("return",g);case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ue=(0,a.hg)("user/updateBadge",function(){var e=re(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=n.getState)().user.isLogged){e.next=3;break}return e.abrupt("return",o.Z.updateUser(r().user.data.uid,ie({},"badges."+t.type,t.level)));case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ce=(0,a.hg)("user/updateUser",function(){var e=re(i().mark((function e(t){var n,r,a,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.uid,r=t.updatedData,a=t.imageFile,u.Z.updateLearningGoals("profile_update").then((function(e){e.done&&(d.Am.success((0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(te.ZP,{text:"Goal completed:",type:"small"}),(0,s.jsx)(te.ZP,{text:"Edit your profile",bold:!0})]}),{theme:"colored"}),Q.Z.event("weekly_goals_profile_update_done"))})),null==a){e.next=7;break}return e.next=5,c.Z.uploadProfileImage(n,a);case 5:l=e.sent,r.imagePath=l;case 7:return r.profileUpdated=!0,e.abrupt("return",o.Z.updateUser(n,r));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),le=(0,a.hg)("user/setStoreVisited",function(){var e=re(i().mark((function e(t,n){var r,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,!r().user.isLogged){e.next=9;break}if(void 0!==(null===(c=r().user.data)||void 0===c||null===(a=c.metadata)||void 0===a?void 0:a.visitedStore)){e.next=8;break}return u.Z.updateLearningGoals("visit_store").then((function(e){e.done&&(d.Am.success((0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(te.ZP,{text:"Goal completed:",type:"small"}),(0,s.jsx)(te.ZP,{text:"Visit Coddy Store",bold:!0})]}),{theme:"colored"}),Q.Z.event("weekly_goals_visit_store_done"))})),e.abrupt("return",o.Z.updateUser(c.uid,ie({},"metadata.visitedStore",!0)).then((function(e){return!0})));case 8:case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),de=(0,a.hg)("user/sendContact",function(){var e=re(i().mark((function e(t,n){var r,s,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,s=t.name,a=t.message,n.rejectWithValue,d.Am.success("Message sent successfully"),e.abrupt("return",u.Z.sendContact(r,s,a));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),he=(0,a.hg)("user/updateSeenLimitReached",function(){var e=re(i().mark((function e(t,n){var r,s,a,u,c,l,d,h,f,p,g,m,v,y,w;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,s=n.dispatch,c=r().user.data.uid,l=null===(a=r().user.data)||void 0===a||null===(u=a.metadata)||void 0===u?void 0:u.lastLimitReachedDate,d=new Date(null!==l&&void 0!==l?l:Date.now()),h=new Date,void 0!==l&&d.getFullYear()===h.getFullYear()&&d.getMonth()===h.getMonth()&&d.getDate()===h.getDate()){e.next=13;break}return v={"metadata.lastLimitReachedDate":(0,ee.Bt)(),"metadata.limitReachedNum":(0,ee.nP)(1)},y=null===(f=r().user.data)||void 0===f||null===(p=f.metadata)||void 0===p?void 0:p.limitReachedNum,w=null===(g=r().user.data)||void 0===g||null===(m=g.metadata)||void 0===m?void 0:m.specialPromotionCode,3===y&&void 0===w&&s(fe()),e.abrupt("return",o.Z.updateUser(c,v).then((function(){return!0})));case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),fe=(0,a.hg)("user/createSpecialPromoCode",function(){var e=re(i().mark((function e(t,n){var r,s,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState,s=r().user.data.uid,a=r().user.data.email,e.abrupt("return",u.Z.createSpecialUserPromoCode(s,a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),pe=(0,a.hg)("user/fetchNotifications",function(){var e=re(i().mark((function e(t,n){var r,s,a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.more,s=n.getState,a=s().user.notifications,r||!(a.length>0)){e.next=4;break}return e.abrupt("return",null);case 4:if(!(u=s().user.data.uid)){e.next=13;break}if(!r){e.next=10;break}return e.abrupt("return",o.Z.getUserNotifications(u,a[a.length-1].timestamp));case 10:return e.abrupt("return",o.Z.getUserNotifications(u));case 11:e.next=14;break;case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ge=(0,a.hg)("user/equipStreakFreeze",function(){var e=re(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.getState,Q.Z.event("store_equip_streak_freeze"),e.abrupt("return",u.Z.equipBooster("streak-freeze"));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),me=(0,a.hg)("user/equipPremium",function(){var e=re(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.getState,Q.Z.event("store_equip_premium"),e.abrupt("return",u.Z.equipBooster("coddy-premium-14-days"));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ve=(0,a.hg)("user/fetchReferredUsers",function(){var e=re(i().mark((function e(t,n){var r,s,a,c,d,h,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,n.rejectWithValue,r().user.isLogged){e.next=3;break}return e.abrupt("return",{referredData:{},referredUsers:[]});case 3:if(r().user.fetchReferredUsersStatus!==l.Z.Success){e.next=9;break}return s=r().user.referredUsers,e.abrupt("return",s);case 9:return e.next=11,o.Z.getUserReferredUsersData(r().user.data.uid);case 11:return a=e.sent,e.next=14,u.Z.getReferredUsers();case 14:for(c=e.sent,d=[],h=[],f=0;f<c.length;f++)h.push(o.Z.getUser(c[f].id,!0).then((function(e){return d.push(e)})));return e.next=20,Promise.all(h);case 20:return e.abrupt("return",{referredData:a,referredUsers:d});case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ye=(0,a.hg)("user/updateReferredUsersNum",function(){var e=re(i().mark((function e(t,n){var r,s,a,u,c,l,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=n.getState)().user.isLogged){e.next=9;break}if(c=null!==(u=null===(s=r().user.referredUsers)||void 0===s?void 0:s.length)&&void 0!==u?u:0,d=null!==(l=null===(a=r().user.data.metadata)||void 0===a?void 0:a.referredUsers)&&void 0!==l?l:0,c===d){e.next=9;break}return e.abrupt("return",o.Z.updateUser(r().user.data.uid,ie({},"metadata.referredUsers",c)).then((function(){return c})));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),we=(0,a.hg)("user/redeemReferredUser",function(){var e=re(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.getState,Q.Z.event("redeem_referred_user"),e.abrupt("return",u.Z.redeemReferredUser(t));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),be=(0,a.hg)("user/updateLearningGoalsIntensity",function(){var e=re(i().mark((function e(t,n){var r,s,a,c,l,d,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.week,s=t.year,a=t.intensity,!(c=n.getState)().user.isLogged){e.next=16;break}if(l=c().user.data.uid,!(a>=1)){e.next=11;break}return e.next=6,o.Z.updateUser(l,{goalsIntensity:a});case 6:return d=new Date(s,0,7*r),h=d.getTime()-24*d.getDay()*60*60*1e3,e.abrupt("return",u.Z.generateLearningGoals(r,s,a,h));case 11:return e.next=13,o.Z.updateUser(l,{goalsIntensity:(0,ee.AK)()});case 13:case 16:return e.abrupt("return",null);case 14:e.next=17;break;case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_e=(0,a.hg)("user/getCurrentLearningGoals",function(){var e=re(i().mark((function e(t,n){var r,s,a,c,l,d,h,f,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.week,s=t.year,!(a=n.getState)().user.isLogged){e.next=21;break}if(c=a().user.data.uid,void 0!==(l=a().user.currentLearningGoals)){e.next=18;break}return e.next=7,o.Z.getCurrentLearningGoals(c,r,s);case 7:if(null!==(d=e.sent)){e.next=15;break}return h=a().user.data.goalsIntensity,f=new Date(s,0,7*r),p=f.getTime()-24*f.getDay()*60*60*1e3,e.abrupt("return",u.Z.generateLearningGoals(r,s,h,p));case 15:return e.abrupt("return",d);case 16:e.next=19;break;case 18:return e.abrupt("return",l);case 19:e.next=22;break;case 21:return e.abrupt("return",null);case 22:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Se=(0,a.hg)("user/getLearningGoalsReward",function(){var e=re(i().mark((function e(t,n){var r,s,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.updateScore,r=n.getState,void 0===(s=r().user.currentLearningGoals)){e.next=7;break}return a=r().user.currentLearningGoals.intensity,e.abrupt("return",u.Z.getLearningGoalsReward(s.week,s.year).then((function(e){return Q.Z.event("weekly_goal_reward_".concat(a)),e})));case 7:return e.abrupt("return",0);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ke=(0,a.oM)({name:"user",initialState:{data:{},notifications:[],referredUsers:[],referredData:{},currentLearningGoals:void 0,createStatus:l.Z.None,fetchStatus:l.Z.Loading,updateStatus:l.Z.Unknown,purchaseStatus:l.Z.None,getGoalsRewardStatus:l.Z.None,fetchReferredUsersStatus:l.Z.Unknown,redeemReferredUserStatus:l.Z.Unknown,allNotificationsFetched:!1,fetchError:"",updateError:"",accessToken:null,isLogged:!1,feedbackSent:!1,createSpecialPromoCodeStatus:l.Z.Unknown},reducers:{setFeedbackSent:function(e,t){e.feedbackSent=!0},updateAfterCodeRun:function(e,t){var n;void 0===(null===(n=e.data)||void 0===n?void 0:n.metadata)&&(e.data.metadata={}),t.payload.lastChallengeRunDate?(e.data.metadata.lastChallengeRunDate=t.payload.lastChallengeRunDate,t.payload.todayCompilesNum&&(e.data.metadata.todayCompilesNum=t.payload.todayCompilesNum),t.payload.todayCompilesIncrease&&(void 0===e.data.metadata.todayCompilesNum&&(e.data.metadata.todayCompilesNum=0),e.data.metadata.todayCompilesNum+=t.payload.todayCompilesIncrease),t.payload.daysUsedIncrease&&(void 0===e.data.metadata.daysUsed&&(e.data.metadata.daysUsed=0),e.data.metadata.daysUsed+=t.payload.daysUsedIncrease),void 0!==t.payload.todayAskAiNum&&(e.data.metadata.todayAskAiNum=t.payload.todayAskAiNum)):t.payload.lastAskAiDate&&(e.data.metadata.lastAskAiDate=t.payload.lastAskAiDate,t.payload.todayAskAiNum&&(e.data.metadata.todayAskAiNum=t.payload.todayAskAiNum),t.payload.todayAskAiIncrease&&(e.data.metadata.todayAskAiNum+=t.payload.todayAskAiIncrease))},incrementChallengeDone:function(e,t){var n,r;e.data.hasOwnProperty("metadata")||(e.data.metadata={}),e.data.metadata.hasOwnProperty("challengesDone")||(e.data.metadata.challengesDone=0),e.data.metadata.challengesDone=e.data.metadata.challengesDone+1,(null===(n=t.payload)||void 0===n?void 0:n.isDailyChallenge)&&void 0!==e.currentLearningGoals&&void 0!==e.currentLearningGoals.goals.daily_challenge&&(e.currentLearningGoals.goals.daily_challenge.current+=1),(null===(r=t.payload)||void 0===r?void 0:r.firstTry)&&(e.data.metadata.hasOwnProperty("firstTryChallenges")||(e.data.metadata.firstTryChallenges=0),e.data.metadata.firstTryChallenges=e.data.metadata.firstTryChallenges+1,void 0!==e.currentLearningGoals&&void 0!==e.currentLearningGoals.goals.first_try_challenge&&(e.currentLearningGoals.goals.first_try_challenge.current+=1))},incrementLessonDone:function(e,t){void 0!==e.currentLearningGoals&&void 0!==e.currentLearningGoals.goals.lesson&&(e.currentLearningGoals.goals.lesson.current+=1)},setAccessToken:function(e,t){e.accessToken=t.payload},setNotificationNotActive:function(e,t){var n=e.notifications.findIndex((function(e){return e.id===t.payload}));n>=0&&(e.notifications[n].active=!1)},setActiveNotifications:function(e,t){e.data.activeNotifications=t.payload},updateUserCurrentRoadmap:function(e,t){void 0!==t.payload.rid?e.data.currentRoadmap=t.payload.rid:delete e.data.currentRoadmap},updateUserWeeklyGoal:function(e,t){e.currentLearningGoals&&void 0!==e.currentLearningGoals.goals[t.payload.id]&&(e.currentLearningGoals.goals[t.payload.id].current=1)},removeStreakFreeze:function(e,t){e.data.metadata.streakFreeze=!1}},extraReducers:function(e){e.addCase(ae.pending,m).addCase(ae.fulfilled,v).addCase(ae.rejected,y).addCase(se.pending,f).addCase(se.fulfilled,p).addCase(se.rejected,g).addCase(ce.pending,S).addCase(ce.fulfilled,k).addCase(ce.rejected,T).addCase(he.fulfilled,w).addCase(fe.pending,b).addCase(fe.fulfilled,_).addCase(de.pending,Y).addCase(de.fulfilled,G).addCase(de.rejected,K).addCase(oe.fulfilled,E).addCase(ue.pending,L).addCase(pe.fulfilled,C).addCase(ge.pending,M).addCase(ge.fulfilled,U).addCase(ge.rejected,j).addCase(me.pending,F).addCase(me.fulfilled,V).addCase(me.rejected,W).addCase(ve.pending,x).addCase(ve.rejected,D).addCase(ve.fulfilled,A).addCase(ye.fulfilled,O).addCase(we.pending,P).addCase(we.rejected,N).addCase(we.fulfilled,R).addCase(be.pending,B).addCase(be.fulfilled,Z).addCase(_e.fulfilled,q).addCase(Se.pending,z).addCase(Se.rejected,$).addCase(Se.fulfilled,H).addCase(le.fulfilled,I)}}),Te=ke.actions,Ie=Te.setFeedbackSent,Ee=Te.updateAfterCodeRun,Ce=Te.incrementChallengeDone,xe=Te.incrementLessonDone,Ae=(Te.setAccessToken,Te.setNotificationNotActive),De=Te.setActiveNotifications,Oe=Te.updateUserCurrentRoadmap,Pe=Te.updateUserWeeklyGoal,Ne=Te.removeStreakFreeze,Re=ke.reducer},40740:function(e,t,n){"use strict";n.d(t,{ZP:function(){return d},CZ:function(){return l},YX:function(){return a},uZ:function(){return u},y$:function(){return c},q1:function(){return s},b2:function(){return o}});var r=(0,n(77236).oM)({name:"userDialogs",initialState:{showLearningReminderDialog:!1,showReferralDialog:!1,showHowDidYouHearDialog:!1},reducers:{showLearningReminderDialog:function(e,t){e.showLearningReminderDialog=!0},hideLearningReminderDialog:function(e,t){e.showLearningReminderDialog=!1},showReferralDialog:function(e,t){e.showReferralDialog=!0},hideReferralDialog:function(e,t){e.showReferralDialog=!1},showHowDidYouHearDialog:function(e,t){e.showHowDidYouHearDialog=!0},hideHowDidYouHearDialog:function(e,t){e.showHowDidYouHearDialog=!1}}}),i=r.actions,s=i.showLearningReminderDialog,a=i.hideLearningReminderDialog,o=i.showReferralDialog,u=i.hideReferralDialog,c=i.showHowDidYouHearDialog,l=i.hideHowDidYouHearDialog,d=r.reducer},80027:function(e,t,n){"use strict";n.d(t,{ZP:function(){return he},ET:function(){return J},NX:function(){return ae},M7:function(){return oe},iw:function(){return Q},T0:function(){return G},Ap:function(){return K},Ab:function(){return X},GG:function(){return re},jv:function(){return de},sv:function(){return le},Ev:function(){return ee},EF:function(){return te},vX:function(){return ne},Jz:function(){return se},RE:function(){return ie}});var r=n(34051),i=n.n(r),s=n(85893),a=n(77236),o=(n(49356),n(57919)),u=n(4231),c=n(40782);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e,t){e.fetchStatus=u.Z.Loading},h=function(e,t){e.fetchStatus=u.Z.Success,null!=t.payload.data&&void 0!==t.payload.data&&(e.progress[t.payload.courseId]=t.payload.data)},f=function(e,t){e.fetchStatus=u.Z.Fail,e.fetchError=t.error.message},p=function(e,t){e.fetchCoursesStatus=u.Z.Loading},g=function(e,t){e.progress=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}({},e.progress,t.payload.data),e.fetchCoursesStatus=u.Z.Success},m=function(e,t){e.fetchCoursesStatus=u.Z.Fail,e.fetchError=t.error.message},v=function(e,t){e.fetchStatusChallenges[t.meta.arg]=u.Z.Loading},y=function(e,t){e.fetchStatusChallenges[t.meta.arg]=u.Z.Success,null!=t.payload.data&&void 0!==t.payload.data&&(e.challenges[t.payload.challengeId]=t.payload.data)},w=function(e,t){e.fetchStatusChallenges[t.meta.arg]=u.Z.Fail},b=function(e,t){null!==t.payload&&("challenge"===t.payload.courseId?(e.challenges.hasOwnProperty(t.payload.lessonId)||(e.challenges[t.payload.lessonId]={}),e.challenges[t.payload.lessonId].hasOwnProperty("hints")||(e.challenges[t.payload.lessonId].hints={}),e.challenges[t.payload.lessonId].hints[t.meta.arg.toString()]=(new Date).getTime()):(e.progress.hasOwnProperty(t.payload.courseId)||(e.progress[t.payload.courseId]={}),e.progress[t.payload.courseId].hasOwnProperty(t.payload.lessonId)||(e.progress[t.payload.courseId][t.payload.lessonId]={}),e.progress[t.payload.courseId][t.payload.lessonId].hasOwnProperty("hints")||(e.progress[t.payload.courseId][t.payload.lessonId].hints={}),e.progress[t.payload.courseId][t.payload.lessonId].hints[t.meta.arg.toString()]=(new Date).getTime()))},_=function(e,t){null!==t.payload&&("challenge"===t.payload.courseId?(e.challenges.hasOwnProperty(t.payload.lessonId)||(e.challenges[t.payload.lessonId]={}),e.challenges[t.payload.lessonId].solution=(new Date).getTime()):(e.progress.hasOwnProperty(t.payload.courseId)||(e.progress[t.payload.courseId]={}),e.progress[t.payload.courseId].hasOwnProperty(t.payload.lessonId)||(e.progress[t.payload.courseId][t.payload.lessonId]={}),e.progress[t.payload.courseId][t.payload.lessonId].solution=(new Date).getTime()))},S=function(e,t){null!==t.payload&&("challenge"===t.payload.courseId?(e.challenges.hasOwnProperty(t.payload.lessonId)||(e.challenges[t.payload.lessonId]={}),void 0===e.challenges[t.payload.lessonId].askAiNum&&(e.challenges[t.payload.lessonId].askAiNum=0),e.challenges[t.payload.lessonId].askAiNum+=1):(e.progress.hasOwnProperty(t.payload.courseId)||(e.progress[t.payload.courseId]={}),e.progress[t.payload.courseId].hasOwnProperty(t.payload.lessonId)||(e.progress[t.payload.courseId][t.payload.lessonId]={}),void 0===e.progress[t.payload.courseId][t.payload.lessonId].askAiNum&&(e.progress[t.payload.courseId][t.payload.lessonId].askAiNum=0),e.progress[t.payload.courseId][t.payload.lessonId].askAiNum+=1))},k=function(e,t){var n;e.progress[t.meta.arg]={},void 0===(null===(n=e.progressSummary)||void 0===n?void 0:n.courses)&&(e.progressSummary.courses={}),e.progressSummary.courses[t.meta.arg]={done:!1,started:!1,lessonsDone:0,lastUpdated:Date.now()}},T=function(e,t){e.fetchAllStatus=u.Z.Loading},I=function(e,t){e.fetchAllStatus=u.Z.Success,e.progress=t.payload},E=function(e,t){e.fetchAllStatus=u.Z.Fail},C=function(e,t){e.progressSummary=t.payload,e.fetchProgressSummaryStatus=u.Z.Success},x=function(e,t){e.updateStatus=u.Z.Loading},A=function(e,t){e.updateStatus=u.Z.Success,e.progress.hasOwnProperty(t.meta.arg.courseId)?(e.progress[t.meta.arg.courseId].hasOwnProperty(t.meta.arg.lessonId)||(e.progress[t.meta.arg.courseId][t.meta.arg.lessonId]={}),e.progress[t.meta.arg.courseId][t.meta.arg.lessonId].done=t.meta.arg.data.done,e.progress[t.meta.arg.courseId][t.meta.arg.lessonId].started=t.meta.arg.data.started):(e.progress[t.meta.arg.courseId]={},e.progress[t.meta.arg.courseId][t.meta.arg.lessonId]=t.meta.arg.data)},D=function(e,t){e.updateStatus=u.Z.Fail,e.updateError=t.error.message},O=function(e,t){e.challenges.hasOwnProperty(t.meta.arg.challengeId)?Object.keys(t.meta.arg.data).forEach((function(n){e.challenges[t.meta.arg.challengeId][n]=t.meta.arg.data[n]})):e.challenges[t.meta.arg.challengeId]=t.meta.arg.data},P=function(e,t){e.fetchLastCompileStatus=u.Z.Loading},N=function(e,t){e.lastCompiles=t.payload,e.fetchLastCompileStatus=u.Z.Success},R=function(e,t){c.Am.error(t.error.message),e.fetchLastCompileStatus=u.Z.Fail},L=function(e,t){e.fetchLastCompileStatus=u.Z.Loading},M=function(e,t){e.lastCompiles=e.lastCompiles.concat(t.payload),e.fetchLastCompileStatus=u.Z.Success},U=function(e,t){c.Am.error(t.error.message),e.fetchLastCompileStatus=u.Z.Fail},j=n(35185),F=n(77091),V=n(88036),B=n(45679),Z=n(59564),q=n(21432),z=n(64306);function H(e,t,n,r,i,s,a){try{var o=e[s](a),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(r,i)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){H(s,r,i,a,o,"next",e)}function o(e){H(s,r,i,a,o,"throw",e)}a(void 0)}))}}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){W(e,t,n[t])}))}return e}var G=(0,a.hg)("userProgress/fetchProgress",$(i().mark((function e(){var t,n,r,s,a,u,c=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:null,n=c.length>1?c[1]:void 0,r=n.getState,s=n.rejectWithValue,void 0!==(u=null===(a=r().user.data)||void 0===a?void 0:a.uid)){e.next=5;break}return e.abrupt("return",s("User not logged in"));case 5:return e.abrupt("return",o.Z.getUserProgress(u,t).then((function(e){return{data:e,courseId:t}})));case 6:case"end":return e.stop()}}),e)})))),K=(0,a.hg)("userProgress/fetchProgressCourses",$(i().mark((function e(){var t,n,r,s,a,u,c,l,d,h,f=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:null,n=f.length>1?f[1]:void 0,r=n.getState,s=n.rejectWithValue,void 0!==(u=null===(a=r().user.data)||void 0===a?void 0:a.uid)){e.next=5;break}return e.abrupt("return",s("User not logged in"));case 5:return c=r().userProgress.progress,l=(null!==t&&void 0!==t?t:[]).filter((function(e){return!c.hasOwnProperty(e)})),d=[],h={},l.forEach((function(e){var t=o.Z.getUserProgress(u,e).then((function(t){void 0!==t&&(h[e]=t)}));d.push(t)})),e.next=12,Promise.all(d);case 12:return e.abrupt("return",{data:h,coursesId:l});case 13:case"end":return e.stop()}}),e)})))),Q=(0,a.hg)("userProgress/fetchChallengeProgress",$(i().mark((function e(){var t,n,r,s,a,u,c=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:null,n=c.length>1?c[1]:void 0,r=n.getState,s=n.rejectWithValue,void 0!==(u=null===(a=r().user.data)||void 0===a?void 0:a.uid)){e.next=5;break}return e.abrupt("return",s("User not logged in"));case 5:return e.abrupt("return",o.Z.getUserChallengeProgress(u,t).then((function(e){return{data:e,challengeId:t}})));case 6:case"end":return e.stop()}}),e)})))),J=(0,a.hg)("userProgress/fetchAllProgress",function(){var e=$(i().mark((function e(t,n){var r,s,a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,s=n.rejectWithValue,void 0!==(u=null===(a=r().user.data)||void 0===a?void 0:a.uid)){e.next=5;break}return e.abrupt("return",s("User not logged in"));case 5:return e.abrupt("return",o.Z.getAllUserProgress(u));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),X=(0,a.hg)("userProgress/fetchUserProgressSummary",function(){var e=$(i().mark((function e(t,n){var r,s,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,void 0!==(a=null===(s=r().user.data)||void 0===s?void 0:s.uid)){e.next=5;break}return e.abrupt("return",{});case 5:return e.abrupt("return",o.Z.getUserProgressSummary(a));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ee=(0,a.hg)("userProgress/saveForLaterCourse",function(){var e=$(i().mark((function e(t,n){var r,s,a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,s=n.rejectWithValue,void 0!==(u=null===(a=r().user.data)||void 0===a?void 0:a.uid)){e.next=5;break}return e.abrupt("return",s("User not logged in"));case 5:return F.Z.event("save_for_later_course"),e.abrupt("return",o.Z.saveForLaterCourse(u,t));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),te=(0,a.hg)("userProgress/setHintSeen",function(){var e=$(i().mark((function e(t,n){var r,s,a,u,c,l,d,h,f,p,g,m,v;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,s=n.rejectWithValue,u=null===(a=r().user.data)||void 0===a?void 0:a.uid,c=r().lesson.data.id,l=r().lesson.courseId,void 0!==u){e.next=7;break}return e.abrupt("return",s("User not logged in"));case 7:if("challenge"!==l){e.next=18;break}if(!(d=r().userProgress.challenges).hasOwnProperty(c)){e.next=15;break}if(void 0===(null!==(f=null===(h=d[c])||void 0===h?void 0:h.hints)&&void 0!==f?f:{})[t.toString()]){e.next=15;break}return e.abrupt("return",null);case 15:return e.abrupt("return",o.Z.updateUserChallengeProgress(u,c,W({},"hints.".concat(t.toString()),(0,V.Bt)()),void 0===d[c]).then((function(e){return{courseId:l,lessonId:c}})).catch((function(e){return s(e)})));case 18:if(!(p=r().userProgress.progress).hasOwnProperty(l)||!(null!==(g=p[l])&&void 0!==g?g:{}).hasOwnProperty(c)){e.next=26;break}if(void 0===(null!==(v=null===(m=p[l][c])||void 0===m?void 0:m.hints)&&void 0!==v?v:{})[t.toString()]){e.next=26;break}return e.abrupt("return",null);case 26:return e.abrupt("return",o.Z.updateUserProgress(u,l,W({},"".concat(c,".hints.").concat(t.toString()),(0,V.Bt)()),void 0===p[l]).then((function(e){return{courseId:l,lessonId:c}})).catch((function(e){return s(e)})));case 27:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ne=(0,a.hg)("userProgress/setSolutionSeen",function(){var e=$(i().mark((function e(t,n){var r,s,a,u,c,l,d,h,f,p,g;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,s=n.rejectWithValue,u=null===(a=r().user.data)||void 0===a?void 0:a.uid,c=r().lesson.data.id,l=r().lesson.courseId,void 0!==u){e.next=7;break}return e.abrupt("return",s("User not logged in"));case 7:if("challenge"!==l){e.next=17;break}if(!(d=r().userProgress.challenges).hasOwnProperty(c)){e.next=14;break}if(void 0===(null===(h=d[c])||void 0===h?void 0:h.solution)){e.next=14;break}return e.abrupt("return",null);case 14:return e.abrupt("return",o.Z.updateUserChallengeProgress(u,c,{solution:(0,V.Bt)()},void 0===d[c]).then((function(e){return{courseId:l,lessonId:c}})).catch((function(e){return s(e)})));case 17:if(!(f=r().userProgress.progress).hasOwnProperty(l)||!(null!==(p=f[l])&&void 0!==p?p:{}).hasOwnProperty(c)){e.next=24;break}if(void 0===(null===(g=f[l][c])||void 0===g?void 0:g.solution)){e.next=24;break}return e.abrupt("return",null);case 24:return e.abrupt("return",o.Z.updateUserProgress(u,l,W({},"".concat(c,".solution"),(0,V.Bt)()),void 0===f[l]).then((function(e){return{courseId:l,lessonId:c}})).catch((function(e){return s(e)})));case 25:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),re=(0,a.hg)("userProgress/increaseAskAiNum",function(){var e=$(i().mark((function e(t,n){var r,s,a,u,c,l,d,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,s=n.rejectWithValue,u=r().userProgress.progress,c=null===(a=r().user.data)||void 0===a?void 0:a.uid,l=r().lesson.data.id,d=r().lesson.courseId,void 0!==c){e.next=8;break}return e.abrupt("return",s("User not logged in"));case 8:if("challenge"!==d){e.next=13;break}return h=r().userProgress.challenges,e.abrupt("return",o.Z.updateUserChallengeProgress(c,l,{askAiNum:(0,V.nP)(1)},void 0===h[l]).then((function(e){return{courseId:d,lessonId:l}})).catch((function(e){return s(e)})));case 13:return e.abrupt("return",o.Z.updateUserProgress(c,d,W({},"".concat(l,".askAiNum"),(0,V.nP)(1)),void 0===u[d]).then((function(e){return{courseId:d,lessonId:l}})).catch((function(e){return s(e)})));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ie=(0,a.hg)("userProgress/updateProgress",function(){var e=$(i().mark((function e(t,n){var r,a,u,l,d,h,f,p,g,m,v,y,w,b,_,S,k,T,I,E,C,x,A,D,O,P;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.courseId,a=t.lessonId,u=t.data,l=n.getState,d=n.rejectWithValue,h=n.dispatch,g=l().userProgress.progress,m=null===(f=l().user.data)||void 0===f?void 0:f.uid,v=l().lesson,y=v.code,w=v.lang,b=l().lesson.files,_=l().lesson.data.isMultiFile,void 0!==m){e.next=9;break}return e.abrupt("return",d("User not logged in"));case 9:if((null===u||void 0===u?void 0:u.done)&&""!==w&&(u[w]=_?b.map((function(e){return Y({},e,{payload:j.Z.encode(e.payload)})})):j.Z.encode(y)),void 0===(null===u||void 0===u?void 0:u.done)&&(g.hasOwnProperty(r)&&(null!==(S=g[r])&&void 0!==S?S:{}).hasOwnProperty(a)?u.done=null!==(T=null===(k=g[r][a])||void 0===k?void 0:k.done)&&void 0!==T&&T:u.done=!1),I={},void 0===g[r]?I=W({},a,u):(void 0!==u.done&&(I[a+".done"]=u.done),void 0!==u.doneRehearsal&&(I[a+".doneRehearsal"]=u.doneRehearsal),void 0!==u.started&&(I[a+".started"]=u.started),(null===u||void 0===u?void 0:u.done)&&""!==w&&(I[a+"."+w]=_?b.map((function(e){return Y({},e,{payload:j.Z.encode(e.payload)})})):j.Z.encode(y))),!u.done||g.hasOwnProperty(r)&&(null!==(E=g[r])&&void 0!==E?E:{}).hasOwnProperty(a)&&(null===(p=g[r][a])||void 0===p?void 0:p.done)){e.next=25;break}if(""===y){e.next=24;break}return D=g.hasOwnProperty(r)&&(null!==(x=g[r])&&void 0!==x?x:{}).hasOwnProperty(a)&&0===(null!==(A=null===(C=g[r][a])||void 0===C?void 0:C.failedNum)&&void 0!==A?A:0),F.Z.event("challenge_done"),e.next=22,o.Z.updateUser(m,{"metadata.challengesDone":(0,V.nP)(1),"metadata.firstTryChallenges":(0,V.nP)(D?1:0)});case 22:h((0,B.wJ)({firstTry:D})),void 0!==l().user.data.goalsIntensity&&D&&Z.Z.updateLearningGoals("first_try_challenge").then((function(e){e.done&&(c.Am.success((0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(q.ZP,{text:"Goal completed:",type:"small"}),(0,s.jsx)(q.ZP,{text:1===e.target?"Solve challenge on the first try":"Solve ".concat(e.target," challenges on the first try"),bold:!0})]}),{theme:"colored"}),F.Z.event("weekly_goals_".concat(e.target,"_first_try_challenges_done")))}));case 24:void 0!==l().user.data.goalsIntensity&&(Z.Z.updateLearningGoals("lesson").then((function(e){e.done&&(c.Am.success((0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(q.ZP,{text:"Goal completed:",type:"small"}),(0,s.jsx)(q.ZP,{text:"Complete ".concat(e.target," lessons"),bold:!0})]}),{theme:"colored"}),F.Z.event("weekly_goals_".concat(e.target,"_lessons_done"))),e.totalDone&&h((0,z.g8)(!0))})),h((0,B.Lm)()));case 25:return u.done&&(O=l().course.data.chapters,-1!==(P=O.findIndex((function(e){return e.lessons.some((function(e){return e.id===a}))})))&&O[P].lessons.every((function(e){var t;return e.id===a||g.hasOwnProperty(r)&&g[r].hasOwnProperty(e.id)&&(null===(t=g[r][e.id])||void 0===t?void 0:t.done)}))&&Z.Z.updateLearningGoals("chapter_".concat(r,"_").concat(P)).then((function(e){e.done&&(h((0,B.r8)({id:"chapter_".concat(r,"_").concat(P)})),c.Am.success((0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(q.ZP,{text:"Goal completed:",type:"small"}),(0,s.jsx)(q.ZP,{text:"Complete ".concat(e.chapterTitle," chapter on ").concat(e.courseTitle),bold:!0})]}),{theme:"colored"}),F.Z.event("weekly_goals_chapter_done"))}))),e.abrupt("return",o.Z.updateUserProgress(m,r,I,void 0===g[r]));case 27:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),se=(0,a.hg)("userProgress/updateChallengeProgress",function(){var e=$(i().mark((function e(t,n){var r,a,u,l,d,h,f,p,g,m,v,y,w,b,_,S,k,T,I;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.challengeId,a=t.data,u=n.getState,l=n.rejectWithValue,d=n.dispatch,p=u().userProgress.challenges,g=null===(h=u().user.data)||void 0===h?void 0:h.uid,m=u().lesson,v=m.code,y=m.lang,w=u().lesson.files,b=u().lesson.data.isMultiFile,void 0!==g){e.next=9;break}return e.abrupt("return",l("User not logged in"));case 9:if((null===a||void 0===a?void 0:a.done)&&""!==y&&(a[y]=b?w.map((function(e){return Y({},e,{payload:j.Z.encode(e.payload)})})):j.Z.encode(v)),void 0===(null===a||void 0===a?void 0:a.done)&&(p.hasOwnProperty(r)?a.done=null!==(S=null===(_=p[r])||void 0===_?void 0:_.done)&&void 0!==S&&S:a.done=!1),!a.done||p.hasOwnProperty(r)&&(null===(f=p[r])||void 0===f?void 0:f.done)||""===v){e.next=20;break}return F.Z.event("challenge_done"),I=p.hasOwnProperty(r)&&0===(null!==(T=null===(k=p[r])||void 0===k?void 0:k.failedNum)&&void 0!==T?T:0),e.next=18,o.Z.updateUser(g,{"metadata.challengesDone":(0,V.nP)(1),"metadata.firstTryChallenges":(0,V.nP)(I?1:0)});case 18:void 0!==u().user.data.goalsIntensity&&(Z.Z.updateLearningGoals("daily_challenge").then((function(e){e.done&&(c.Am.success((0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(q.ZP,{text:"Goal completed:",type:"small"}),(0,s.jsx)(q.ZP,{text:1===e.target?"Solve one daily challenge":"Solve ".concat(e.target," daily challenges"),bold:!0})]}),{theme:"colored"}),F.Z.event("weekly_goals_".concat(e.target,"_daily_challenges_done")))})),I&&Z.Z.updateLearningGoals("first_try_challenge").then((function(e){e.done&&(c.Am.success((0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(q.ZP,{text:"Goal completed:",type:"small"}),(0,s.jsx)(q.ZP,{text:1===e.target?"Solve one challenge on the first try":"Solve ".concat(e.target," challenges on the first try"),bold:!0})]}),{theme:"colored"}),F.Z.event("weekly_goals_".concat(e.target,"_first_try_challenges_done")))}))),d((0,B.wJ)({isDailyChallenge:!0,firstTry:I}));case 20:return e.abrupt("return",o.Z.updateUserChallengeProgress(g,r,a,void 0===p[r]));case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ae=(0,a.hg)("userProgress/fetchLastCompiles",function(){var e=$(i().mark((function e(t,n){var r,s,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,s=n.rejectWithValue,void 0!==(null===(a=r().user.data)||void 0===a?void 0:a.uid)){e.next=5;break}return e.abrupt("return",s("User not logged in"));case 5:return e.abrupt("return",Z.Z.getLastSubmissions(new Date(Date.now())));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),oe=(0,a.hg)("userProgress/fetchMoreLastCompiles",function(){var e=$(i().mark((function e(t,n){var r,s,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.startDate,s=n.getState,a=n.rejectWithValue,void 0!==(null===(o=s().user.data)||void 0===o?void 0:o.uid)){e.next=5;break}return e.abrupt("return",a("User not logged in"));case 5:return e.abrupt("return",Z.Z.getLastSubmissions(new Date(r)));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ue=(0,a.oM)({name:"userProgress",initialState:{progress:{},challenges:{},progressSummary:{},lastCompiles:[],fetchStatus:u.Z.None,fetchCoursesStatus:u.Z.None,fetchProgressSummaryStatus:u.Z.None,fetchStatusChallenges:{},fetchAllStatus:u.Z.None,fetchLastCompileStatus:u.Z.None,updateStatus:u.Z.None,fetchError:"",updateError:""},reducers:{resetToInitialState:function(e,t){e.progress={},e.lastCompiles=[],e.fetchStatus=u.Z.None,e.fetchAllStatus=u.Z.None,e.fetchLastCompileStatus=u.Z.None,e.updateStatus=u.Z.None,e.fetchError="",e.updateError=""},increaseFailedNum:function(e,t){"challenge"===t.payload.courseId?e.challenges[t.payload.lessonId].failedNum?e.challenges[t.payload.lessonId].failedNum+=1:e.challenges[t.payload.lessonId].failedNum=1:e.progress[t.payload.courseId][t.payload.lessonId].failedNum?e.progress[t.payload.courseId][t.payload.lessonId].failedNum+=1:e.progress[t.payload.courseId][t.payload.lessonId].failedNum=1}},extraReducers:function(e){e.addCase(G.pending,d).addCase(G.fulfilled,h).addCase(G.rejected,f).addCase(K.pending,p).addCase(K.fulfilled,g).addCase(K.rejected,m).addCase(Q.pending,v).addCase(Q.fulfilled,y).addCase(Q.rejected,w).addCase(J.pending,T).addCase(J.fulfilled,I).addCase(J.rejected,E).addCase(X.fulfilled,C).addCase(ie.pending,x).addCase(ie.fulfilled,A).addCase(ie.rejected,D).addCase(se.fulfilled,O).addCase(ae.fulfilled,N).addCase(ae.pending,P).addCase(ae.rejected,R).addCase(oe.fulfilled,M).addCase(oe.pending,L).addCase(oe.rejected,U).addCase(ee.fulfilled,k).addCase(te.fulfilled,b).addCase(ne.fulfilled,_).addCase(re.fulfilled,S)}}),ce=ue.actions,le=ce.resetToInitialState,de=ce.increaseFailedNum,he=ue.reducer},35185:function(e,t){"use strict";var n={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,r,i,s,a,o,u,c="",l=0;for(e=n._utf8_encode(e);l<e.length;)s=(t=e.charCodeAt(l++))>>2,a=(3&t)<<4|(r=e.charCodeAt(l++))>>4,o=(15&r)<<2|(i=e.charCodeAt(l++))>>6,u=63&i,isNaN(r)?o=u=64:isNaN(i)&&(u=64),c=c+this._keyStr.charAt(s)+this._keyStr.charAt(a)+this._keyStr.charAt(o)+this._keyStr.charAt(u);return c},decode:function(e){var t,r,i,s,a,o,u="",c=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");c<e.length;)t=this._keyStr.indexOf(e.charAt(c++))<<2|(s=this._keyStr.indexOf(e.charAt(c++)))>>4,r=(15&s)<<4|(a=this._keyStr.indexOf(e.charAt(c++)))>>2,i=(3&a)<<6|(o=this._keyStr.indexOf(e.charAt(c++))),u+=String.fromCharCode(t),64!==a&&(u+=String.fromCharCode(r)),64!==o&&(u+=String.fromCharCode(i));return u=n._utf8_decode(u)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},_utf8_decode:function(e){for(var t="",n=0,r=0,i=0;n<e.length;)if((r=e.charCodeAt(n))<128)t+=String.fromCharCode(r),n++;else if(r>191&&r<224)i=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&i),n+=2;else{i=e.charCodeAt(n+1);var s=e.charCodeAt(n+2);t+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&s),n+=3}return t}};t.Z=n},75475:function(e,t,n){"use strict";n.d(t,{YQ:function(){return u},HE:function(){return c},dF:function(){return l},Uo:function(){return d},vY:function(){return h},RA:function(){return f},Sy:function(){return p},zZ:function(){return g},eQ:function(){return m},qn:function(){return v},Bx:function(){return y},Kr:function(){return w}});var r=n(85893),i=n(30381),s=n.n(i),a=n(23461),o=n(40782),u=function(e){var t=window.open(e,"_blank","noopener,noreferrer");t&&(t.opener=null)},c=function(e){return s()(e.toDate()).fromNow()},l=function(e){var t,n;return{uid:e.uid,email:e.email,displayName:null!==(t=null===e||void 0===e?void 0:e.displayName)&&void 0!==t?t:e.email.split("@")[0],imagePath:null!==(n=null===e||void 0===e?void 0:e.imagePath)&&void 0!==n?n:null}},d=function(e){return e.replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},h=function(e){return a.Oq[e]||"Not Supported"},f=function(e,t,n){return n-1<0?e[t-1].lessons[e[t-1].lessons.length-1]:e[t].lessons[n-1]},p=function(e){return e.map((function(e){return{value:e,sort:Math.random()}})).sort((function(e,t){return e.sort-t.sort})).map((function(e){return e.value}))},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split("@");return t.length<=1?"":t[t.length-1]},m=function(e){var t=e.split("/").pop().split(".");return 1===t.length?"":t[t.length-1]},v=function(e){var t,n,r,i,s,a=e.progress,o=e.prevLessonProgress,u=void 0===o?null:o,c=e.courseId,l=e.lesson,d=(null!==a&&void 0!==a?a:{}).hasOwnProperty(c)&&(null!==(n=a[c])&&void 0!==n?n:{}).hasOwnProperty(l.id),h=d&&(null!==a&&void 0!==a?a:{}).hasOwnProperty(c)&&(null!==(r=a[c])&&void 0!==r?r:{}).hasOwnProperty(l.id)&&!0===(null===(t=a[c][l.id])||void 0===t?void 0:t.done),f=!0;void 0!==l.additionalProperties&&(0===currTime?f=!1:(void 0!==(null===(i=l.additionalProperties)||void 0===i?void 0:i.openDate)&&l.additionalProperties.openDate>currTime&&(f=!1),void 0!==(null===(s=l.additionalProperties)||void 0===s?void 0:s.closeDate)&&l.additionalProperties.closeDate<currTime&&(f=!1)));return{started:d,isOpen:f=!l.isProject||!(!(null===u||void 0===u?void 0:u.done)||!f),done:h}},y=function(e,t,n,i,s,a){var u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=t.chapters[i].lessons[s],l=c.isProject&&!u;if(!u&&void 0!==c.additionalProperties){if(0===currTime)return void o.Am.error("Lesson is closed!");var d,h;if(void 0!==(null===(d=c.additionalProperties)||void 0===d?void 0:d.openDate)&&c.additionalProperties.openDate>currTime)return void o.Am.error("Lesson is closed!");if(void 0!==(null===(h=c.additionalProperties)||void 0===h?void 0:h.closeDate)&&c.additionalProperties.closeDate<currTime)return void o.Am.error("Lesson is closed!")}if(l){var p=f(t.chapters,i,s);a.hasOwnProperty(n)&&a[n].hasOwnProperty(p.id)&&a[n][p.id].done?e.push("/courses/"+n+"/"+c.id):o.Am.info((0,r.jsxs)(r.Fragment,{children:["Complete ",(0,r.jsx)("b",{children:null===p||void 0===p?void 0:p.name})," before!"]}))}else""===c.id?o.Am.error("Lesson not exists!"):e.push((u?"/preview":"")+"/courses/"+n+"/"+c.id)},w=function(e,t){var n={needStreakFreeze:!1,canBeActivated:!1,isActive:!1};if(void 0===e)n.canBeActivated=!0;else{var r=new Date(Date.now()),i=new Date(null===e||void 0===e?void 0:e.getFullYear(),null===e||void 0===e?void 0:e.getMonth(),(null===e||void 0===e?void 0:e.getDate())+1),s=new Date(null===e||void 0===e?void 0:e.getFullYear(),null===e||void 0===e?void 0:e.getMonth(),(null===e||void 0===e?void 0:e.getDate())+2);i.getFullYear()===r.getFullYear()&&i.getMonth()===r.getMonth()&&i.getDate()===r.getDate()?n.canBeActivated=!0:t&&s.getFullYear()===r.getFullYear()&&s.getMonth()===r.getMonth()&&s.getDate()===r.getDate()?(n.canBeActivated=!0,n.needStreakFreeze=!0):e.getFullYear()==r.getFullYear()&&e.getMonth()==r.getMonth()&&e.getDate()==r.getDate()&&(n.isActive=!0)}return n}},23461:function(e,t,n){"use strict";n.d(t,{Oq:function(){return r},zP:function(){return i},jJ:function(){return s},yr:function(){return a}});var r={python:"Python",cpp:"C++",java:"Java",csharp:"C#",r:"R",c:"C",js:"JavaScript",html:"HTML",go:"Go",sqlite:"SQL",css:"CSS"},i={0:"Undefined",1:"Easy",2:"Medium",3:"Hard",4:"Expert"},s={id:"id",tag:"tag name",class:"class name",xpath:"XPath",selector:"css selector"},a={click:"Clicked"}},70737:function(e){e.exports={container:"Button_container__za17V",text:"Button_text__t2U9w",snowcap:"Button_snowcap__ZYQP6"}},29423:function(e){e.exports={button:"ButtonBase_button___I74W",withoutBorder:"ButtonBase_withoutBorder__9B76q",disabled:"ButtonBase_disabled__jjs6U"}},93434:function(e){e.exports={container:"ButtonHome_container__vpmW9",text:"ButtonHome_text__HsaVf"}},90988:function(e){e.exports={container:"ButtonHomeBlack_container__HX26P",text:"ButtonHomeBlack_text__FoxP9"}},71724:function(e){e.exports={container:"ButtonHomeBordered_container__0qDoX",text:"ButtonHomeBordered_text__eMOXl"}},26381:function(e){e.exports={container:"ButtonHomeWhite_container__vEFd7",text:"ButtonHomeWhite_text__PYuc1"}},32828:function(e){e.exports={container:"ButtonNoDecoration_container__ApdyL",text:"ButtonNoDecoration_text__ikNWV"}},21470:function(e){e.exports={container:"ButtonSecondary_container__KqitQ",text:"ButtonSecondary_text__D_koA"}},25663:function(e){e.exports={container:"Backdrop_container__oaZ2q"}},83994:function(e){e.exports={container:"RefInfo_container__R0RXP",image:"RefInfo_image__YcmMg",title:"RefInfo_title__n0hb1",desc:"RefInfo_desc__PGY8s"}},37792:function(e){e.exports={container:"CertificateTag_container__r82Vc",text:"CertificateTag_text__yDJgx",fixedContainer:"CertificateTag_fixedContainer__2lqt9",fixedText:"CertificateTag_fixedText__kurDw"}},1681:function(e){e.exports={link:"Link_link__FW8_l"}},45218:function(e){e.exports={tag:"Tag_tag__ZS66l"}},72278:function(e){e.exports={preLine:"Text_preLine__pyEQZ",normal:"Text_normal__6bhLL",tiny:"Text_tiny__9nF0_",verySmall:"Text_verySmall__EQBGy",small:"Text_small__Lwr5F",bigNormal:"Text_bigNormal__gC7_f",subTitle:"Text_subTitle__2xV7n",title:"Text_title__LOcWe",semiBigTitle:"Text_semiBigTitle__A2ej6",bigTitle:"Text_bigTitle__9MODm",veryBigTitle:"Text_veryBigTitle__86iO5",hugeTitle:"Text_hugeTitle__PKGkw",dark:"Text_dark__tnYcD",bold:"Text_bold__hdJle",alignLeft:"Text_alignLeft__37cy2",alignCenter:"Text_alignCenter__nJFAl",colorMain:"Text_colorMain__f7p_b",colorBlack:"Text_colorBlack__78K2g",colorSecondary:"Text_colorSecondary__MxCg2",whiteOpacity:"Text_whiteOpacity__mNTZR",clickable:"Text_clickable__jNG0O",lightBlue:"Text_lightBlue__CzMrZ"}},40993:function(){},20472:function(){},77663:function(e){!function(){var t={162:function(e){var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"===typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var o,u=[],c=!1,l=-1;function d(){c&&o&&(c=!1,o.length?u=o.concat(u):l=-1,u.length&&h())}function h(){if(!c){var e=a(d);c=!0;for(var t=u.length;t;){for(o=u,u=[];++l<t;)o&&o[l].run();l=-1,t=u.length}o=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||c||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var s=n[e]={exports:{}},a=!0;try{t[e](s,s.exports,r),a=!1}finally{a&&delete n[e]}return s.exports}r.ab="//";var i=r(162);e.exports=i}()},41664:function(e,t,n){e.exports=n(48418)},11163:function(e,t,n){e.exports=n(90387)},74865:function(e,t,n){var r,i;r=function(){var e={version:"0.2.0"},t=e.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function n(e,t,n){return e<t?t:e>n?n:e}function r(e){return 100*(-1+e)}function i(e,n,i){var s;return(s="translate3d"===t.positionUsing?{transform:"translate3d("+r(e)+"%,0,0)"}:"translate"===t.positionUsing?{transform:"translate("+r(e)+"%,0)"}:{"margin-left":r(e)+"%"}).transition="all "+n+"ms "+i,s}e.configure=function(e){var n,r;for(n in e)void 0!==(r=e[n])&&e.hasOwnProperty(n)&&(t[n]=r);return this},e.status=null,e.set=function(r){var o=e.isStarted();r=n(r,t.minimum,1),e.status=1===r?null:r;var u=e.render(!o),c=u.querySelector(t.barSelector),l=t.speed,d=t.easing;return u.offsetWidth,s((function(n){""===t.positionUsing&&(t.positionUsing=e.getPositioningCSS()),a(c,i(r,l,d)),1===r?(a(u,{transition:"none",opacity:1}),u.offsetWidth,setTimeout((function(){a(u,{transition:"all "+l+"ms linear",opacity:0}),setTimeout((function(){e.remove(),n()}),l)}),l)):setTimeout(n,l)})),this},e.isStarted=function(){return"number"===typeof e.status},e.start=function(){e.status||e.set(0);var n=function(){setTimeout((function(){e.status&&(e.trickle(),n())}),t.trickleSpeed)};return t.trickle&&n(),this},e.done=function(t){return t||e.status?e.inc(.3+.5*Math.random()).set(1):this},e.inc=function(t){var r=e.status;return r?("number"!==typeof t&&(t=(1-r)*n(Math.random()*r,.1,.95)),r=n(r+t,0,.994),e.set(r)):e.start()},e.trickle=function(){return e.inc(Math.random()*t.trickleRate)},function(){var t=0,n=0;e.promise=function(r){return r&&"resolved"!==r.state()?(0===n&&e.start(),t++,n++,r.always((function(){0===--n?(t=0,e.done()):e.set((t-n)/t)})),this):this}}(),e.render=function(n){if(e.isRendered())return document.getElementById("nprogress");u(document.documentElement,"nprogress-busy");var i=document.createElement("div");i.id="nprogress",i.innerHTML=t.template;var s,o=i.querySelector(t.barSelector),c=n?"-100":r(e.status||0),l=document.querySelector(t.parent);return a(o,{transition:"all 0 linear",transform:"translate3d("+c+"%,0,0)"}),t.showSpinner||(s=i.querySelector(t.spinnerSelector))&&d(s),l!=document.body&&u(l,"nprogress-custom-parent"),l.appendChild(i),i},e.remove=function(){c(document.documentElement,"nprogress-busy"),c(document.querySelector(t.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&d(e)},e.isRendered=function(){return!!document.getElementById("nprogress")},e.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var s=function(){var e=[];function t(){var n=e.shift();n&&n(t)}return function(n){e.push(n),1==e.length&&t()}}(),a=function(){var e=["Webkit","O","Moz","ms"],t={};function n(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(e,t){return t.toUpperCase()}))}function r(t){var n=document.body.style;if(t in n)return t;for(var r,i=e.length,s=t.charAt(0).toUpperCase()+t.slice(1);i--;)if((r=e[i]+s)in n)return r;return t}function i(e){return e=n(e),t[e]||(t[e]=r(e))}function s(e,t,n){t=i(t),e.style[t]=n}return function(e,t){var n,r,i=arguments;if(2==i.length)for(n in t)void 0!==(r=t[n])&&t.hasOwnProperty(n)&&s(e,n,r);else s(e,i[1],i[2])}}();function o(e,t){return("string"==typeof e?e:l(e)).indexOf(" "+t+" ")>=0}function u(e,t){var n=l(e),r=n+t;o(n,t)||(e.className=r.substring(1))}function c(e,t){var n,r=l(e);o(e,t)&&(n=r.replace(" "+t+" "," "),e.className=n.substring(1,n.length-1))}function l(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function d(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return e},void 0===(i="function"===typeof r?r.call(t,n,t,e):r)||(e.exports=i)},56421:function(e,t,n){"use strict";var r,i=n(96425),s=(r=i)&&r.__esModule?r:{default:r};var a={tags:function(e){var t=e.id,n=e.events,r=e.dataLayer,i=e.dataLayerName,a=e.preview,o="&gtm_auth="+e.auth,u="&gtm_preview="+a;return t||(0,s.default)("GTM Id is required"),{iframe:'\n      <iframe src="https://www.googletagmanager.com/ns.html?id='+t+o+u+'&gtm_cookies_win=x"\n        height="0" width="0" style="display:none;visibility:hidden" id="tag-manager"></iframe>',script:"\n      (function(w,d,s,l,i){w[l]=w[l]||[];\n        w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js', "+JSON.stringify(n).slice(1,-1)+"});\n        var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';\n        j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl+'"+o+u+"&gtm_cookies_win=x';\n        f.parentNode.insertBefore(j,f);\n      })(window,document,'script','"+i+"','"+t+"');",dataLayerVar:this.dataLayer(r,i)}},dataLayer:function(e,t){return"\n      window."+t+" = window."+t+" || [];\n      window."+t+".push("+JSON.stringify(e)+")"}};e.exports=a},58676:function(e,t,n){"use strict";var r,i=n(56421),s=(r=i)&&r.__esModule?r:{default:r};var a={dataScript:function(e){var t=document.createElement("script");return t.innerHTML=e,t},gtm:function(e){var t=s.default.tags(e);return{noScript:function(){var e=document.createElement("noscript");return e.innerHTML=t.iframe,e},script:function(){var e=document.createElement("script");return e.innerHTML=t.script,e},dataScript:this.dataScript(t.dataLayerVar)}},initialize:function(e){var t=e.gtmId,n=e.events,r=void 0===n?{}:n,i=e.dataLayer,s=e.dataLayerName,a=void 0===s?"dataLayer":s,o=e.auth,u=void 0===o?"":o,c=e.preview,l=void 0===c?"":c,d=this.gtm({id:t,events:r,dataLayer:i||void 0,dataLayerName:a,auth:u,preview:l});i&&document.head.appendChild(d.dataScript),document.head.insertBefore(d.script(),document.head.childNodes[0]),document.body.insertBefore(d.noScript(),document.body.childNodes[0])},dataLayer:function(e){var t=e.dataLayer,n=e.dataLayerName,r=void 0===n?"dataLayer":n;if(window[r])return window[r].push(t);var i=s.default.dataLayer(t,r),a=this.dataScript(i);document.head.insertBefore(a,document.head.childNodes[0])}};e.exports=a},1785:function(e,t,n){"use strict";var r,i=n(58676),s=(r=i)&&r.__esModule?r:{default:r};e.exports=s.default},96425:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){console.warn("[react-gtm]",e)}},69921:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case d:case s:case o:case a:case f:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case g:case u:return e;default:return t}}case i:return t}}}function S(e){return _(e)===d}t.AsyncMode=l,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=h,t.Fragment=s,t.Lazy=m,t.Memo=g,t.Portal=i,t.Profiler=o,t.StrictMode=a,t.Suspense=f,t.isAsyncMode=function(e){return S(e)||_(e)===l},t.isConcurrentMode=S,t.isContextConsumer=function(e){return _(e)===c},t.isContextProvider=function(e){return _(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===h},t.isFragment=function(e){return _(e)===s},t.isLazy=function(e){return _(e)===m},t.isMemo=function(e){return _(e)===g},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===o},t.isStrictMode=function(e){return _(e)===a},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===d||e===o||e===a||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===u||e.$$typeof===c||e.$$typeof===h||e.$$typeof===y||e.$$typeof===w||e.$$typeof===b||e.$$typeof===v)},t.typeOf=_},59864:function(e,t,n){"use strict";e.exports=n(69921)},25617:function(e,t,n){"use strict";n.d(t,{zt:function(){return l},I0:function(){return g},v9:function(){return w}});var r=n(67294),i=r.createContext(null);var s=function(e){e()},a=function(){return s};var o={notify:function(){},get:function(){return[]}};function u(e,t){var n,r=o;function i(){u.onStateChange&&u.onStateChange()}function s(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=a(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var u={addNestedSub:function(e){return s(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:s,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=o)},getListeners:function(){return r}};return u}var c="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect;var l=function(e){var t=e.store,n=e.context,s=e.children,a=(0,r.useMemo)((function(){var e=u(t);return{store:t,subscription:e}}),[t]),o=(0,r.useMemo)((function(){return t.getState()}),[t]);c((function(){var e=a.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[a,o]);var l=n||i;return r.createElement(l.Provider,{value:a},s)};n(8679),n(72973);n(87462);function d(){return(0,r.useContext)(i)}function h(e){void 0===e&&(e=i);var t=e===i?d:function(){return(0,r.useContext)(e)};return function(){return t().store}}var f=h();function p(e){void 0===e&&(e=i);var t=e===i?f:h(e);return function(){return t().dispatch}}var g=p(),m=function(e,t){return e===t};function v(e){void 0===e&&(e=i);var t=e===i?d:function(){return(0,r.useContext)(e)};return function(e,n){void 0===n&&(n=m);var i=t(),s=function(e,t,n,i){var s,a=(0,r.useReducer)((function(e){return e+1}),0)[1],o=(0,r.useMemo)((function(){return u(n,i)}),[n,i]),l=(0,r.useRef)(),d=(0,r.useRef)(),h=(0,r.useRef)(),f=(0,r.useRef)(),p=n.getState();try{if(e!==d.current||p!==h.current||l.current){var g=e(p);s=void 0!==f.current&&t(g,f.current)?f.current:g}else s=f.current}catch(m){throw l.current&&(m.message+="\nThe error may be correlated with this previous error:\n"+l.current.stack+"\n\n"),m}return c((function(){d.current=e,h.current=p,f.current=s,l.current=void 0})),c((function(){function e(){try{var e=n.getState();if(e===h.current)return;var r=d.current(e);if(t(r,f.current))return;f.current=r,h.current=e}catch(m){l.current=m}a()}return o.onStateChange=e,o.trySubscribe(),e(),function(){return o.tryUnsubscribe()}}),[n,o]),s}(e,n,i.store,i.subscription);return(0,r.useDebugValue)(s),s}}var y,w=v(),b=n(73935);y=b.unstable_batchedUpdates,s=y},88359:function(e,t){"use strict";var n=60103,r=60106,i=60107,s=60108,a=60114,o=60109,u=60110,c=60112,l=60113,d=60120,h=60115,f=60116,p=60121,g=60122,m=60117,v=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var w=Symbol.for;n=w("react.element"),r=w("react.portal"),i=w("react.fragment"),s=w("react.strict_mode"),a=w("react.profiler"),o=w("react.provider"),u=w("react.context"),c=w("react.forward_ref"),l=w("react.suspense"),d=w("react.suspense_list"),h=w("react.memo"),f=w("react.lazy"),p=w("react.block"),g=w("react.server.block"),m=w("react.fundamental"),v=w("react.debug_trace_mode"),y=w("react.legacy_hidden")}function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case a:case s:case l:case d:return e;default:switch(e=e&&e.$$typeof){case u:case c:case f:case h:case o:return e;default:return t}}case r:return t}}}},72973:function(e,t,n){"use strict";n(88359)},40782:function(e,t,n){"use strict";n.d(t,{Ix:function(){return N},Am:function(){return H}});var r=n(67294);function i(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=i(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var s=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=i(e))&&(r&&(r+=" "),r+=t);return r},a=n(73935);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function u(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function c(e){return"number"===typeof e&&!isNaN(e)}function l(e){return"boolean"===typeof e}function d(e){return"string"===typeof e}function h(e){return"function"===typeof e}function f(e){return d(e)||h(e)?e:null}function p(e){return 0===e||e}var g=!("undefined"===typeof window||!window.document||!window.document.createElement);function m(e){return(0,r.isValidElement)(e)||d(e)||h(e)||c(e)}var v={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},y={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"};function w(e){var t=e.enter,n=e.exit,i=e.appendPosition,s=void 0!==i&&i,a=e.collapse,o=void 0===a||a,u=e.collapseDuration,c=void 0===u?300:u;return function(e){var i=e.children,a=e.position,u=e.preventExitTransition,l=e.done,d=e.nodeRef,h=e.isIn,f=s?t+"--"+a:t,p=s?n+"--"+a:n,g=(0,r.useRef)(),m=(0,r.useRef)(0);function v(e){if(e.target===d.current){var t=d.current;t.dispatchEvent(new Event("d")),t.removeEventListener("animationend",v),t.removeEventListener("animationcancel",v),0===m.current&&(t.className=g.current)}}function y(){var e=d.current;e.removeEventListener("animationend",y),o?function(e,t,n){void 0===n&&(n=300);var r=e.scrollHeight,i=e.style;requestAnimationFrame((function(){i.minHeight="initial",i.height=r+"px",i.transition="all "+n+"ms",requestAnimationFrame((function(){i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)}))}))}(e,l,c):l()}return(0,r.useLayoutEffect)((function(){!function(){var e=d.current;g.current=e.className,e.className+=" "+f,e.addEventListener("animationend",v),e.addEventListener("animationcancel",v)}()}),[]),(0,r.useEffect)((function(){h||(u?y():function(){m.current=1;var e=d.current;e.className+=" "+p,e.addEventListener("animationend",y)}())}),[h]),r.createElement(r.Fragment,null,i)}}var b={list:new Map,emitQueue:new Map,on:function(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off:function(e,t){if(t){var n=this.list.get(e).filter((function(e){return e!==t}));return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit:function(e){var t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.list.has(e)&&this.list.get(e).forEach((function(n){var i=setTimeout((function(){n.apply(void 0,r)}),0);t.emitQueue.has(e)||t.emitQueue.set(e,[]),t.emitQueue.get(e).push(i)}))}},_=["delay","staleId"];function S(e){var t=(0,r.useReducer)((function(e){return e+1}),0)[1],n=(0,r.useState)([]),i=n[0],s=n[1],a=(0,r.useRef)(null),o=(0,r.useRef)(new Map).current,g=function(e){return-1!==i.indexOf(e)},v=(0,r.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:g,getToast:function(e){return o.get(e)}}).current;function y(e){var t=e.containerId;!v.props.limit||t&&v.containerId!==t||(v.count-=v.queue.length,v.queue=[])}function w(e){s((function(t){return p(e)?t.filter((function(t){return t!==e})):[]}))}function S(){var e=v.queue.shift();T(e.toastContent,e.toastProps,e.staleId)}function k(e,n){var i=n.delay,s=n.staleId,g=u(n,_);if(m(e)&&!function(e){return!a.current||v.props.enableMultiContainer&&e.containerId!==v.props.containerId||o.has(e.toastId)&&null==e.updateId}(g)){var y=g.toastId,b=g.updateId,k=g.data,I=v.props,E=function(){return w(y)},C=null==b;C&&v.count++;var x,A,D={toastId:y,updateId:b,isLoading:g.isLoading,theme:g.theme||I.theme,icon:null!=g.icon?g.icon:I.icon,isIn:!1,key:g.key||v.toastKey++,type:g.type,closeToast:E,closeButton:g.closeButton,rtl:I.rtl,position:g.position||I.position,transition:g.transition||I.transition,className:f(g.className||I.toastClassName),bodyClassName:f(g.bodyClassName||I.bodyClassName),style:g.style||I.toastStyle,bodyStyle:g.bodyStyle||I.bodyStyle,onClick:g.onClick||I.onClick,pauseOnHover:l(g.pauseOnHover)?g.pauseOnHover:I.pauseOnHover,pauseOnFocusLoss:l(g.pauseOnFocusLoss)?g.pauseOnFocusLoss:I.pauseOnFocusLoss,draggable:l(g.draggable)?g.draggable:I.draggable,draggablePercent:g.draggablePercent||I.draggablePercent,draggableDirection:g.draggableDirection||I.draggableDirection,closeOnClick:l(g.closeOnClick)?g.closeOnClick:I.closeOnClick,progressClassName:f(g.progressClassName||I.progressClassName),progressStyle:g.progressStyle||I.progressStyle,autoClose:!g.isLoading&&(x=g.autoClose,A=I.autoClose,!1===x||c(x)&&x>0?x:A),hideProgressBar:l(g.hideProgressBar)?g.hideProgressBar:I.hideProgressBar,progress:g.progress,role:g.role||I.role,deleteToast:function(){o.delete(y);var e=v.queue.length;if(v.count=p(y)?v.count-1:v.count-v.displayedToast,v.count<0&&(v.count=0),e>0){var n=p(y)?1:v.props.limit;if(1===e||1===n)v.displayedToast++,S();else{var r=n>e?e:n;v.displayedToast=r;for(var i=0;i<r;i++)S()}}else t()}};h(g.onOpen)&&(D.onOpen=g.onOpen),h(g.onClose)&&(D.onClose=g.onClose),D.closeButton=I.closeButton,!1===g.closeButton||m(g.closeButton)?D.closeButton=g.closeButton:!0===g.closeButton&&(D.closeButton=!m(I.closeButton)||I.closeButton);var O=e;(0,r.isValidElement)(e)&&!d(e.type)?O=(0,r.cloneElement)(e,{closeToast:E,toastProps:D,data:k}):h(e)&&(O=e({closeToast:E,toastProps:D,data:k})),I.limit&&I.limit>0&&v.count>I.limit&&C?v.queue.push({toastContent:O,toastProps:D,staleId:s}):c(i)&&i>0?setTimeout((function(){T(O,D,s)}),i):T(O,D,s)}}function T(e,t,n){var r=t.toastId;n&&o.delete(n),o.set(r,{content:e,props:t}),s((function(e){return[].concat(e,[r]).filter((function(e){return e!==n}))}))}return(0,r.useEffect)((function(){return v.containerId=e.containerId,b.cancelEmit(3).on(0,k).on(1,(function(e){return a.current&&w(e)})).on(5,y).emit(2,v),function(){return b.emit(3,v)}}),[]),(0,r.useEffect)((function(){v.isToastActive=g,v.displayedToast=i.length,b.emit(4,i.length,e.containerId)}),[i]),(0,r.useEffect)((function(){v.props=e})),{getToastToRender:function(t){var n=new Map,r=Array.from(o.values());return e.newestOnTop&&r.reverse(),r.forEach((function(e){var t=e.props.position;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(function(e){return t(e[0],e[1])}))},containerRef:a,isToastActive:g}}function k(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function T(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function I(e){var t=(0,r.useState)(!1),n=t[0],i=t[1],s=(0,r.useState)(!1),a=s[0],o=s[1],u=(0,r.useRef)(null),c=(0,r.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,l=(0,r.useRef)(e),d=e.autoClose,f=e.pauseOnHover,p=e.closeToast,g=e.onClick,m=e.closeOnClick;function v(t){if(e.draggable){c.didMove=!1,document.addEventListener("mousemove",_),document.addEventListener("mouseup",S),document.addEventListener("touchmove",_),document.addEventListener("touchend",S);var n=u.current;c.canCloseOnClick=!0,c.canDrag=!0,c.boundingRect=n.getBoundingClientRect(),n.style.transition="",c.x=k(t.nativeEvent),c.y=T(t.nativeEvent),"x"===e.draggableDirection?(c.start=c.x,c.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(c.start=c.y,c.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function y(){if(c.boundingRect){var t=c.boundingRect,n=t.top,r=t.bottom,i=t.left,s=t.right;e.pauseOnHover&&c.x>=i&&c.x<=s&&c.y>=n&&c.y<=r?b():w()}}function w(){i(!0)}function b(){i(!1)}function _(t){var r=u.current;c.canDrag&&r&&(c.didMove=!0,n&&b(),c.x=k(t),c.y=T(t),"x"===e.draggableDirection?c.delta=c.x-c.start:c.delta=c.y-c.start,c.start!==c.x&&(c.canCloseOnClick=!1),r.style.transform="translate"+e.draggableDirection+"("+c.delta+"px)",r.style.opacity=""+(1-Math.abs(c.delta/c.removalDistance)))}function S(){document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",S),document.removeEventListener("touchmove",_),document.removeEventListener("touchend",S);var t=u.current;if(c.canDrag&&c.didMove&&t){if(c.canDrag=!1,Math.abs(c.delta)>c.removalDistance)return o(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform="translate"+e.draggableDirection+"(0)",t.style.opacity="1"}}(0,r.useEffect)((function(){l.current=e})),(0,r.useEffect)((function(){return u.current&&u.current.addEventListener("d",w,{once:!0}),h(e.onOpen)&&e.onOpen((0,r.isValidElement)(e.children)&&e.children.props),function(){var e=l.current;h(e.onClose)&&e.onClose((0,r.isValidElement)(e.children)&&e.children.props)}}),[]),(0,r.useEffect)((function(){return e.pauseOnFocusLoss&&function(){document.hasFocus()||b();window.addEventListener("focus",w),window.addEventListener("blur",b)}(),function(){e.pauseOnFocusLoss&&(window.removeEventListener("focus",w),window.removeEventListener("blur",b))}}),[e.pauseOnFocusLoss]);var I={onMouseDown:v,onTouchStart:v,onMouseUp:y,onTouchEnd:y};return d&&f&&(I.onMouseEnter=b,I.onMouseLeave=w),m&&(I.onClick=function(e){g&&g(e),c.canCloseOnClick&&p()}),{playToast:w,pauseToast:b,isRunning:n,preventExitTransition:a,toastRef:u,eventHandlers:I}}function E(e){var t=e.closeToast,n=e.theme,i=e.ariaLabel,s=void 0===i?"close":i;return(0,r.createElement)("button",{className:"Toastify__close-button Toastify__close-button--"+n,type:"button",onClick:function(e){e.stopPropagation(),t(e)},"aria-label":s},(0,r.createElement)("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},(0,r.createElement)("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function C(e){var t,n,i=e.delay,a=e.isRunning,u=e.closeToast,c=e.type,l=e.hide,d=e.className,f=e.style,p=e.controlledProgress,g=e.progress,m=e.rtl,v=e.isIn,y=e.theme,w=o({},f,{animationDuration:i+"ms",animationPlayState:a?"running":"paused",opacity:l?0:1});p&&(w.transform="scaleX("+g+")");var b=s("Toastify__progress-bar",p?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--"+y,"Toastify__progress-bar--"+c,((t={})["Toastify__progress-bar--rtl"]=m,t)),_=h(d)?d({rtl:m,type:c,defaultClassName:b}):s(b,d),S=((n={})[p&&g>=1?"onTransitionEnd":"onAnimationEnd"]=p&&g<1?null:function(){v&&u()},n);return(0,r.createElement)("div",Object.assign({role:"progressbar","aria-hidden":l?"true":"false","aria-label":"notification timer",className:_,style:w},S))}C.defaultProps={type:y.DEFAULT,hide:!1};var x=["theme","type"],A=function(e){var t=e.theme,n=e.type,i=u(e,x);return(0,r.createElement)("svg",Object.assign({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-"+n+")"},i))};var D={info:function(e){return(0,r.createElement)(A,Object.assign({},e),(0,r.createElement)("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return(0,r.createElement)(A,Object.assign({},e),(0,r.createElement)("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return(0,r.createElement)(A,Object.assign({},e),(0,r.createElement)("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return(0,r.createElement)(A,Object.assign({},e),(0,r.createElement)("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return(0,r.createElement)("div",{className:"Toastify__spinner"})}},O=function(e){var t,n,i=I(e),a=i.isRunning,o=i.preventExitTransition,u=i.toastRef,c=i.eventHandlers,l=e.closeButton,f=e.children,p=e.autoClose,g=e.onClick,m=e.type,v=e.hideProgressBar,y=e.closeToast,w=e.transition,b=e.position,_=e.className,S=e.style,k=e.bodyClassName,T=e.bodyStyle,E=e.progressClassName,x=e.progressStyle,A=e.updateId,O=e.role,P=e.progress,N=e.rtl,R=e.toastId,L=e.deleteToast,M=e.isIn,U=e.isLoading,j=e.icon,F=e.theme,V=s("Toastify__toast","Toastify__toast-theme--"+F,"Toastify__toast--"+m,((t={})["Toastify__toast--rtl"]=N,t)),B=h(_)?_({rtl:N,position:b,type:m,defaultClassName:V}):s(V,_),Z=!!P,q=D[m],z={theme:F,type:m},H=q&&q(z);return!1===j?H=void 0:h(j)?H=j(z):(0,r.isValidElement)(j)?H=(0,r.cloneElement)(j,z):d(j)?H=j:U&&(H=D.spinner()),(0,r.createElement)(w,{isIn:M,done:L,position:b,preventExitTransition:o,nodeRef:u},(0,r.createElement)("div",Object.assign({id:R,onClick:g,className:B},c,{style:S,ref:u}),(0,r.createElement)("div",Object.assign({},M&&{role:O},{className:h(k)?k({type:m}):s("Toastify__toast-body",k),style:T}),H&&(0,r.createElement)("div",{className:s("Toastify__toast-icon",(n={},n["Toastify--animate-icon Toastify__zoom-enter"]=!U,n))},H),(0,r.createElement)("div",null,f)),function(e){if(e){var t={closeToast:y,type:m,theme:F};return h(e)?e(t):(0,r.isValidElement)(e)?(0,r.cloneElement)(e,t):void 0}}(l),(p||Z)&&(0,r.createElement)(C,Object.assign({},A&&!Z?{key:"pb-"+A}:{},{rtl:N,theme:F,delay:p,isRunning:a,isIn:M,closeToast:y,hide:v,type:m,style:x,className:E,controlledProgress:Z,progress:P}))))},P=w({enter:"Toastify--animate Toastify__bounce-enter",exit:"Toastify--animate Toastify__bounce-exit",appendPosition:!0}),N=function(e){var t=S(e),n=t.getToastToRender,i=t.containerRef,a=t.isToastActive,u=e.className,c=e.style,l=e.rtl,d=e.containerId;function p(e){var t,n=s("Toastify__toast-container","Toastify__toast-container--"+e,((t={})["Toastify__toast-container--rtl"]=l,t));return h(u)?u({position:e,rtl:l,defaultClassName:n}):s(n,f(u))}return(0,r.createElement)("div",{ref:i,className:"Toastify",id:d},n((function(e,t){var n=t.length?o({},c):o({},c,{pointerEvents:"none"});return(0,r.createElement)("div",{className:p(e),style:n,key:"container-"+e},t.map((function(e){var t=e.content,n=e.props;return(0,r.createElement)(O,Object.assign({},n,{isIn:a(n.toastId),key:"toast-"+n.key,closeButton:!0===n.closeButton?E:n.closeButton}),t)})))})))};N.defaultProps={position:v.TOP_RIGHT,transition:P,rtl:!1,autoClose:5e3,hideProgressBar:!1,closeButton:E,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,newestOnTop:!1,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};var R,L,M,U=new Map,j=[],F=!1;function V(){return Math.random().toString(36).substring(2,9)}function B(e){return e&&(d(e.toastId)||c(e.toastId))?e.toastId:V()}function Z(e,t){return U.size>0?b.emit(0,e,t):(j.push({content:e,options:t}),F&&g&&(F=!1,L=document.createElement("div"),document.body.appendChild(L),(0,a.render)((0,r.createElement)(N,Object.assign({},M)),L))),t.toastId}function q(e,t){return o({},t,{type:t&&t.type||e,toastId:B(t)})}function z(e){return function(t,n){return Z(t,q(e,n))}}function H(e,t){return Z(e,q(y.DEFAULT,t))}H.loading=function(e,t){return Z(e,q(y.DEFAULT,o({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t)))},H.promise=function(e,t,n){var r,i=t.pending,s=t.error,a=t.success;i&&(r=d(i)?H.loading(i,n):H.loading(i.render,o({},n,i)));var u={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=function(e,t,i){if(null!=t){var s=o({type:e},u,n,{data:i}),a=d(t)?{render:t}:t;return r?H.update(r,o({},s,a)):H(a.render,o({},s,a)),i}H.dismiss(r)},l=h(e)?e():e;return l.then((function(e){return c("success",a,e)})).catch((function(e){return c("error",s,e)})),l},H.success=z(y.SUCCESS),H.info=z(y.INFO),H.error=z(y.ERROR),H.warning=z(y.WARNING),H.warn=H.warning,H.dark=function(e,t){return Z(e,q(y.DEFAULT,o({theme:"dark"},t)))},H.dismiss=function(e){return b.emit(1,e)},H.clearWaitingQueue=function(e){return void 0===e&&(e={}),b.emit(5,e)},H.isActive=function(e){var t=!1;return U.forEach((function(n){n.isToastActive&&n.isToastActive(e)&&(t=!0)})),t},H.update=function(e,t){void 0===t&&(t={}),setTimeout((function(){var n=function(e,t){var n=t.containerId,r=U.get(n||R);return r?r.getToast(e):null}(e,t);if(n){var r=n.props,i=n.content,s=o({},r,t,{toastId:t.toastId||e,updateId:V()});s.toastId!==e&&(s.staleId=e);var a=s.render||i;delete s.render,Z(a,s)}}),0)},H.done=function(e){H.update(e,{progress:1})},H.onChange=function(e){return h(e)&&b.on(4,e),function(){h(e)&&b.off(4,e)}},H.configure=function(e){void 0===e&&(e={}),F=!0,M=e},H.POSITION=v,H.TYPE=y,b.on(2,(function(e){R=e.containerId||e,U.set(R,e),j.forEach((function(e){b.emit(0,e.content,e.options)})),j=[]})).on(3,(function(e){U.delete(e.containerId||e),0===U.size&&b.off(0).off(1).off(5),g&&L&&document.body.removeChild(L)}))},89569:function(e,t,n){"use strict";n.d(t,{md:function(){return g},UY:function(){return f},qC:function(){return p},MT:function(){return h}});var r=n(83997);function i(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var u="function"===typeof Symbol&&Symbol.observable||"@@observable",c=function(){return Math.random().toString(36).substring(7).split("").join(".")},l={INIT:"@@redux/INIT"+c(),REPLACE:"@@redux/REPLACE"+c(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+c()}};function d(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function h(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(o(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(o(1));return n(h)(e,t)}if("function"!==typeof e)throw new Error(o(2));var i=e,s=t,a=[],c=a,f=!1;function p(){c===a&&(c=a.slice())}function g(){if(f)throw new Error(o(3));return s}function m(e){if("function"!==typeof e)throw new Error(o(4));if(f)throw new Error(o(5));var t=!0;return p(),c.push(e),function(){if(t){if(f)throw new Error(o(6));t=!1,p();var n=c.indexOf(e);c.splice(n,1),a=null}}}function v(e){if(!d(e))throw new Error(o(7));if("undefined"===typeof e.type)throw new Error(o(8));if(f)throw new Error(o(9));try{f=!0,s=i(s,e)}finally{f=!1}for(var t=a=c,n=0;n<t.length;n++){(0,t[n])()}return e}function y(e){if("function"!==typeof e)throw new Error(o(10));i=e,v({type:l.REPLACE})}function w(){var e,t=m;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(o(11));function n(){e.next&&e.next(g())}return n(),{unsubscribe:t(n)}}})[u]=function(){return this},e}return v({type:l.INIT}),(r={dispatch:v,subscribe:m,getState:g,replaceReducer:y})[u]=w,r}function f(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var s,a=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:l.INIT}))throw new Error(o(12));if("undefined"===typeof n(void 0,{type:l.PROBE_UNKNOWN_ACTION()}))throw new Error(o(13))}))}(n)}catch(u){s=u}return function(e,t){if(void 0===e&&(e={}),s)throw s;for(var r=!1,i={},u=0;u<a.length;u++){var c=a[u],l=n[c],d=e[c],h=l(d,t);if("undefined"===typeof h){t&&t.type;throw new Error(o(14))}i[c]=h,r=r||h!==d}return(r=r||a.length!==Object.keys(e).length)?i:e}}function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function g(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(o(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},s=t.map((function(e){return e(i)}));return r=p.apply(void 0,s)(n.dispatch),a(a({},n),{},{dispatch:r})}}}},87462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},83997:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(71002);function i(e){var t=function(e,t){if("object"!=(0,r.Z)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.Z)(t)?t:String(t)}},71002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},25816:function(e,t,n){"use strict";n.d(t,{Jn:function(){return M},qX:function(){return P},Xd:function(){return O},Mq:function(){return j},C6:function(){return F},ZF:function(){return U},KN:function(){return V}});var r=n(8463),i=n(53333),s=n(74444);let a,o;const u=new WeakMap,c=new WeakMap,l=new WeakMap,d=new WeakMap,h=new WeakMap;let f={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return c.get(e);if("objectStoreNames"===t)return e.objectStoreNames||l.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return m(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(o||(o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(v(this),t),m(u.get(this))}:function(...t){return m(e.apply(v(this),t))}:function(t,...n){const r=e.call(v(this),t,...n);return l.set(r,t.sort?t.sort():[t]),m(r)}}function g(e){return"function"===typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(c.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));c.set(e,t)}(e),t=e,(a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,f):e);var t}function m(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(m(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&u.set(t,e)})).catch((()=>{})),h.set(t,e),t}(e);if(d.has(e))return d.get(e);const t=g(e);return t!==e&&(d.set(e,t),h.set(t,e)),t}const v=e=>h.get(e);const y=["get","getKey","getAll","getAllKeys","count"],w=["put","add","delete","clear"],b=new Map;function _(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(b.get(t))return b.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=w.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!y.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let a=s.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&s.done]))[0]};return b.set(t,s),s}f=(e=>({...e,get:(t,n,r)=>_(t,n)||e.get(t,n,r),has:(t,n)=>!!_(t,n)||e.has(t,n)}))(f);class S{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const k="@firebase/app",T="0.9.13",I=new i.Yd("@firebase/app"),E="[DEFAULT]",C={[k]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},x=new Map,A=new Map;function D(e,t){try{e.container.addComponent(t)}catch(n){I.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function O(e){const t=e.name;if(A.has(t))return I.debug(`There were multiple attempts to register component ${t}.`),!1;A.set(t,e);for(const n of x.values())D(n,e);return!0}function P(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const N={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},R=new s.LL("app","Firebase",N);class L{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.wA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw R.create("app-deleted",{appName:this._name})}}const M="9.23.0";function U(e,t={}){let n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:E,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw R.create("bad-app-name",{appName:String(a)});if(n||(n=(0,s.aH)()),!n)throw R.create("no-options");const o=x.get(a);if(o){if((0,s.vZ)(n,o.options)&&(0,s.vZ)(i,o.config))return o;throw R.create("duplicate-app",{appName:a})}const u=new r.H0(a);for(const r of A.values())u.addComponent(r);const c=new L(n,i,u);return x.set(a,c),c}function j(e="[DEFAULT]"){const t=x.get(e);if(!t&&e===E&&(0,s.aH)())return U();if(!t)throw R.create("no-app",{appName:e});return t}function F(){return Array.from(x.values())}function V(e,t,n){var i;let s=null!==(i=C[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const a=s.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const e=[`Unable to register library "${s}" with version "${t}":`];return a&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void I.warn(e.join(" "))}O(new r.wA(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const B="firebase-heartbeat-store";let Z=null;function q(){return Z||(Z=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(e,t),o=m(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(m(a.result),e.oldVersion,e.newVersion,m(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(B)}}).catch((e=>{throw R.create("idb-open",{originalErrorMessage:e.message})}))),Z}async function z(e,t){try{const n=(await q()).transaction(B,"readwrite"),r=n.objectStore(B);await r.put(t,H(e)),await n.done}catch(n){if(n instanceof s.ZR)I.warn(n.message);else{const e=R.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});I.warn(e.message)}}}function H(e){return`${e.name}!${e.options.appId}`}class ${constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Y(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=W();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=W(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),G(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),G(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=(0,s.L)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function W(){return(new Date).toISOString().substring(0,10)}class Y{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.hl)()&&(0,s.eu)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(e){try{const t=await q();return await t.transaction(B).objectStore(B).get(H(e))}catch(t){if(t instanceof s.ZR)I.warn(t.message);else{const e=R.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});I.warn(e.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return z(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return z(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function G(e){return(0,s.L)(JSON.stringify({version:2,heartbeats:e})).length}var K;K="",O(new r.wA("platform-logger",(e=>new S(e)),"PRIVATE")),O(new r.wA("heartbeat",(e=>new $(e)),"PRIVATE")),V(k,T,K),V(k,T,"esm2017"),V("fire-js","")},8463:function(e,t,n){"use strict";n.d(t,{wA:function(){return i},H0:function(){return o}});var r=n(74444);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===s?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(i){}var r;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class o{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},53333:function(e,t,n){"use strict";n.d(t,{in:function(){return i},Yd:function(){return c}});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},a=i.INFO,o={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},u=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=o[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=u,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}},97582:function(e,t,n){"use strict";n.d(t,{_T:function(){return r},gn:function(){return i}});function r(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function i(e,t,n,r){var i,s=arguments.length,a=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(s<3?i(a):s>3?i(t,n,a):i(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[9774,179],(function(){return t(81780),t(90387)}));var n=e.O();_N_E=n}]);